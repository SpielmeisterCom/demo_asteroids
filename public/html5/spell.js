(function(document){var modules={},createModuleSource=function(e,t){return t+"\n//@ sourceURL="+e},createRequest=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},loadModule=function(name,libraryUrl,libraryManager){var scriptName=name+".js",cachedEntry,source;libraryManager&&(cachedEntry=libraryManager.get(scriptName));if(cachedEntry)source=cachedEntry;else{var moduleUrl=libraryUrl?libraryUrl+"/"+scriptName:scriptName,request=createRequest(moduleUrl);if(request.status!==200&&request.status!==0)throw"Error: Loading '"+moduleUrl+"' failed.";source=request.responseText}return eval(createModuleSource(scriptName,source)),modules[name]},createModule=function(e,t){var n=loadModule(e,t.libraryUrl,t.libraryManager);if(!n)throw"Error: Could not load module '"+e+"'.";return modules[e]=n,n},createModuleInstance=function(e,t,n,r){var i=[];if(e)for(var s=0;s<e.length;s++){var o=e[s],u=modules[o];!u&&r.hashModuleId&&(u=modules[r.hashModuleId(o)]),u||(u=createModule(o,r)),u.instance||(u.instance=createModuleInstance(u.dependencies,u.body,undefined,r)),i.push(u.instance)}return n&&i.push(n),t.apply(null,i)},traceDependentModules=function(e,t){t=t||[];for(var n=0,r=e.length;n<r;n++){var i=e[n];for(var s in modules){var o=modules[s],u=o.dependencies;if(!u)continue;for(var n=0,a=u.length;n<a;n++){var f=u[n];i===f&&t.push(s)}}}return t},createDependentModules=function(e){return traceDependentModules([e])},define=function(name){var numArguments=arguments.length,arg1=arguments[1];if(numArguments<2||numArguments>3)throw"Error: Module definition is invalid.";typeof arg1=="string"?eval(createModuleSource(name+".js",arg1)):modules[name]={body:numArguments===2?arg1:arguments[2],dependencies:numArguments===2?undefined:arg1}},require=function(e,t,n){if(!e)throw"Error: No module name provided.";var r=modules[e];!r&&n.hashModuleId&&(r=modules[n.hashModuleId(e)]);if(!r){if(n.loadingAllowed===!1)throw"Error: Missing module '"+e+"'. External loading is disabled. Please make sure that all required modules are shipped.";r=createModule(e,n)}return r.instance||(r.instance=createModuleInstance(r.dependencies,r.body,t,n)),r.instance};window.define=define,window.require=require,window.createDependentModules=createDependentModules})(document)
define("31xs7IP9/9HMl0FlArPRi/p/6e1y56BYxsmywdBgw2Y=",["J19VukA9OHTe67LZyXj0g0dFAjqaCGG1/kxNYjbMFWo="],function(e){"use strict";return e}),define("ejgJf7mQ9axq1cyy26lksn3189ZkhWjFWj4zgUj60cw=",["6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=e.Box2D,r=n.Common.Math.createB2Vec2,i=n.Dynamics.createB2World,s=n.Dynamics.b2Body,o=n.Dynamics.createB2BodyDef,u=n.Dynamics.createB2FilterData,a={},f=function(e){return a[e]},l=function(e,t,n){var i=this.getBodyById(e);if(!i)return;var s=this.scale,o=t[0]*s,u=t[1]*s;(o||u)&&i.ApplyForce(r(o,u),n?r(n[0]*s,n[1]*s):i.GetWorldCenter())},c=function(e,t){var n=this.getBodyById(e);if(!n)return;t&&n.ApplyTorque(t*this.scale)},h=function(e,t,n){var i=this.getBodyById(e);if(!i)return;var s=this.scale,o=t[0]*s,u=t[1]*s;(o||u)&&i.ApplyImpulse(r(o,u),n?r(n[0]*s,n[1]*s):i.GetWorldCenter())},p=function(e,t){var n=this.getBodyById(e);if(!n)return;var i=this.scale;n.SetLinearVelocity(r(t[0]*i,t[1]*i))},d=function(e,t,n){var r=this.getBodyById(e);if(!r)return;for(var i=r.GetFixtureList();i;i=i.GetNext()){var s=i.GetFilterData(),o=u();o.categoryBits=t===undefined?s.categoryBits:t,o.maskBits=n===undefined?s.maskBits:n,i.SetFilterData(o)}},v=function(e,t){var n=this.getBodyById(e);if(!n)return;n.SetAwake(t)},m=function(e,t){var n=this.getBodyById(e);if(!n)return;var i=this.scale;n.SetPosition(r(t[0]*i,t[1]*i))},g=function(e){return e==="static"?s.b2_staticBody:e==="dynamic"?s.b2_dynamicBody:e==="kinematic"?s.b2_kinematicBody:undefined},y=function(e){return e==="static"},b=function(e,t,n){var r=n.translation,i=o(),s=g(t.type),u=this.scale;if(s===undefined)return;i.awake=!y(t.type),i.fixedRotation=t.fixedRotation,i.type=s,i.position.x=r[0]*u,i.position.y=r[1]*u,i.angle=n.rotation,i.userData=e;var t=this.rawWorld.CreateBody(i);return a[e]=t,t},w=function(e){var t=this.getBodyById(e);if(!t)return;delete a[e],this.rawWorld.DestroyBody(t)},E=function(){return this.rawWorld},S=function(e,t,n){e===undefined&&(e=!0),t||(t=[0,0]),n||(n=1),this.rawWorld=i(r(t[0],t[1]),e),this.scale=n};return S.prototype={applyForce:l,applyImpulse:h,applyTorque:c,createBodyDef:b,destroyBody:w,getBodyById:f,getRawWorld:E,setAwake:v,setFilterData:d,setPosition:m,setVelocity:p},function(e,t,n){return new S(e,t,n)}}),define("Y+HrMll7Ng4+i8ynbZkdI2CDky7Ts7kFhGQCNWGqGQw=",["ejgJf7mQ9axq1cyy26lksn3189ZkhWjFWj4zgUj60cw="],function(e){"use strict";return function(){return{createWorld:e}}}),define("39gFs/6MB0ozYMGq2AC/r1nziKIaUeLJSZaG9oJ55h8=",["wspZzshkZyWF8MhE/MwHByCOFh6eOue2ZqHunVz8+I8="],function(e){"use strict";return e}),define("x81J/Fr9o8YgVYUYkA4GBLPAGmW4ok/0zW45f+sTXe4=",["39gFs/6MB0ozYMGq2AC/r1nziKIaUeLJSZaG9oJ55h8=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=0,r=1,i=2,s=3,o=4,u=["DEBUG","INFO","WARN","ERROR","SILENT"],a=function(e){if(e<0||e>4)throw"Log level "+e+" is not supported."},f=function(e,t){return u[e]+" - "+t},l=function(e){a(e),this.currentLogLevel=e||r,this.sendMessageToEditor=undefined};return l.prototype={LOG_LEVEL_DEBUG:n,LOG_LEVEL_INFO:r,LOG_LEVEL_WARN:i,LOG_LEVEL_ERROR:s,LOG_LEVEL_SILENT:o,setSendMessageToEditor:function(e){this.sendMessageToEditor=e},setLogLevel:function(e){a(e),this.currentLogLevel=e},log:function(t,r){arguments.length===1&&(r=t,t=n);if(t<this.currentLogLevel)return;this.sendMessageToEditor&&this.sendMessageToEditor("spelled.debug.consoleMessage",{level:u[t],text:r}),e(f(t,r))},debug:function(e){this.log(n,e)},info:function(e){this.log(r,e)},warn:function(e){this.log(i,e)},error:function(e){this.log(s,e)}},l}),define("QGfnGX0u4msE+kZC/56cY/9TOvn7ZCzFFI10N1Erczg=",["xzulUmNYw/38rNcu3Y7xU3DRAD5hGCLMNWsYeDxH4jc="],function(e){"use strict";var t=63,n=1,r=e.addNode,i=e.getNode,s=e.eachNode,o=function(e){var t=[];while(e>0)t.push(0),e--;return t},u=function(e,t){var n=t.length,r=0;for(var i=0;i<n;i++)r+=Math.pow(t[i]-e,2);return Math.sqrt(r/n)},a=function(e){return{children:[],id:e,metrics:[0,0,0,0],values:o(t)}},f=function(e){var r=e.values,i=0,s=Number.MAX_VALUE,o=0,a=0;for(var f=0,l=r.length;f<l;f++){var c=r[f];if(c===0)continue;c<s&&(s=c),c>o&&(o=c),a+=c}a!==0?i=a/t:s=0;var h=e.metrics;h[0]=i.toFixed(n),h[1]=s.toFixed(n),h[2]=o.toFixed(n),h[3]=u(i,r).toFixed(2)},l=function(e){var t=e.values;t.shift(),t.push(0)},c=function(e){var t=e.values;for(var n=0,r=t.length;n<r;n++)t[n]=0},h=function(){this.tree=null,this.timestamps=o(t),this.totalTickTimeInMs=0,this.numTicks=0};return h.prototype={init:function(){this.tree=a("total"),r(this.tree,"total",a("render")),r(this.tree,"total",a("update"))},addNode:function(e,t){var n=r(this.tree,t,a(e));if(!n)throw'Could not add node "'+e+'" to parent node "'+t+'".'},startTick:function(e,t){this.totalTickTimeInMs+=t,this.numTicks++;var n=this.timestamps;n.shift(),n.push(e),s(this.tree,l)},updateNode:function(e,t){var n=i(this.tree,e);if(!n)return;n.values[n.values.length-1]+=t},getMetrics:function(e){return s(this.tree,f),this.tree},getAverageTickTime:function(){return Math.round(this.totalTickTimeInMs/this.numTicks)},reset:function(){this.totalTickTimeInMs=0,this.numTicks=0,s(this.tree,c)}},h}),define("JoXWj40Y1mozCrRKdElU4QZ2XbCHKUve+HAQqeLSgQ8=",function(){var e=8,t="=",n=0,r=function(t){var n=[],r=(1<<e)-1,i=t.length*e,s;for(s=0;s<i;s+=e)n[s>>5]|=(t.charCodeAt(s/e)&r)<<32-e-s%32;return n},i=function(e){var t=[],n=e.length,r,i;for(r=0;r<n;r+=2){i=parseInt(e.substr(r,2),16);if(!!isNaN(i))return"INVALID HEX STRING";t[r>>3]|=i<<24-4*(r%8)}return t},s=function(e){var t=n?"0123456789ABCDEF":"0123456789abcdef",r="",i=e.length*4,s,o;for(s=0;s<i;s+=1)o=e[s>>2]>>(3-s%4)*8,r+=t.charAt(o>>4&15)+t.charAt(o&15);return r},o=function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=e.length*4,s,o,u;for(s=0;s<i;s+=3){u=(e[s>>2]>>8*(3-s%4)&255)<<16|(e[s+1>>2]>>8*(3-(s+1)%4)&255)<<8|e[s+2>>2]>>8*(3-(s+2)%4)&255;for(o=0;o<4;o+=1)s*8+o*6<=e.length*32?r+=n.charAt(u>>6*(3-o)&63):r+=t}return r},u=function(e,t){return e>>>t|e<<32-t},a=function(e,t){return e>>>t},f=function(e,t,n){return e&t^~e&n},l=function(e,t,n){return e&t^e&n^t&n},c=function(e){return u(e,2)^u(e,13)^u(e,22)},h=function(e){return u(e,6)^u(e,11)^u(e,25)},p=function(e){return u(e,7)^u(e,18)^a(e,3)},d=function(e){return u(e,17)^u(e,19)^a(e,10)},v=function(e,t){var n=(e&65535)+(t&65535),r=(e>>>16)+(t>>>16)+(n>>>16);return(r&65535)<<16|n&65535},m=function(e,t,n,r){var i=(e&65535)+(t&65535)+(n&65535)+(r&65535),s=(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16);return(s&65535)<<16|i&65535},g=function(e,t,n,r,i){var s=(e&65535)+(t&65535)+(n&65535)+(r&65535)+(i&65535),o=(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(s>>>16);return(o&65535)<<16|s&65535},y=function(e,t,n){var r,i,s,o,u,a,y,b,w,E,S,x,T,N,C,k=[],L;if(n==="SHA-224"||n==="SHA-256")x=(t+65>>9<<4)+15,C=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n==="SHA-224"?S=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]:S=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];e[t>>5]|=128<<24-t%32,e[x]=t,L=e.length;for(T=0;T<L;T+=16){r=S[0],i=S[1],s=S[2],o=S[3],u=S[4],a=S[5],y=S[6],b=S[7];for(N=0;N<64;N+=1)N<16?k[N]=e[N+T]:k[N]=m(d(k[N-2]),k[N-7],p(k[N-15]),k[N-16]),w=g(b,h(u),f(u,a,y),C[N],k[N]),E=v(c(r),l(r,i,s)),b=y,y=a,a=u,u=v(o,w),o=s,s=i,i=r,r=v(w,E);S[0]=v(r,S[0]),S[1]=v(i,S[1]),S[2]=v(s,S[2]),S[3]=v(o,S[3]),S[4]=v(u,S[4]),S[5]=v(a,S[5]),S[6]=v(y,S[6]),S[7]=v(b,S[7])}switch(n){case"SHA-224":return[S[0],S[1],S[2],S[3],S[4],S[5],S[6]];case"SHA-256":return S;default:return[]}},b=function(t,n){this.sha224=null,this.sha256=null,this.strBinLen=null,this.strToHash=null;if("HEX"===n){if(0!==t.length%2)return"TEXT MUST BE IN BYTE INCREMENTS";this.strBinLen=t.length*4,this.strToHash=i(t)}else{if("ASCII"!==n&&"undefined"!=typeof n)return"UNKNOWN TEXT INPUT TYPE";this.strBinLen=t.length*e,this.strToHash=r(t)}};return b.prototype={getHash:function(e,t){var n=null,r=this.strToHash.slice();switch(t){case"HEX":n=s;break;case"B64":n=o;break;default:return"FORMAT NOT RECOGNIZED"}switch(e){case"SHA-224":return null===this.sha224&&(this.sha224=y(r,this.strBinLen,e)),n(this.sha224);case"SHA-256":return null===this.sha256&&(this.sha256=y(r,this.strBinLen,e)),n(this.sha256);default:return"HASH NOT RECOGNIZED"}},getHMAC:function(t,n,u,a){var f,l,c,h,p,d,v=[],m=[];switch(a){case"HEX":f=s;break;case"B64":f=o;break;default:return"FORMAT NOT RECOGNIZED"}switch(u){case"SHA-224":d=224;break;case"SHA-256":d=256;break;default:return"HASH NOT RECOGNIZED"}if("HEX"===n){if(0!==t.length%2)return"KEY MUST BE IN BYTE INCREMENTS";l=i(t),p=t.length*4}else{if("ASCII"!==n)return"UNKNOWN KEY INPUT TYPE";l=r(t),p=t.length*e}64<p/8?(l=y(l,p,u),l[15]&=4294967040):64>p/8&&(l[15]&=4294967040);for(c=0;c<=15;c+=1)v[c]=l[c]^909522486,m[c]=l[c]^1549556828;return h=y(v.concat(this.strToHash),512+this.strBinLen,u),h=y(m.concat(h),512+d,u),f(h)}},b}),define("Z2l7EkM9fBMD6CDNrF10FVKH9lTCDaUcSjjB1q/TdgE=",["JoXWj40Y1mozCrRKdElU4QZ2XbCHKUve+HAQqeLSgQ8="],function(e){"use strict";return function(t){var n=new e(t,"ASCII");return n.getHash("SHA-256","B64")}}),define("aa1pimqD6igbBAjIMosAzz91SOAoYOjfpQNmoIqX0iE=",["Z2l7EkM9fBMD6CDNrF10FVKH9lTCDaUcSjjB1q/TdgE=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM="],function(e,t){"use strict";var n;return function(r,i,s){return n||(n={require:function(n){var o={libraryManager:i?r:undefined,hashModuleId:e,loadingAllowed:i,libraryUrl:s};return t.ModuleLoader.require(n,null,o)}}),n}}),define("hil8xb1IimJN9xLR8nPd5HFdl6J0s1wfcAnkDTTWJEw=",["UDKOzFuhCFMgpnBYA5n7LsFCrO6xRaePEI2Hi2gAn6I=","bFOXtEjmXJ1lK4AExMZNtVOOBi6q4Gj93XmA7N0camQ=","rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s){"use strict";var o=0,u=function(){return o++},a=function(e){return r.jsonCoder.decode(e)},f=function(e,t){var n=s.bind(r.createImageLoader,null,e),i=s.bind(r.createSoundLoader,null,t),o=s.bind(r.createTextLoader,null,a);return{jpeg:n,png:n,mp3:i,wav:i,ogg:i,json:o}},l=function(e,t,n){return t==="auto"&&(s.isObject(n)?t=s.last(n.libraryPath.split(".")):t=s.last(n.split("."))),e[t]},c=function(e,t,n,r,i){return{id:e,libraryPaths:t,numCompleted:0,name:r.name,next:i,type:r.type?r.type:"auto",libraryUrl:n,omitCache:!!r.omitCache,onLoadingCompleted:r.onLoadingCompleted,isMetaDataLoad:r.isMetaDataLoad!==undefined?r.isMetaDataLoad:!0}},h=function(t,n,r,o){o.numCompleted++;var u=o.libraryPaths,a=u.length,f=o.numCompleted/a,l=o.name;t.publish([i.RESOURCE_PROGRESS,l],[f,o.numCompleted,a]);if(o.numCompleted===a){var c=s.reduce(u,function(e,t){return s.isObject(t)?e[t.libraryPath]=n[t.libraryPath]:e[t]=n[t],e},{});o.isMetaDataLoad&&e(c),o.onLoadingCompleted&&o.onLoadingCompleted(c),delete r[o.id],l&&t.publish([i.RESOURCE_LOADING_COMPLETED,l],[c]),o.next&&o.next()}},p=function(e,t,n,r,i,s){if(!s)throw'Error: Resource "'+i+'" from loading process "'+r.id+'" is undefined or empty on loading completed.';t[i]=s,h(e,t,n,r)},d=function(e,t,n,r,i){throw'Error: Loading resource "'+i+'" failed.'},v=function(e,t,n,r,i){throw'Error: Loading resource "'+i+'" timed out.'},m=function(e,t,n,r,i){var o=i.omitCache,u=i.libraryPaths;for(var a=0,f=u.length;a<f;a++){var c=u[a],h;s.isObject(c)?(c=u[a].libraryPath,h=u[a].libraryPathUrlUsedForLoading):h=c;if(!o){var m=e[c];if(m){p(t,e,r,i,c,m);continue}}var g=l(n,i.type,c);if(!g)throw'Error: Unable to load resource of type "'+i.type+'".';var y=g(i.libraryUrl,h,s.bind(p,null,t,e,r,i,c),s.bind(d,null,t,e,r,i,c),s.bind(v,null,t,e,r,i,c));if(!y)throw'Could not create a loader for resource "'+c+'".';y.start()}},g=function(e,t){this.eventManager=e,this.loadingProcesses={},this.libraryUrl=t,this.resourceTypeToLoaderFactory,this.cache={metaData:{},resource:{}}};return g.prototype={get:function(e){var t=this.cache;return t.metaData[e]||t.resource[e]},getByLibraryId:function(e){return this.get(n(e))},getMetaDataRecordsByType:function(e){return s.reduce(this.cache.metaData,function(t,n,r){return n.type===e&&(t[r]=n),t},{})},addToCache:function(t){s.extend(this.cache.metaData,t),e(this.cache.metaData)},isAvailable:function(e){var r=this.cache;for(var i=0,s=e.length,o;i<s;i++){o=r.metaData[n(e[i])];if(!o)return!1;if(o.file&&!r.resource[t(o.namespace,o.file)])return!1}return!0},free:function(){this.cache.resource={}},load:function(e,t,n){if(!this.resourceTypeToLoaderFactory)throw"Error: Library manager is not properly initialized.";if(e.length===0)throw"Error: No library paths provided.";var r=u(),i=c(r,e,this.libraryUrl,t||{},n);return this.loadingProcesses[r]=i,m(i.isMetaDataLoad?this.cache.metaData:this.cache.resource,this.eventManager,this.resourceTypeToLoaderFactory,this.loadingProcesses,i),r},init:function(e,t){this.resourceTypeToLoaderFactory=f(t,e)}},g}),define("5DXS8p6p/6XPSVo/sZHjU842Rl9MoWWPVu5I+ZXlneQ=",["6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=[],i=[],s={},o={},u={},a=function(e){r.push(e);var t=e.type,n=t==="keyDown",a=t==="keyUp";if(n||a){var l=e.keyCode,c=s[l]===n;if(c)return;s[l]=n;var h=f(u,l,n);h&&i.push(h)}var p=o[t];if(p)for(var d=0,v=p.length;d<v;d++)p[d].call(null,e)},f=function(e,t,n){for(var r in e){var i=e[r];for(var s in i)if(s==t){var o=i[s];return(n?"start":"stop")+o.substr(0,1).toUpperCase()+o.substr(1,o.length)}}},l=function(e,t){return{type:e,keyCode:t}},c=function(t,n){this.nativeInput=e.createInput(t,n)};return c.prototype={init:function(){this.nativeInput.setInputEventListener(a)},destroy:function(){this.nativeInput.removeInputEventListener()},getInputEvents:function(){return r},clearInputEvents:function(){r.length=0},isKeyPressed:function(e){return s[e]},injectKeyEvent:function(e,t){a(l(e,t))},addListener:function(e,t){var n=o[e]||(o[e]=[]);n.push(t)},removeListener:function(e,t){var r=o[e];if(!r)return;o[e]=n.filter(r,function(e){return e===t})},addInputContext:function(e,t){u[e]=t},removeInputContext:function(e){delete u[e]},getCommands:function(){return i},clearCommands:function(){i.length=0},KEY:t},c}),define("+I3msXuDoYiTvtdmx0dXf3YC2HxHEmfwkQ6Qjzj9l8E=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";function t(){return{subNodes:{},elements:[]}}function n(t){return t?e.reduce(t.subNodes,function(e,t){return e.concat(n(t))},t.elements):[]}function r(t,n,r){return e.reduce(n,function(e,t){return e===undefined?undefined:(r!==undefined&&r(e,t),e.subNodes[t])},t)}return{create:function(){return t()},add:function(e,n,i){var s=r(e,n,function(e,n){e.subNodes.hasOwnProperty(n)||(e.subNodes[n]=t())});s.elements.push(i)},remove:function(t,n,i){var s=r(t,n);i===undefined?s.elements.length=0:s.elements=e.filter(s.elements,function(e){return e!==i})},get:function(e,t){return n(r(e,t))}}}),define("6LWBMS9D/d2r0J5+eQvSlL9x6G8sa+U+ODk4ht82dGw=",["+I3msXuDoYiTvtdmx0dXf3YC2HxHEmfwkQ6Qjzj9l8E=","AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";function o(){this.subscribers=e.create()}var r=function(e){return n.isArray(e)?e:[e]},i=!1,s=function(e,t){var r=t.callback,i=n.after(t.events.length,function(){r()});n.each(t.events,function(t){var n=function(r){t.subscriber&&t.subscriber(r),e.unsubscribe(t.scope,n),i()};e.subscribe(t.scope,n)})};return o.prototype={subscribe:function(n,i){var s=r(n);e.add(this.subscribers,s,i),this.publish(t.SUBSCRIBE,[s,i])},unsubscribe:function(n,i){var s=r(n);e.remove(this.subscribers,s,i),this.publish(t.UNSUBSCRIBE,[s,i])},unsubscribeAll:function(n){var i=r(n);e.remove(this.subscribers,i),this.publish(t.UNSUBSCRIBE,[i])},publish:function(t,i){var s=e.get(this.subscribers,r(t)),o=r(i);return n.each(s,function(e){e.apply(undefined,o)}),!0},waitFor:function(e,t){return i={events:[{scope:r(e),subscriber:t}]},this},and:function(e,t){if(!i)throw'A call to the method "and" must be chained to a previous call to "waitFor".';return i.events.push({scope:r(e),subscriber:t}),this},resume:function(e){if(!i)throw'A call to the method "resume" must be chained to a previous call to "waitFor" or "and".';i.callback=e,s(this,i),i=!1},EVENT:t},o}),define("GSV7+xwIB59dg5QN6WD1h1rWzVc9OwabH1SWt8Pk1c4=",["z7TX6BsmUcv0nH/bqr0j7VkT7tQUPxwYZT67+lzEXGk=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s){"use strict";var o=function(t,n){return n?e(t,n,!0):t},u=function(e,t){return s.contains(e,t)?t:!1},a=function(e,t){return s.isArray(t)&&t.length===2?(t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),t):!1},f=s.extend({screenMode:{validValues:["fill","fit","fixed"],configurable:!0,extractor:u},screenSize:{configurable:!0,extractor:a},currentScreenSize:{configurable:!1},id:{configurable:!0},mode:{validValues:["deployed","development_embedded","development_standalone"],configurable:!0},quadTreeSize:{configurable:!0},projectId:{configurable:!0},supportedLanguages:{configurable:!0},defaultLanguage:{configurable:!0},currentLanguage:{configurable:!0},loadingScene:{configurable:!0}},r.configurationOptions.validOptions),l=s.extend({screenMode:"fixed",screenSize:[300,200],currentScreenSize:[300,200],quadTreeSize:1048576,projectId:"",id:"spell","platform.id":r.platformDetails.getPlatform(),"platform.hasPlentyRAM":r.platformDetails.hasPlentyRAM()},r.configurationOptions.defaultOptions),c=function(e,t,n,r,i){var s=n[r];if(s){if(!s.configurable)return e;var o=s.extractor?s.extractor(s.validValues,i):i;e[r]=o===undefined?s.extractor?s.extractor(s.validValues,t[r]):o:o}else e[r]=i},h=function(e){this.config=l,this.eventManager=e,e.subscribe([i.AVAILABLE_SCREEN_SIZE_CHANGED],s.bind(function(n){var r=this.config,s=r.screenMode||"fixed",u=r.screenAspectRatio>0,a=r.screenSize;if(u)r.currentScreenSize=o(n,r.screenAspectRatio);else if(s==="fit"){var f=[t.clamp(n[0],0,a[0]),t.clamp(n[1],0,a[1])];r.currentScreenSize=o(f,a[0]/a[1])}else if(s==="fixed")r.currentScreenSize=a;else{if(s!=="fill")throw"Error: Screen mode '"+s+"' is not supported.";r.currentScreenSize=[n[0],n[1]]}e.publish(i.SCREEN_RESIZE,[r.currentScreenSize])},this))};return h.prototype={setValue:function(e,t){var o=this.config;if(e==="defaultLanguage")o.currentLanguage=t;else if(e==="currentLanguage"){s.contains(o.supportedLanguages,t)&&(o.currentLanguage=t);return}c(o,l,f,e,t),e==="screenAspectRatio"||e==="screenMode"?this.eventManager.publish(i.AVAILABLE_SCREEN_SIZE_CHANGED,[r.getAvailableScreenSize(this.getValue("id"))]):e==="screenSize"&&n.copy(o.currentScreenSize,t)},getValue:function(e){return this.config[e]},setConfig:function(e){for(var t in e){if(t==="supportedLanguages"||t==="defaultLanguage"||t==="currentLanguage")continue;this.setValue(t,e[t])}e.supportedLanguages&&this.setValue("supportedLanguages",e.supportedLanguages),e.defaultLanguage&&this.setValue("defaultLanguage",e.defaultLanguage),e.currentLanguage&&this.setValue("currentLanguage",e.currentLanguage)}},h}),define("Qpj+fizmi2T5BUE0zCUFDzTWLiVETxC7mbwnh7FRpaU=",function(){"use strict";var e=function(e){this.assets={},this.libraryManager=e};return e.prototype={add:function(e,t){this.assets[e]=t},get:function(e){return this.assets[e]},getLibraryIdByResourceId:function(e){var t=this.assets,n=[];for(var r in t){var i=t[r];i.resourceId&&i.resourceId===e&&n.push(r.slice(r.indexOf(":")+1))}return n},has:function(e){return!!this.assets[e]},injectResources:function(e){var t=this.assets,n=this.libraryManager;for(var r in t){var i=t[r],s=i.resourceId;if(!s)continue;if(!e[s])continue;var o=n.get(s);if(!o)return;i.resource=o}},free:function(){this.assets={}}},e}),define("rWsBG/X7JSJQ7oY8QeDfmNOcjk/hz9VLciawllnhB8I=",["x+aoL4OeksmAAgV8+dHtcYBBr7EChbSqGxZQUUVVR4A="],function(e){"use strict";var t=function(){this.keys=[],this.values=[]};return t.prototype={add:function(e,t){var n=this.keys,r=this.values,i=n.indexOf(e);return i===-1?(n.push(e),r.push(t)):r[i]=t,this},insert:function(e,t,n){var r=this.keys.indexOf(e);return r!==-1&&this.removeByIndex(r),this.keys.splice(n,0,e),this.values.splice(n,0,t),this},getByIndex:function(e){return this.values[e]},getByKey:function(e){return this.getByIndex(this.keys.indexOf(e))},hasKey:function(e){return this.keys.indexOf(e)!==-1},removeByIndex:function(t){return e(this.keys,t),e(this.values,t),this},removeByKey:function(e){return this.removeByIndex(this.keys.indexOf(e)),this},each:function(e){var t=this.keys,n=this.values;for(var r=0,i=t.length;r<i;r++){var s=t[r],o=n[r];e(o,s)}return this},clear:function(){return this.keys.length=0,this.values.length=0,this},size:function(){return this.keys.length}},t}),define("JSVeahu1i9Ml9XJZopPKwXtCNWIdjrstPzeqwZTBUpU=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(n){return e.reduce(n,function(n,r){return n.push(r),e.has(r,"children")?n.concat(t(r.children)):n},[])};return function(n){var r=e.isArray(n)?n:[n];return t(r)}}),define("h2aMiZCagVvEo7aSt+UFK1OYzb19iS+Je86Iito/sUs=",["AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","kuo4CZ9KQ512nkgHgkhEQw7SM9XaLIpsYBcjXhzKG0Y=","JSVeahu1i9Ml9XJZopPKwXtCNWIdjrstPzeqwZTBUpU=","rWsBG/X7JSJQ7oY8QeDfmNOcjk/hz9VLciawllnhB8I=","TpUPENVsbpktS1yxz8LZH4ftV7yQhfNp9dpn/zLcys4=","d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s=","kWM1PJpBvsvnYJoun0Mv1hu480p1CKPXc+pLuoDzXiA=","v8fOdhNCtMEZStOrNxspT+wYpcqnI29sSZZku+1iaIw=","VARx5D0ga68cy8NlL0048TNzV6HQOz8e4ZC9Q2rlpD4=","RHForCY775HrCxRbFeVX9Spz8YmenJsOpg1HHlNx44o=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){"use strict";var d=t.CAMERA_COMPONENT_ID,v=new l,m=function(e,t,n,r,i){var s=e.values;for(var o=0,u=s.length;o<u;o++){v.start();var a=s[o];(!r||a.config.active)&&a.prototype[t].apply(a,i),n.updateNode(e.keys[o],v.stop())}},g=function(e,t,n,r,s,o){var u=p.reduce(r.input,function(e,r){var i=t.getComponentMapById(r.componentId);if(!i)throw"Error: No component list for component template id '"+r.componentId+"' available.";if(r.name==="config")throw"Error: The system '"+n+"' uses the reserved keyword 'config' as a local alias for its input.";return e[r.name]=i,e},{config:o}),f=e.moduleLoader.require(a(n));return i(f,[e],u)},y=function(e){return p.reduce(e,function(e,t){return e[t.name]=f(t["default"]),e},{})},b=function(e,t,n,i,s){return p.reduce(i,function(r,i){var u=i.id,a=n.get(o(u));if(!a)throw"Error: Could not get template for id '"+u+"'.";return r.add(u,g(e,t,u,a,s,p.defaults(f(i.config),y(a.config))))},new r)},w=function(e){return!0},E=function(e,t){for(var n in e){var r=e[n];if(r.hasKey(t))return n}},S=function(e,t,n){for(var r=0,i=t.length;r<i;r++){var s=t[r];e.addNode(s.id,n)}},x=function(e,t,n,r,i,s,o){this.spell=e,this.entityManager=t,this.libraryManager=n,this.statisticsManager=r,this.isModeDevelopment=i,this.executionGroups={render:null,update:null},this.sceneConfig=s,this.initialConfig=o,this.script=null};return x.prototype={render:function(e,t){m(this.executionGroups.render,"process",this.statisticsManager,!0,[this.spell,e,t])},update:function(e,t){m(this.executionGroups.update,"process",this.statisticsManager,!0,[this.spell,e,t])},init:function(){var e=this.spell,t=this.sceneConfig,n=this.initialConfig;this.statisticsManager.init();if(!w(t)){e.logger.error('Could not start scene "'+t.name+'" because no camera entity was found. A scene must have at least one active camera entity.');return}var r=this.entityManager,i=this.libraryManager,o=this.executionGroups;o.render=b(e,r,i,t.systems.render,this.isModeDevelopment),o.update=b(e,r,i,t.systems.update,this.isModeDevelopment),S(this.statisticsManager,t.systems.render,"render"),S(this.statisticsManager,t.systems.update,"update"),m(o.render,"init",this.statisticsManager,!1,[e,t,n]),m(o.update,"init",this.statisticsManager,!1,[e,t,n]);var u=a(s(t.namespace,t.name));this.script=e.moduleLoader.require(u),this.script.init(e,t,n),m(o.render,"activate",this.statisticsManager,!0,[e,t,n]),m(o.update,"activate",this.statisticsManager,!0,[e,t,n])},destroy:function(){var e=this.executionGroups,t=this.spell,n=this.sceneConfig;m(e.render,"deactivate",this.statisticsManager,!0,[t,n]),m(e.update,"deactivate",this.statisticsManager,!0,[t,n]),this.script.destroy(this.spell,n),m(e.render,"destroy",this.statisticsManager,!1,[t,n]),m(e.update,"destroy",this.statisticsManager,!1,[t,n])},restartSystem:function(e,t,n){var r=this.executionGroups;t||(t=E(r,e));var i=r[t];if(!i)return;var s=i.getByKey(e);if(!s)return;n||(n=s.config);var u=this.spell;s.config.active&&s.prototype.deactivate.call(s,u),s.prototype.destroy.call(s,u);var a=g(u,this.entityManager,e,this.libraryManager.get(o(e)),this.isModeDevelopment,n);a.prototype.init.call(a,u,this.sceneConfig,this.initialConfig),a.config.active&&a.prototype.activate.call(a,u,this.sceneConfig,this.initialConfig),i.add(e,a)},addSystem:function(e,t,n,r){var i=this.executionGroups[t];if(!i)return;var s=this.spell,a=this.isModeDevelopment,f=this.libraryManager;f.load(u([e]),undefined,function(){var t=g(s,s.entityManager,e,f.get(o(e)),a,r);t.prototype.init.call(t,s),t.config.active&&t.prototype.activate.call(t,s),i.insert(e,t,n)})},removeSystem:function(e,t){var n=this.executionGroups[t];if(!n)return;var r=this.spell,i=n.getByKey(e);i.config.active&&i.prototype.deactivate.call(i,r),i.prototype.destroy.call(i,r),n.removeByKey(e)},moveSystem:function(e,t,n,r){var i=this.executionGroups[t],s=this.executionGroups[n];if(!i||!s)return;var o=i.getByKey(e);if(!o)return;i.removeByKey(e),s.insert(e,o,r)},updateSystem:function(e,t,n){if(!n)return;var r=this.executionGroups;t||(t=E(r,e));var i=r[t];if(!i)return;var s=i.getByKey(e);if(!s)return;var o=n.active!==undefined&&s.config!==n.active;p.extend(s.config,f(n)),o&&(n.active?s.prototype.activate.call(s,this.spell,this.sceneConfig,this.initialConfig):s.prototype.deactivate.call(s,this.spell,this.sceneConfig))}},x}),define("kWM1PJpBvsvnYJoun0Mv1hu480p1CKPXc+pLuoDzXiA=",["rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";return function(n){return t.map(n,e)}}),define("MhHL0uYRQ50mDamX7ZC1uHXvJGt8/QI3z9dfvWa/w3g=",["ingT4RnRpUiJVUpqmIZzn0mb4bWOxvdCL7jVnvrEevs=","UDKOzFuhCFMgpnBYA5n7LsFCrO6xRaePEI2Hi2gAn6I=","3NNm1Xr+NiUMHZ6h4rjokfmOhn1qi0l9m+2oT/bl0aI=","+kMCuNhMJbCFFz81NxZMk0B1yxR7pTV+H67Y6qVKnvY=","kWM1PJpBvsvnYJoun0Mv1hu480p1CKPXc+pLuoDzXiA=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=function(e){return f.reduce(e,function(e,t){var n=t.type;return e[n]?e[n].push(t):e[n]=[t],e},{})},c=function(e,t){for(var n in t){var r=t[n];e[o(r.namespace,r.name)]=r}},h=function(e,t){t||(t=function(){});var n=function(e,t){this.bundles={},this.eventManager=e,this.progressCallback=t,this.progress=0,this.lastSendProgress=0,this.progressHandler=function(e,t,n,r){this.progress+=e/r;var i=s.roundToResolution(this.progress,.01);if(i<=this.lastSendProgress)return;this.lastSendProgress=i,this.progressCallback(i)}};return n.prototype={addBundle:function(e,t){var n=f.bind(this.progressHandler,this,t*.99);this.bundles[e]=n,this.eventManager.subscribe([u.RESOURCE_PROGRESS,e],n)},complete:function(){this.progressCallback(1)},destroy:function(){var e=this.bundles,t=this.eventManager;for(var n in e){var r=e[n];t.unsubscribe([u.RESOURCE_PROGRESS,n],r)}}},new n(e,t)};return function(t,r,s,o){var a=t.assetManager,p=t.configurationManager,d=t.eventManager,v=t.libraryManager,m=t.resources,g=t.entityManager,y=r+"-library",b=r+"-resources",w=h(d,o);w.addBundle(r,.1),w.addBundle(y,.1),w.addBundle(b,.8),d.waitFor([u.RESOURCE_LOADING_COMPLETED,r],function(e){c(t.scenes,e)}).resume(function(){d.waitFor([u.RESOURCE_LOADING_COMPLETED,y],function(r){var i=l(r);e(a,i.asset),v.load(n(p,i.asset),{name:b,isMetaDataLoad:!1}),f.each(i.component,f.bind(g.registerComponent,g)),c(t.scenes,i.scene)}).and([u.RESOURCE_LOADING_COMPLETED,b],f.bind(a.injectResources,a)).resume(function(){w.complete(),w.destroy(),d.unsubscribeAll([u.RESOURCE_LOADING_COMPLETED,r]),d.unsubscribeAll([u.RESOURCE_LOADING_COMPLETED,y]),d.unsubscribeAll([u.RESOURCE_LOADING_COMPLETED,b]),s()});var o=t.scenes[r];v.load(i(o.libraryIds),{name:y})}),v.load(i([r]),{name:r})}}),define("OINaBjfKqIjxReAWCGJlr0Uba7I0iYH8VHNPNtHxuOA=",["MhHL0uYRQ50mDamX7ZC1uHXvJGt8/QI3z9dfvWa/w3g=","h2aMiZCagVvEo7aSt+UFK1OYzb19iS+Je86Iito/sUs=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(e,r,i,s,o,u,a){var f=e.scenes[u];if(!f)throw'Error: Could not find scene configuration for scene "'+u+'".';var l=new t(e,r,i,s,o,f,a);l.init(),this.mainLoop.setRenderCallback(n.bind(l.render,l)),this.mainLoop.setUpdateCallback(n.bind(l.update,l)),this.activeScene=l,this.loadingPending=!1,this.processCmdQueue(),this.sendMessageToEditor&&this.sendMessageToEditor("spelled.debug.application.sceneStarted",u)},i=function(t,i,s){var o=s,u=function(){var u=this.spell;this.activeScene&&(this.mainLoop.setRenderCallback(),this.mainLoop.setUpdateCallback(),this.activeScene.destroy(),this.entityManager.init(),this.activeScene=undefined,o&&!u.configurationManager.getValue("platform.hasPlentyRAM")&&(u.assetManager.free(),u.libraryManager.free()),u.statisticsManager.reset());var a=this.sendMessageToEditor?n.bind(this.sendMessageToEditor,null,"spelled.loadingProgress"):undefined;this.cmdQueue=[],this.loadingPending=!0;var f=u.scenes[t];if(f&&u.libraryManager.isAvailable(f.libraryIds))r.call(this,u,this.entityManager,this.libraryManager,this.statisticsManager,this.isModeDevelopment,t,i);else{var l=u.configurationManager.getValue("loadingScene");s&&l?e(u,l,n.bind(r,this,u,this.entityManager,this.libraryManager,this.statisticsManager,this.isModeDevelopment,l,{startSceneId:t,initialConfig:i}),a):e(u,t,n.bind(r,this,u,this.entityManager,this.libraryManager,this.statisticsManager,this.isModeDevelopment,t,i),a)}};this.mainLoop.setPreNextFrame(n.bind(u,this))},s=function(e,t,n,r,i,s,o){this.activeScene,this.entityManager=t,this.mainLoop=i,this.sendMessageToEditor=s,this.spell=e,this.statisticsManager=n,this.libraryManager=r,this.isModeDevelopment=o,this.cmdQueue=[],this.loadingPending=!1};return s.prototype={changeScene:function(e,t,n){this.isModeDevelopment?this.spell.sendMessageToEditor("spelled.debug.application.startScene",{startSceneId:e,initialConfig:t,showLoadingScene:n}):i.call(this,e,t,n)},startScene:i,processCmdQueue:function(){if(this.loadingPending)return;var e=this.cmdQueue;for(var t=0;t<e.length;t++){var n=e[t];this.activeScene[n.fn].apply(this.activeScene,n.args)}e.length=0},addSystem:function(e,t,n,r){this.cmdQueue.push({fn:"addSystem",args:[e,t,n,r]}),this.processCmdQueue()},moveSystem:function(e,t,n,r){this.cmdQueue.push({fn:"moveSystem",args:[e,t,n,r]}),this.processCmdQueue()},removeSystem:function(e,t){this.cmdQueue.push({fn:"removeSystem",args:[e,t]}),this.processCmdQueue()},restartSystem:function(e,t,n){this.cmdQueue.push({fn:"restartSystem",args:[e,t,n]}),this.processCmdQueue()},updateSystem:function(e,t,n){this.cmdQueue.push({fn:"updateSystem",args:[e,t,n]}),this.processCmdQueue()}},s}),define("B04e4VhXopyRLZ1CJe/tBp5ZUblS2gzQCcRU/qk54rs=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(t,n){var r=n.attributes;for(var i=0,s=r.length,o;i<s;i++)o=r[i],t[o.name]=e.clone(o["default"]);return t}}),define("Ip+nZkdeOq37FrXp3GzfI6EqpDjAbF4/VaVssMDAUJQ=",["VARx5D0ga68cy8NlL0048TNzV6HQOz8e4ZC9Q2rlpD4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(n,r){for(var i in r)n[i]=t.extend(n[i]||{},e(r[i]));return n};return n}),define("VARx5D0ga68cy8NlL0048TNzV6HQOz8e4ZC9Q2rlpD4=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function t(n){var r=e.isArray(n);if(r||e.isObject(n)){var i=r?[]:{};return e.each(n,function(e,n){i[n]=t(e)}),i}return n}}),define("TpUPENVsbpktS1yxz8LZH4ftV7yQhfNp9dpn/zLcys4=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t="The first argument for create must be a constructor. You passed in ";return function(n,r,i){if(n.prototype===undefined)throw t+n;var s={};!!i&&e.isObject(i)&&e.extend(s,i),s.prototype=n.prototype;var o=n.apply(s,r);return o||s}}),define("x+aoL4OeksmAAgV8+dHtcYBBr7EChbSqGxZQUUVVR4A=",function(){"use strict";var e=function(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r)};return e}),define("kuo4CZ9KQ512nkgHgkhEQw7SM9XaLIpsYBcjXhzKG0Y=",function(){"use strict";return{ROOT_COMPONENT_ID:"spell.component.entityComposite.root",PARENT_COMPONENT_ID:"spell.component.entityComposite.parent",CHILDREN_COMPONENT_ID:"spell.component.entityComposite.children",METADATA_COMPONENT_ID:"spell.component.entityMetaData",EVENT_HANDLERS_COMPONENT_ID:"spell.component.eventHandlers",TRANSFORM_COMPONENT_ID:"spell.component.2d.transform",TEXTURE_MATRIX_COMPONENT_ID:"spell.component.2d.graphics.textureMatrix",CAMERA_COMPONENT_ID:"spell.component.2d.graphics.camera",STATIC_APPEARANCE_COMPONENT_ID:"spell.component.2d.graphics.appearance",TEXT_APPEARANCE_COMPONENT_ID:"spell.component.2d.graphics.textAppearance",ANIMATED_APPEARANCE_COMPONENT_ID:"spell.component.2d.graphics.animatedAppearance",QUAD_GEOMETRY_COMPONENT_ID:"spell.component.2d.graphics.geometry.quad",TILEMAP_COMPONENT_ID:"spell.component.2d.graphics.tilemap",PARALLAX_COMPONENT_ID:"spell.component.2d.graphics.parallax",PHYSICS_BODY_COMPONENT_ID:"spell.component.physics.body",PHYSICS_FIXTURE_COMPONENT_ID:"spell.component.physics.fixture",PHYSICS_BOX_SHAPE_COMPONENT_ID:"spell.component.physics.shape.box",PHYSICS_CIRCLE_SHAPE_COMPONENT_ID:"spell.component.physics.shape.circle",PHYSICS_CONVEX_POLYGON_SHAPE_COMPONENT_ID:"spell.component.physics.shape.convexPolygon",PHYSICS_JNRPLAYER_SHAPE_COMPONENT_ID:"spell.component.physics.shape.jumpAndRunPlayer",KEY_FRAME_ANIMATION_COMPONENT_ID:"spell.component.animation.keyFrameAnimation",SOUND_EMITTER_COMPONENT_ID:"spell.component.audio.soundEmitter",VISUAL_OBJECT_COMPONENT_ID:"spell.component.visualObject",CONTROLLABLE_COMPONENT_ID:"spell.component.controllable"}}),define("pzW6zJkIpKONYaZfQ3DLzd3v+2inNEBdcFLJQpiZpEw=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(e,n){var r=e.length,i;for(var s=0;s<r;s++){var o=e[s];i=n(o);if(i)return i;var u=o.children;if(u&&u.length>0)return t(u,n)}};return function(n,r){var i=e.isArray(n)?n:[n];return t(i,r)}}),define("dXBfcPX/k2r8hX6RIGFi+TdKQKneuUJZCdF4LCs94T4=",function(){"use strict";return function(e){var t=e.children;if(!t)return!1;var n={};for(var r=0,i=t.length;r<i;r++){var s=t[r].name;if(s){if(!!n[s])return s;n[s]=!0}}return!1}}),define("PbOCcvOCWKv40wXBycm4YMYdhAZoomihBhjVpxWEQTk=",["dXBfcPX/k2r8hX6RIGFi+TdKQKneuUJZCdF4LCs94T4=","pzW6zJkIpKONYaZfQ3DLzd3v+2inNEBdcFLJQpiZpEw=","DL2XO5bR2mezFB5wDHhPp+WUMECQNrIMAg+5DYokByc=","kuo4CZ9KQ512nkgHgkhEQw7SM9XaLIpsYBcjXhzKG0Y=","x+aoL4OeksmAAgV8+dHtcYBBr7EChbSqGxZQUUVVR4A=","TpUPENVsbpktS1yxz8LZH4ftV7yQhfNp9dpn/zLcys4=","d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","v8fOdhNCtMEZStOrNxspT+wYpcqnI29sSZZku+1iaIw=","VARx5D0ga68cy8NlL0048TNzV6HQOz8e4ZC9Q2rlpD4=","AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","Ip+nZkdeOq37FrXp3GzfI6EqpDjAbF4/VaVssMDAUJQ=","hJb+mSFyVabGetH1ke8dX63PPYPjsoFy4ea4w/GvIxQ=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","B04e4VhXopyRLZ1CJe/tBp5ZUblS2gzQCcRU/qk54rs=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){"use strict";var y=1,b=h.createComponentType,w=r.ROOT_COMPONENT_ID,E=r.CHILDREN_COMPONENT_ID,S=r.PARENT_COMPONENT_ID,x=r.METADATA_COMPONENT_ID,T=r.TRANSFORM_COMPONENT_ID,N=r.TEXTURE_MATRIX_COMPONENT_ID,C=r.EVENT_HANDLERS_COMPONENT_ID,k=r.STATIC_APPEARANCE_COMPONENT_ID,L=r.ANIMATED_APPEARANCE_COMPONENT_ID,A=r.QUAD_GEOMETRY_COMPONENT_ID,O=r.TILEMAP_COMPONENT_ID,M=r.VISUAL_OBJECT_COMPONENT_ID,_=function(e){var t=g.reduce(e.attributes,function(e,t){var n=t.name;return e[n]=e[n]?e[n]+1:1,e},{});return!g.any(t,function(e){return e>1})},D=function(e){if(!e)return""+y++;var t=parseInt(e);return g.isNaN(t)?e:(y=Math.max(t+1,y),""+t)},P=function(e,t,n,r,i){var s=e[T],o=s[i];if(!o)return;var u=e[S],a=e[E],f=a[i],l=i,c=o.localMatrix,h=o.worldMatrix,p,d;v.identity(c),v.translate(c,c,o.translation),v.rotate(c,c,o.rotation),v.scale(c,c,o.scale);while(p=u[l]){l=p.id;var m=s[l];if(m){d=m.worldMatrix;break}}d?v.multiply(h,d,c):v.copy(h,c),o.worldTranslation[0]=h[6],o.worldTranslation[1]=h[7],r&&$(n,e,i);if(f){var g=f.ids;for(var y=0,b=g.length;y<b;y++)P(e,t,n,r,g[y])}},H=function(e){var t=e.matrix,n=e.translation,r=e.scale;v.identity(t),v.translate(t,t,n),v.scale(t,t,r),e.isIdentity=n[0]===0&&n[1]===0&&r[0]===1&&r[1]===1},B=function(e,t,n,r){var i=t[r],s=1;i&&(s=i.opacity*n,i.worldOpacity=s);var o=e[r];if(o){var u=o.ids;for(var a=0,f=u.length;a<f;a++)B(e,t,s,u[a])}},j=function(e,t){var n=e[S][t],r=e[M],i=1;if(n){var s=r[n.id];s&&(i=s.worldOpacity)}B(e[E],r,i,t)},F=function(e,t,n,r){var i;for(var s in r){i=r[s];if(e[s][n])throw"Error: Adding a component to the entity with id '"+n+"' failed because the entity already has a component named '"+s+"'. Check with hasComponent first if this entity already has this component.";e[s][n]=i}for(var s in r)i=r[s],t.publish([f.COMPONENT_CREATED,s],[i,n])},I=function(e,t){for(var n in e){var r=e[n];if(r[t])return!0}return!1},q=function(e,t,n,r,i){var s=t[E][r],o=t[S][r],u=!0;if(o){var a=t[E][o.id];if(a){var l=a.ids;l.splice(l.indexOf(r),1)}}if(i)delete t[i][r],I(t,r)&&(u=!1),i===M&&n.remove(r);else{var c=!!t[M][r];for(var h in t){var p=t[h];p[r]&&delete p[r]}c&&n.remove(r)}if(u){e.publish(f.ENTITY_DESTROYED,r);if(s){var d=s.ids;for(var v=0,m=d.length;v<m;v++)q(e,t,n,d[v])}}},R=function(e,t){return g.reduce(t,function(e,t){var n=g.find(e,function(e){return t.name===e.name});return n?(n.children=U(n.children,t.children),n.id=t.id,l(n.config,t.config)):e.push(t),e},a(e))},U=function(e,t){if(!t||t.length===0)return t;if(!e||e.length===0)return t;var n=a(e);for(var r=0;r<n.length;r++){var i=n[r],s=g.find(t,function(e){return e.name===i.name});if(!s)continue;l(i.config,s.config),s.id&&(i.id=s.id)}return n},z=function(e,t,n){var r=e[S],i=e[E],s=i[n];s&&s.ids.push(t),r[t]={id:n}},W=function(e,t,n){for(var r in e){var s=e[r],o=g.indexOf(s.ids,t);if(o!==-1){i(s.ids,o);break}}},X=function(e,t,n){if(t===n)return;var r=e[w],i=e[E],s=!!r[t];if(s&&!n)return;n&&(W(i,t,n),z(e,t,n),s&&delete r[t]),!s&&!n&&(r[t]={},W(i,t,n))},V=function(e,t,n,r){var i=t[M][r];if(!i||i.pass==="ui"||i.pass==="background")return;var s=t[E][r],o=t[S][r],u=t[T][r];e.insert(u.worldTranslation,n,{id:r,parent:o?o.id:0,children:s?s.ids:undefined,layer:i?i.layer:0},r)},$=function(e,t,n){e.remove(n),V(e,t,ot(t,n),n)},J=function(n,r){if(!r)return;var i=g.isString(r)?r:r.entityTemplateId,s={children:r.children||[],config:r.config||{},id:r.id?r.id:undefined,parentId:r.parentId,name:r.name||"",entityTemplateId:i},o=t(s,e);if(o)throw'Error: The entity configuration contains the ambiguous sibling name "'+o+'". Entity siblings must have unique names.';if(i){var u=n.getByLibraryId(i);if(!u)throw"Error: Unknown entity template '"+i+"'. Could not create entity.";s.children=R(u.children,s.children)}return s},K=function(e,t,n,r,i){return t&&!n&&(e[w]={}),n&&(e[S]={id:n}),e[x]={name:r,entityTemplateId:i},e},Q=function(e,t,n,r){var i=e[x];for(var s=0,o,u=t.length;s<u;s++){o=t[s];if(n!=o&&i[o].name===r)return!0}return!1},G=function(e,t,n,r){var i=b(t,e,r);return p(i||{},n)},Y=function(e,t){return t===undefined?e:g.extend(e,t)},Z=function(e){return!!g.find(e,function(e){var t=e.type;return g.isString(t)?e.type.indexOf("assetId:")===0:!1})},et=function(e,t,n){var r=n.assetId;if(!r)return;var i=e.get(r);if(!i&&c.startsWith(r,"script:")){var s=r.substr(7);i=t.require(u(s))}if(!i)throw"Error: Could not resolve asset id '"+r+"' to asset instance. Please make sure that the asset id is valid.";return n.asset=i,n},tt=function(e,t,n,r,i,s,o,u){u===undefined&&(u=!0);var f=l(o?a(o.config):{},i);return g.each(f,function(i,o){var a=n.getByLibraryId(o);if(!a)throw'Error: Could not find component definition "'+o+s?'" referenced in entity template "'+s+'".':'".';var l=Y(G(e,r,a,o),i);f[o]=Z(a.attributes)&&u?et(t,r,l):l}),f},nt=function(e,t,n,r,i,s){var o=i?n.getByLibraryId(i):undefined;return tt(e,t,n,r,s,i,o)},rt=function(e,t,n,r,i,s,o,u,a){u=J(r,u);if(!u)throw"Error: Supplied invalid arguments.";var l=u.entityTemplateId,c=u.config||{},h=u.parentId;if(!l&&!c)throw"Error: Supplied invalid arguments.";a=a===!0||a===undefined&&!h;var p=D(u.id);K(c,a,h,u.name,l);var d=nt(e,t,r,i,l,c||{});F(s,n,p,d),P(s,n,o,!1,p);var v=s[N][p];v&&H(v);var m=g.map(u.children,function(u){return u.parentId=p,rt(e,t,n,r,i,s,o,u,!1)}),y={};y[E]={ids:m},F(s,n,p,y);if(u.name){var b;if(a)b=g.keys(s[w]);else{var S=s[E][h];S&&(b=S.ids)}if(b&&Q(s,b,p,u.name))throw'Error: The name "'+u.name+'" of entity '+p+" collides with one if its siblings. Entity siblings must have unique names."}return V(o,s,ot(s,p),p),g.extend(d,y),n.publish(f.ENTITY_CREATED,[p,d]),p},it=function(e,t){return g.reduce(e,function(e,n,r){var i=n[t];return i&&(e[r]=i),e},{})},st=function(e,t,n){var r=e[t],i=r?r.ids:[];for(var s=0,o=i.length;s<o;s++)st(e,i[s],n);return n.push(t),n},ot=function(e,t){var n=e[k],r=e[L],i=e[T],s=e[A],o=e[O],u=m.create();if(s&&s[t]&&s[t].dimensions)m.copy(u,s[t].dimensions);else if(n&&n[t]&&n[t].asset&&n[t].asset.resource&&n[t].asset.resource.dimensions)m.copy(u,n[t].asset.resource.dimensions);else if(r&&r[t]&&r[t].asset&&r[t].asset.frameDimensions)m.copy(u,r[t].asset.frameDimensions);else{if(!(o&&o[t]&&o[t].asset))return;m.copy(u,o[t].asset.tilemapDimensions),m.multiply(u,u,o[t].asset.spriteSheet.frameDimensions)}return i&&i[t],u},ut=function(e,t,n){g.isObject(n)||g.isArray(n)?g.extend(e[t],n):e[t]=n},at=function(e,t,n,r,i,s,o){ut(s,i,o);if(n[r]){var u=i==="assetId";u&&et(e,t,s)}},ft=function(e,t,n,r,i,s){for(var o in s)ut(i,o,s[o]);if(n[r]){var u=!!s.assetId;u&&et(e,t,i)}},lt=function(e,t,n,r,i,s){this.configurationManager=t,this.componentMaps={},this.assetManager=n,this.eventManager=r,this.libraryManager=i,this.moduleLoader=s,this.spell=e,this.spatialIndex=undefined,this.componentsWithAssets={}};return lt.prototype={createEntity:function(e){var t=rt(this.spell,this.assetManager,this.eventManager,this.libraryManager,this.moduleLoader,this.componentMaps,this.spatialIndex,e);j(this.componentMaps,t);var n=this.componentMaps[S][t];if(n){var r=n.id,i=this.componentMaps[E],s=i[r];s?(s.ids.push(t),this.eventManager.publish([f.COMPONENT_UPDATED,E],[s,t])):(s={ids:[t]},i[r]=s,this.eventManager.publish([f.COMPONENT_CREATED,E],[s,t]))}return t},createEntities:function(e){for(var t=0,n=e.length;t<n;t++)this.createEntity(e[t])},removeEntity:function(e){return e?(q(this.eventManager,this.componentMaps,this.spatialIndex,e),!0):!1},getEntityById:function(e){return it(this.componentMaps,e)},cloneEntity:function(e){var t={config:it(this.componentMaps,e)};return rt(this.spell,this.assetManager,this.eventManager,this.libraryManager,this.moduleLoader,this.componentMaps,this.spatialIndex,t)},getEntityDimensions:function(e){return ot(this.componentMaps,e)},getEntityIdsByName:function(e,t){var n=this.componentMaps[x],r=[],i=t?st(this.componentMaps[E],t,[]):g.keys(n);for(var s=0,o=i.length;s<o;s++){var u=i[s];n[u]&&n[u].name===e&&r.push(u)}return r},getEntitiesByName:function(e){var t=this.getEntityIdsByName(e,undefined),n={};for(var r=0,i=t.length;r<i;r++){var s=t[r];n[s]=this.getEntityById(s)}return n},getEntityIdsByRegion:function(e,t){return this.spatialIndex.search(e,t)},init:function(){var e=this.componentMaps,t=this.eventManager,r=this.spatialIndex;for(var i in e){var s=e[i];for(var o in s)q(t,e,r,o);e[i]={}}this.spatialIndex=new n(this.configurationManager.getValue("quadTreeSize"))},reassignEntity:function(e,t){if(!e)throw"Error: Missing entity id.";X(this.componentMaps,e,t)},hasComponent:function(e,t){var n=this.componentMaps[t];return n?!!n[e]:!1},addComponent:function(e,t,n){if(!e)throw"Error: Missing entity id.";if(!t)throw"Error: Missing component id.";var r={};r[t]=n||{},F(this.componentMaps,this.eventManager,e,nt(this.spell,this.assetManager,this.libraryManager,this.moduleLoader,null,r))},removeComponent:function(e,t){if(!e)throw"Error: Missing entity id.";q(this.eventManager,this.componentMaps,this.spatialIndex,e,t)},getComponentById:function(e,t){var n=this.componentMaps[t];return n?n[e]:undefined},getComponentsByName:function(e,t,n){var r=this.getComponentMapById(e),i=this.getEntityIdsByName(t,n);return i.length===0||!r?[]:g.pick(r,i)},updateComponent:function(e,t,n){var r=this.getComponentById(e,t);return r?(ft(this.assetManager,this.moduleLoader,this.componentsWithAssets,t,r,n),t===T?(n.translation||n.scale||n.rotation!==undefined)&&P(this.componentMaps,this.eventManager,this.spatialIndex,!0,e):t===N?(n.translation||n.scale||n.rotation)&&H(this.componentMaps[N][e]):t===M&&($(this.spatialIndex,this.componentMaps,e),j(this.componentMaps,e)),this.eventManager.publish([f.COMPONENT_UPDATED,t],[r,e]),!0):!1},updateComponentAttribute:function(e,t,n,r){var i=this.getComponentById(e,t);if(!i)return!1;var s=i[n];return s===undefined?!1:(at(this.assetManager,this.moduleLoader,this.componentsWithAssets,t,n,i,r),t===T?(n==="translation"||n==="scale"||n==="rotation")&&P(this.componentMaps,this.eventManager,this.spatialIndex,!0,e):t===N?(n==="translation"||n==="scale"||n==="rotation")&&H(this.componentMaps[N][e]):t===M&&($(this.spatialIndex,this.componentMaps,e),j(this.componentMaps,e)),this.eventManager.publish([f.COMPONENT_UPDATED,t],[i,e]),!0)},getComponentMapById:function(e){return this.componentMaps[e]},updateWorldTransform:function(e){P(this.componentMaps,this.eventManager,this.spatialIndex,!0,e)},updateTextureMatrix:function(e){H(this.componentMaps[N][e])},updateAssetReferences:function(e,t){var n=this.componentMaps;for(var r in this.componentsWithAssets){var i=n[r];for(var s in i){var o=i[s];o.assetId===e&&(o.asset=t)}}},refreshAssetReferences:function(e){var t=this.componentMaps;for(var n in this.componentsWithAssets){var r=t[n];for(var i in r){var s=r[i];if(s.assetId.slice(0,s.assetId.indexOf(":"))==="script")continue;s.asset=e.get(s.assetId)}}},triggerEvent:function(e,t,n){var r=this.componentMaps[C][e];if(!r)return;var i=r.asset[t];if(!i)return;i.apply(null,[this.spell,e].concat(n))},updateEntityTemplate:function(e){var t=o(e.namespace,e.name),n=g.reduce(this.componentMaps[x],function(e,n,r){return n.entityTemplateId===t&&e.push(r),e},[]);for(var r=0,i,s=n.length;r<s;r++)i=n[r],this.removeEntity(i),this.spatialIndex.remove(i),this.createEntity({entityTemplateId:t,id:i})},registerComponent:function(e){var t=o(e.namespace,e.name);if(!_(e))throw'Error: The format of the supplied component definition "'+t+'" is invalid.';this.componentMaps[t]||(this.componentMaps[t]={}),Z(e.attributes)?this.componentsWithAssets[t]=!0:delete this.componentsWithAssets[t]}},lt}),define("/V8x6jYt/KxKsfIudrdXKJHn0YsD2VYx5hYPCYv9N6g=",["AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=t.Time.getCurrentInMs,i=function(t,i,s){this.newRemoteTime=s,this.remoteTime=s,this.newRemoteTimPending=!1,this.localTime=s,this.previousSystemTime=r(),this.elapsedTime=0,this.deltaLocalRemoteTime=0,this.statisticsManager=i,t.subscribe(["clockSyncUpdate"],n.bind(function(e){this.newRemoteTime=e,this.newRemoteTimPending=!0},this)),t.subscribe(e.CLOCK_SYNC_ESTABLISHED,n.bind(function(e){this.newRemoteTime=this.remoteTime=this.localTime=e,this.newRemoteTimPending=!1},this))};return i.prototype={update:function(){this.newRemoteTimPending&&(this.remoteTime=this.newRemoteTime,this.newRemoteTimPending=!1);var e=r();this.elapsedTime=Math.max(e-this.previousSystemTime,0),this.previousSystemTime=e,this.localTime+=this.elapsedTime,this.remoteTime+=this.elapsedTime,this.deltaLocalRemoteTime=this.localTime-this.remoteTime;var t=1e9;this.relativeClockSkew=(this.localTime/this.remoteTime*t-t)*2+1},getLocalTime:function(){return this.localTime},getElapsedTime:function(){return this.elapsedTime},getRemoteTime:function(){return this.remoteTime}},i}),define("RHForCY775HrCxRbFeVX9Spz8YmenJsOpg1HHlNx44o=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t=e.Time.getCurrentInMs,n=function(){this.value=0};return n.prototype={start:function(){this.value=t()},stop:function(){return t()-this.value}},n}),define("xzulUmNYw/38rNcu3Y7xU3DRAD5hGCLMNWsYeDxH4jc=",function(){"use strict";var e=function(t,n){var r=t.children;if(t.id===n)return t;for(var i=0,s=r.length;i<s;i++){var o=e(r[i],n);if(o)return o}},t=function(t,n,r){var i=e(t,n);return i?(i.children.push(r),!0):!1},n=function(e,t,r){if(!e)return;r||(r=0),t(e,r);var i=e.children;for(var s=0,o=i.length,u=r+1;s<o;s++)n(i[s],t,u)};return{addNode:t,getNode:e,eachNode:n}}),define("7PhHlzIXiau/l87zhE3bIdhsPohgmy+yJQROuFXc0Uw=",["AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","xzulUmNYw/38rNcu3Y7xU3DRAD5hGCLMNWsYeDxH4jc=","RHForCY775HrCxRbFeVX9Spz8YmenJsOpg1HHlNx44o=","/V8x6jYt/KxKsfIudrdXKJHn0YsD2VYx5hYPCYv9N6g=","Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o){"use strict";var u=32,a=100,f=1e3,l=t.eachNode,c=function(e){var t="";while(e--)t+=" ";return t},h=function(e){var t="";return l(e,function(e,n){var r=e.metrics;t+=c(n)+e.id+": "+r[0]+"/"+r[1]+"/"+r[2]+"/"+r[3]+"\n"}),t},p=function(e,t,s){this.updateIntervalInMs=s||u,this.render=null,this.update=null,this.preNextFrame=[],this.accumulatedTimeInMs=this.updateIntervalInMs;var o=i.Time.getCurrentInMs();this.timer=new r(e,t,o),this.timeSinceLastPerfPrintInMs=0,this.statisticsManager=t,this.stopWatch=new n,this.totalStopWatch=new n};return p.prototype={setRenderCallback:function(e){this.render=e},setUpdateCallback:function(e){this.update=e},setPreNextFrame:function(e){this.preNextFrame.push(e)},callEveryFrame:function(e){this.preNextFrame.length>0&&this.preNextFrame.pop()();var t=this.statisticsManager,n=this.timer;n.update();var r=this.updateIntervalInMs,i=n.getLocalTime(),o=Math.min(n.getElapsedTime(),a);this.totalStopWatch.start(),t.startTick(i,o);if(this.update){this.stopWatch.start();var u=this.accumulatedTimeInMs+o;while(u>=r)this.update(i,r),u-=r;this.accumulatedTimeInMs=u,t.updateNode("update",this.stopWatch.stop())}this.render&&(this.stopWatch.start(),this.render(i,o),t.updateNode("render",this.stopWatch.stop())),t.updateNode("total",this.totalStopWatch.stop()),this.timeSinceLastPerfPrintInMs>f&&(this.timeSinceLastPerfPrintInMs-=f),this.timeSinceLastPerfPrintInMs+=o,s.callNextFrame(this.callEveryFramePartial)},run:function(){this.callEveryFramePartial=o.bind(this.callEveryFrame,this),this.callEveryFramePartial(i.Time.getCurrentInMs())}},function(e,t,n){return new p(e,t,n)}}),define("/onvXG9VhyKIuG0Hn1bR4/mu3mvWKrL3S9G1yf5s9Bs=",["yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM="],function(e,t,n,r,i){"use strict";var s=function(e){var t=e.length/4,n=new Array(t*3);for(var r=0,i,s,o=t;r<o;r++)i=r*4,s=r*3,n[s]=e[i],n[s+1]=e[i+1],n[s+2]=e[i+2];return n};return function(s,o){var u=i.createSplashScreenImage();if(u){var a=s.renderingContext.createTexture(u),f=s.configurationManager.getValue("currentScreenSize"),l=n.fromValues(Math.round(f[0]*.5-a.dimensions[0]*.5),Math.round(f[1]*.5-a.dimensions[1]*.5)),c=s.renderingContext,h=e.create(),p=r.fromValues(0,0,0,1);t.mat3Ortho(h,0,f[0],0,f[1]),c.setViewMatrix(h),c.setClearColor(p),c.resizeColorBuffer(f[0],f[1]),c.viewport(0,0,f[0],f[1]),c.drawTexture(a,l,a.dimensions,null),i.registerTimer(o,3e3)}else o()}}),define("hJb+mSFyVabGetH1ke8dX63PPYPjsoFy4ea4w/GvIxQ=",function(){"use strict";var e={};return e.startsWith=function(e,t){return t===""?!0:!e||!t?!1:String(e).lastIndexOf(String(t),0)===0},e}),define("Vsylc/NMToQHW836UwRyCRPN84V2NddLsPHwdwldHCE=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(n,r){for(var i in n){var s=n[i];e.isObject(s)?t(s,r):r(s,i)}},n=function(e,n,r){var i=function(e,t){r=n(r,e,t)};return t(e,i),r},r=function(n,r){var i=[];return t(n,function(t,n){if(!e.contains(r,t))return;i.push(n)}),i};return{pluck:r,reduce:n,walk:t}}),define("owrVs8KGmm2PtYD3Fz1K/d+hxfz6awWt4m8yvrgInPg=",function(){"use strict";return function(e,t,n){var r=e[0],i=e[1],s=r/i;return t>=s?r=t*i:i=r/t,n&&(r=Math.round(r),i=Math.round(i)),[r,i]}}),define("RtIYVMl7NLjPEVfGOmP5fh9Nx6lTDT9M9H4kPYDCldY=",["owrVs8KGmm2PtYD3Fz1K/d+hxfz6awWt4m8yvrgInPg=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co="],function(e,t){"use strict";return function(n,r,i,s){var o=t.fromValues(n,r);return t.multiply(o,i,e(o,s))}}),define("vV8JUbcAFKwRw0kj9C+z03trX9WutPyp4SJONZGPilU=",["rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s="],function(e){"use strict";return function(t,n,r,i){if(!r)return;var s=t.get(e(r));if(!s)return;var o=s.config[i];if(!o)return;return o[n]}}),define("2JM90K4OxW6bfbnvH9gYnm0kSJxaAvTFlf59uaLcTnY=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(t,n,r){return e.isArray(n)||(n=[n]),function(){var i=e.keys(t),s=i.length;for(var o=0;o<s;o++){var u=i[o],a=[t[u]],f=n.length,l=arguments?e.toArray(arguments).concat(a):[a];for(var c=0;c<f;c++)l.push(n[c][u]);r.apply(null,l)}}}}),define("qK33jL/Mq7B5Vu6fbGS3/sPc0C/aQisKbAMhYhm3OJk=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(e){return e<1?0:1},n={None:t,Linear:e.identity,QuadraticIn:function(e){return e*e},QuadraticOut:function(e){return e*(2-e)},QuadraticInOut:function(e){return(e*=2)<1?.5*e*e:-0.5*(--e*(e-2)-1)},CubicIn:function(e){return e*e*e},CubicOut:function(e){return--e*e*e+1},CubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},QuarticIn:function(e){return e*e*e*e},QuarticOut:function(e){return 1- --e*e*e*e},QuarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},QuinticIn:function(e){return e*e*e*e*e},QuinticOut:function(e){return--e*e*e*e*e+1},QuinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},SinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},SinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},SinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},ExponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},ExponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},ExponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},CircularIn:function(e){return 1-Math.sqrt(1-e*e)},CircularOut:function(e){return Math.sqrt(1- --e*e)},CircularInOut:function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},ElasticIn:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)))},ElasticOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/r)+1)},ElasticInOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-0.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)*.5+1)},BackIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},BackOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},BackInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)},BounceIn:function(e){return 1-n.BounceOut(1-e)},BounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},BounceInOut:function(e){return e<.5?n.BounceIn(e*2)*.5:n.BounceOut(e*2-1)*.5+.5}};return n}),define("AE4JV5gWwq3FE9WsQybF29eg05JxvOqTmiHIZrNKCR0=",function(){"use strict";var e=function(){};return e.generate=function(){var t=e._gri,n=e._ha;return n(t(32),8)+"-"+n(t(16),4)+"-"+n(16384|t(12),4)+"-"+n(32768|t(14),4)+"-"+n(t(48),12)},e._gri=function(e){return e<0?NaN:e<=30?0|Math.random()*(1<<e):e<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN},e._ha=function(e,t){var n=e.toString(16),r=t-n.length,i="0";for(;r>0;r>>>=1,i+=i)r&1&&(n=i+n);return n},e}),define("dunF+D1VptGh1mvT/vo4D+cQh7io0eKZgvwrqCjcMow=",function(){"use strict";var e=function(e){this.x=e};return e.prototype.next=function(){var e=this.x,t=e;return e<<=13,t^=e,e>>=17,t^=e,e<<=5,t^=e,this.x=t,(t+2147483648)*(1/4294967296)},e.prototype.nextBetween=function(e,t){return e+this.next()*(t-e)},e}),define("a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk="],function(e,t){"use strict";var n={};return n.create=function(){var t=e.createFloatArray(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var n=e.createFloatArray(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.fromValues=function(t,n,r){var i=e.createFloatArray(3);return i[0]=t,i[1]=n,i[2]=r,i},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},n.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},n.sub=n.subtract,n.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},n.mul=n.multiply,n.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},n.div=n.divide,n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},n.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},n.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},n.dist=n.distance,n.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},n.sqrDist=n.squaredDistance,n.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},n.len=n.length,n.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},n.sqrLen=n.squaredLength,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},n.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},n.cross=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2];return e[0]=i*a-s*u,e[1]=s*o-r*a,e[2]=r*u-i*o,e},n.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e},n.random=function(e,n){n=n||1;var r=t.random()*2*Math.PI,i=t.random()*2-1,s=Math.sqrt(1-i*i)*n;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=i*n,e},n.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12],e[1]=n[1]*r+n[5]*i+n[9]*s+n[13],e[2]=n[2]*r+n[6]*i+n[10]*s+n[14],e},n.transformMat3=function(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e},n.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},n.forEach=function(){var e=n.create();return function(t,n,r,i,s,o){var u,a;n||(n=3),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),n.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},n}),define("HCQLCqor0eV+DAO4JM25Frq5bQkCpQpTDQEHtpXy9ag=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks="],function(e,t,n,r){"use strict";var i={};return i.create=function(){var t=e.createFloatArray(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.rotationTo=function(){var e=t.create(),n=t.fromValues(1,0,0),r=t.fromValues(0,1,0);return function(s,o,u){var a=t.dot(o,u);return a<-0.999999?(t.cross(e,n,o),t.length(e)<1e-6&&t.cross(e,r,o),t.normalize(e,e),i.setAxisAngle(s,e,Math.PI),s):a>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(t.cross(e,o,u),s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=1+a,i.normalize(s,s))}}(),i.setAxes=function(){var e=r.create();return function(t,n,r,s){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=s[0],e[4]=s[1],e[7]=s[2],e[2]=n[0],e[5]=n[1],e[8]=n[2],i.normalize(t,i.fromMat3(t,e))}}(),i.clone=n.clone,i.fromValues=n.fromValues,i.copy=n.copy,i.set=n.set,i.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},i.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},i.add=n.add,i.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*l+o*u+i*f-s*a,e[1]=i*l+o*a+s*u-r*f,e[2]=s*l+o*f+r*a-i*u,e[3]=o*l-r*u-i*a-s*f,e},i.mul=i.multiply,i.scale=n.scale,i.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+o*u,e[1]=i*a+s*u,e[2]=s*a-i*u,e[3]=o*a-r*u,e},i.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a-s*u,e[1]=i*a+o*u,e[2]=s*a+r*u,e[3]=o*a-i*u,e},i.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+i*u,e[1]=i*a-r*u,e[2]=s*a+o*u,e[3]=o*a-s*u,e},i.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},i.dot=n.dot,i.lerp=n.lerp,i.slerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=n[0],f=n[1],l=n[2],c=n[3],h,p,d,v,m;return p=i*a+s*f+o*l+u*c,p<0&&(p=-p,a=-a,f=-f,l=-l,c=-c),1-p>1e-6?(h=Math.acos(p),d=Math.sin(h),v=Math.sin((1-r)*h)/d,m=Math.sin(r*h)/d):(v=1-r,m=r),e[0]=v*i+m*a,e[1]=v*s+m*f,e[2]=v*o+m*l,e[3]=v*u+m*c,e},i.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,u=o?1/o:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-i*u,e[3]=s*u,e},i.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},i.length=n.length,i.len=i.length,i.squaredLength=n.squaredLength,i.sqrLen=i.squaredLength,i.normalize=n.normalize,i.fromMat3=function(){var t=e.Int8Array.fromValues([1,2,0]);return function(e,n){var r=n[0]+n[4]+n[8],i;if(r>0)i=Math.sqrt(r+1),e[3]=.5*i,i=.5/i,e[0]=(n[7]-n[5])*i,e[1]=(n[2]-n[6])*i,e[2]=(n[3]-n[1])*i;else{var s=0;n[4]>n[0]&&(s=1),n[8]>n[s*3+s]&&(s=2);var o=t[s],u=t[o];i=Math.sqrt(n[s*3+s]-n[o*3+o]-n[u*3+u]+1),e[s]=.5*i,i=.5/i,e[3]=(n[u*3+o]-n[o*3+u])*i,e[o]=(n[o*3+s]+n[s*3+o])*i,e[u]=(n[u*3+s]+n[s*3+u])*i}return e}}(),i.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i}),define("9h1VbSkUkR0rOE8ony/LEvlqT9hawoj6Npu6TdQx4pI=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk="],function(e,t){"use strict";var n={};return n.create=function(){var t=e.createFloatArray(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var n=e.createFloatArray(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},n.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(i*L-r*A-s*k)*O,e[2]=(v*x-m*S+g*E)*O,e[3]=(h*S-c*x-p*E)*O,e[4]=(a*C-o*A-f*N)*O,e[5]=(n*A-i*C+s*N)*O,e[6]=(m*w-d*x-g*b)*O,e[7]=(l*x-h*w+p*b)*O,e[8]=(o*L-u*C+f*T)*O,e[9]=(r*C-n*L-s*T)*O,e[10]=(d*S-v*w+g*y)*O,e[11]=(c*w-l*S-p*y)*O,e[12]=(u*N-o*k-a*T)*O,e[13]=(n*k-r*N+i*T)*O,e[14]=(v*b-d*E-m*y)*O,e[15]=(l*E-c*b+h*y)*O,e):null},n.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15];return e[0]=u*(h*g-p*m)-c*(a*g-f*m)+v*(a*p-f*h),e[1]=-(r*(h*g-p*m)-c*(i*g-s*m)+v*(i*p-s*h)),e[2]=r*(a*g-f*m)-u*(i*g-s*m)+v*(i*f-s*a),e[3]=-(r*(a*p-f*h)-u*(i*p-s*h)+c*(i*f-s*a)),e[4]=-(o*(h*g-p*m)-l*(a*g-f*m)+d*(a*p-f*h)),e[5]=n*(h*g-p*m)-l*(i*g-s*m)+d*(i*p-s*h),e[6]=-(n*(a*g-f*m)-o*(i*g-s*m)+d*(i*f-s*a)),e[7]=n*(a*p-f*h)-o*(i*p-s*h)+l*(i*f-s*a),e[8]=o*(c*g-p*v)-l*(u*g-f*v)+d*(u*p-f*c),e[9]=-(n*(c*g-p*v)-l*(r*g-s*v)+d*(r*p-s*c)),e[10]=n*(u*g-f*v)-o*(r*g-s*v)+d*(r*f-s*u),e[11]=-(n*(u*p-f*c)-o*(r*p-s*c)+l*(r*f-s*u)),e[12]=-(o*(c*m-h*v)-l*(u*m-a*v)+d*(u*h-a*c)),e[13]=n*(c*m-h*v)-l*(r*m-i*v)+d*(r*h-i*c),e[14]=-(n*(u*m-a*v)-o*(r*m-i*v)+d*(r*a-i*u)),e[15]=n*(u*h-a*c)-o*(r*h-i*c)+l*(r*a-i*u),e},n.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8],l=e[9],c=e[10],h=e[11],p=e[12],d=e[13],v=e[14],m=e[15],g=t*o-n*s,y=t*u-r*s,b=t*a-i*s,w=n*u-r*o,E=n*a-i*o,S=r*a-i*u,x=f*d-l*p,T=f*v-c*p,N=f*m-h*p,C=l*v-c*d,k=l*m-h*d,L=c*m-h*v;return g*L-y*k+b*C+w*N-E*T+S*x},n.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],g=t[14],y=t[15],b=n[0],w=n[1],E=n[2],S=n[3];return e[0]=b*r+w*u+E*c+S*v,e[1]=b*i+w*a+E*h+S*m,e[2]=b*s+w*f+E*p+S*g,e[3]=b*o+w*l+E*d+S*y,b=n[4],w=n[5],E=n[6],S=n[7],e[4]=b*r+w*u+E*c+S*v,e[5]=b*i+w*a+E*h+S*m,e[6]=b*s+w*f+E*p+S*g,e[7]=b*o+w*l+E*d+S*y,b=n[8],w=n[9],E=n[10],S=n[11],e[8]=b*r+w*u+E*c+S*v,e[9]=b*i+w*a+E*h+S*m,e[10]=b*s+w*f+E*p+S*g,e[11]=b*o+w*l+E*d+S*y,b=n[12],w=n[13],E=n[14],S=n[15],e[12]=b*r+w*u+E*c+S*v,e[13]=b*i+w*a+E*h+S*m,e[14]=b*s+w*f+E*p+S*g,e[15]=b*o+w*l+E*d+S*y,e},n.mul=n.multiply,n.translate=function(e,t,n){var r=n[0],i=n[1],s=n[2],o,u,a,f,l,c,h,p,d,v,m,g;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(o=t[0],u=t[1],a=t[2],f=t[3],l=t[4],c=t[5],h=t[6],p=t[7],d=t[8],v=t[9],m=t[10],g=t[11],e[0]=o,e[1]=u,e[2]=a,e[3]=f,e[4]=l,e[5]=c,e[6]=h,e[7]=p,e[8]=d,e[9]=v,e[10]=m,e[11]=g,e[12]=o*r+l*i+d*s+t[12],e[13]=u*r+c*i+v*s+t[13],e[14]=a*r+h*i+m*s+t[14],e[15]=f*r+p*i+g*s+t[15]),e},n.scale=function(e,t,n){var r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.rotate=function(e,n,r,i){var s=i[0],o=i[1],u=i[2],a=Math.sqrt(s*s+o*o+u*u),f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;return Math.abs(a)<t.FLOAT_EPSILON?null:(a=1/a,s*=a,o*=a,u*=a,f=Math.sin(r),l=Math.cos(r),c=1-l,h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8],E=n[9],S=n[10],x=n[11],T=s*s*c+l,N=o*s*c+u*f,C=u*s*c-o*f,k=s*o*c-u*f,L=o*o*c+l,A=u*o*c+s*f,O=s*u*c+o*f,M=o*u*c-s*f,_=u*u*c+l,e[0]=h*T+m*N+w*C,e[1]=p*T+g*N+E*C,e[2]=d*T+y*N+S*C,e[3]=v*T+b*N+x*C,e[4]=h*k+m*L+w*A,e[5]=p*k+g*L+E*A,e[6]=d*k+y*L+S*A,e[7]=v*k+b*L+x*A,e[8]=h*O+m*M+w*_,e[9]=p*O+g*M+E*_,e[10]=d*O+y*M+S*_,e[11]=v*O+b*M+x*_,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},n.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],u=t[6],a=t[7],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+f*r,e[5]=o*i+l*r,e[6]=u*i+c*r,e[7]=a*i+h*r,e[8]=f*i-s*r,e[9]=l*i-o*r,e[10]=c*i-u*r,e[11]=h*i-a*r,e},n.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[8],l=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-f*r,e[1]=o*i-l*r,e[2]=u*i-c*r,e[3]=a*i-h*r,e[8]=s*r+f*i,e[9]=o*r+l*i,e[10]=u*r+c*i,e[11]=a*r+h*i,e},n.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],u=t[2],a=t[3],f=t[4],l=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+f*r,e[1]=o*i+l*r,e[2]=u*i+c*r,e[3]=a*i+h*r,e[4]=f*i-s*r,e[5]=l*i-o*r,e[6]=c*i-u*r,e[7]=h*i-a*r,e},n.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=r+r,a=i+i,f=s+s,l=r*u,c=r*a,h=r*f,p=i*a,d=i*f,v=s*f,m=o*u,g=o*a,y=o*f;return e[0]=1-(p+v),e[1]=c+y,e[2]=h-g,e[3]=0,e[4]=c-y,e[5]=1-(l+v),e[6]=d+m,e[7]=0,e[8]=h+g,e[9]=d-m,e[10]=1-(l+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},n.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=n*u,c=n*a,h=r*u,p=r*a,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-(h+d),e[1]=l+g,e[2]=c-m,e[3]=0,e[4]=l-g,e[5]=1-(f+d),e[6]=p+v,e[7]=0,e[8]=c+m,e[9]=p-v,e[10]=1-(f+h),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.frustum=function(e,t,n,r,i,s,o){var u=1/(n-t),a=1/(i-r),f=1/(s-o);return e[0]=s*2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*a,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(i+r)*a,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e},n.perspective=function(e,t,n,r,i){var s=1/Math.tan(t/2),o=1/(r-i);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},n.ortho=function(e,t,n,r,i,s,o){var u=1/(t-n),a=1/(r-i),f=1/(s-o);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+n)*u,e[13]=(i+r)*a,e[14]=(o+s)*f,e[15]=1,e},n.lookAt=function(e,r,i,s){var o,u,a,f,l,c,h,p,d,v,m=r[0],g=r[1],y=r[2],b=s[0],w=s[1],E=s[2],S=i[0],x=i[1],T=i[2];return Math.abs(m-S)<t.FLOAT_EPSILON&&Math.abs(g-x)<t.FLOAT_EPSILON&&Math.abs(y-T)<t.FLOAT_EPSILON?n.identity(e):(h=m-S,p=g-x,d=y-T,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,o=w*d-E*p,u=E*h-b*d,a=b*p-w*h,v=Math.sqrt(o*o+u*u+a*a),v?(v=1/v,o*=v,u*=v,a*=v):(o=0,u=0,a=0),f=p*a-d*u,l=d*o-h*a,c=h*u-p*o,v=Math.sqrt(f*f+l*l+c*c),v?(v=1/v,f*=v,l*=v,c*=v):(f=0,l=0,c=0),e[0]=o,e[1]=f,e[2]=h,e[3]=0,e[4]=u,e[5]=l,e[6]=p,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(o*m+u*g+a*y),e[13]=-(f*m+l*g+c*y),e[14]=-(h*m+p*g+d*y),e[15]=1,e)},n.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},n}),define("wmv6Nu5PrhR2GBQseWUtsQS+j5FlMm6CQ794XX3Cd9A=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t={};return t.create=function(){var t=e.createFloatArray(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},t.clone=function(t){var n=e.createFloatArray(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=n*s-r*i;return a?(a=1/a,e[0]=s*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e[4]=(i*u-s*o)*a,e[5]=(r*o-n*u)*a,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=n[0],l=n[1],c=n[2],h=n[3],p=n[4],d=n[5];return e[0]=r*f+i*c,e[1]=r*l+i*h,e[2]=s*f+o*c,e[3]=s*l+o*h,e[4]=f*u+c*a+p,e[5]=l*u+h*a+d,e},t.mul=t.multiply,t.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*f,e[1]=-r*f+i*l,e[2]=s*l+o*f,e[3]=-s*f+l*o,e[4]=l*u+f*a,e[5]=l*a-f*u,e},t.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},t.translate=function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t}),define("UPOGxICBwHHAJnhEO0kYe4CbSZksrC7moXiy6Wgb0MM=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t={};return t.create=function(){var t=e.createFloatArray(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},t.clone=function(t){var n=e.createFloatArray(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*s-i*r;return o?(o=1/o,e[0]=s*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},t.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1],f=n[2],l=n[3];return e[0]=r*u+i*f,e[1]=r*a+i*l,e[2]=s*u+o*f,e[3]=s*a+o*l,e},t.mul=t.multiply,t.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=Math.sin(n),a=Math.cos(n);return e[0]=r*a+i*u,e[1]=r*-u+i*a,e[2]=s*a+o*u,e[3]=s*-u+o*a,e},t.scale=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=n[0],a=n[1];return e[0]=r*u,e[1]=i*a,e[2]=s*u,e[3]=o*a,e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t}),define("DL2XO5bR2mezFB5wDHhPp+WUMECQNrIMAg+5DYokByc=",function(){"use strict";var e=function(e,t){return e[0]<=t[0]&&e[1]>t[1]&&e[2]<=t[2]&&e[3]>t[3]},t=function(e,t){return e[0]<=t[1]&&t[0]<e[1]&&e[2]<=t[3]&&t[2]<e[3]},n=function(e){var t=e.bound,n=t[0],r=t[1],i=t[2],s=t[3],o=(n+r)*.5,u=(i+s)*.5,a=e.children;a[0]=l(e,[o,r,u,s]),a[1]=l(e,[n,o,u,s]),a[2]=l(e,[n,o,i,u]),a[3]=l(e,[o,r,i,u])},r=function(e){var t=e.children;t[0].parent=undefined,t[0]=undefined,t[1].parent=undefined,t[1]=undefined,t[2].parent=undefined,t[2]=undefined,t[3].parent=undefined,t[3]=undefined},i=function(e,t,n){var r=s(t,n,n.bound),i=n.id;if(!r)throw"Could not insert item "+i?' with id "'+i+'" ':"because it is not contained in the space covered by the tree.";i&&(e[i]=r)},s=function(t,r,i){if(!e(t.bound,i))return;var o=t.children;o[0]||n(t);for(var u=0,a;u<4;u++){a=s(o[u],r,i);if(a)return t.numDescendantItems++,a}if(!a)return t.items[r.id]=r,t},o=function(e,t){delete e.items[t];var n=e.parent;while(n)n.numDescendantItems--,n.numDescendantItems===0&&r(n),n=n.parent},u=function(n,r,i){var s=n.items;for(var o in s){var f=s[o],l=f.bound;if(e(l,r)||e(r,l)||t(r,l))i[o]=f.payload}var c=n.children;if(!c[0])return;for(var h=0;h<4;h++){var p=c[h],d=p.bound;if(e(r,d))a(p,i);else{if(e(d,r)){u(p,r,i);break}t(d,r)&&u(p,r,i)}}},a=function(e,t){var n=e.items;for(var r in n)t[r]=n[r].payload;var i=e.children;if(!i[0])return;for(var s=0;s<4;s++)a(i[s],t)},f=function(e,t){var n=t[0]*.5,r=t[1]*.5;return[e[0]-n,e[0]+n,e[1]-r,e[1]+r]},l=function(e,t){return{parent:e,children:new Array(4),bound:t,items:{},numDescendantItems:0}},c=function(e,t,n,r,i){return n||(t=[0,0],n=[e-1,e-1]),{id:i,bound:f(t,n),payload:r}},h=function(e){this.idToNode={},this.size=e,this.root=l(null,f([0,0],[e,e]))};return h.prototype={insert:function(e,t,n,r){if(r&&this.idToNode[r])throw'The provided id "'+r+'" is already in use.';i(this.idToNode,this.root,c(this.size,e,t,n,r))},remove:function(e){var t=this.idToNode[e];if(!t)return;o(t,e),delete this.idToNode[e]},search:function(e,t){var n={};return u(this.root,f(e,t),n),n}},h}),define("z7TX6BsmUcv0nH/bqr0j7VkT7tQUPxwYZT67+lzEXGk=",function(){"use strict";return function(e,t,n){var r=e[0],i=e[1],s=r/i;return t<=s?r=t*i:i=r/t,n&&(r=Math.round(r),i=Math.round(i)),[r,i]}}),define("4vsnWAiE5zSFrXpOOZ2hdE2ZexQK0X61B2rw4N6SvLs=",["z7TX6BsmUcv0nH/bqr0j7VkT7tQUPxwYZT67+lzEXGk=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co="],function(e,t,n,r){"use strict";var i=n.identity(n.create()),s=r.create(),o=function(e,t,n,r,i,s){if(!s||s<0)s=1;var o=s*2;e.save(),e.fillRect(t,n,r,s),e.fillRect(t,n+i-s,r,s),e.fillRect(t,n+s,s,i-o),e.fillRect(t+r-s,n+s,s,i-o),e.restore()};return function(u,a,f,l){var c=l.scale,h=[1,0,1,1],p=r.multiply(s,f,c),d=p[0]/p[1],v=e(a,d),m=r.scale(s,r.subtract(s,a,v),.5);u.save(),t.mat3Ortho(i,0,a[0],0,a[1]),n.translate(i,i,m),u.setViewMatrix(i),u.setColor(h),o(u,0,0,v[0],v[1],2),u.restore()}}),define("yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t={};return t.create=function(){var t=e.createFloatArray(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(t){var n=e.createFloatArray(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=l*o-u*f,h=-l*s+u*a,p=f*s-o*a,d=n*c+r*h+i*p;return d?(d=1/d,e[0]=c*d,e[1]=(-l*r+i*f)*d,e[2]=(u*r-i*o)*d,e[3]=h*d,e[4]=(l*n-i*a)*d,e[5]=(-u*n+i*s)*d,e[6]=p*d,e[7]=(-f*n+r*a)*d,e[8]=(o*n-r*s)*d,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8];return e[0]=o*l-u*f,e[1]=i*f-r*l,e[2]=r*u-i*o,e[3]=u*a-s*l,e[4]=n*l-i*a,e[5]=i*s-n*u,e[6]=s*f-o*a,e[7]=r*a-n*f,e[8]=n*o-r*s,e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=e[8];return t*(f*s-o*a)+n*(-f*i+o*u)+r*(a*i-s*u)},t.multiply=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],g=n[5],y=n[6],b=n[7],w=n[8];return e[0]=h*r+p*o+d*f,e[1]=h*i+p*u+d*l,e[2]=h*s+p*a+d*c,e[3]=v*r+m*o+g*f,e[4]=v*i+m*u+g*l,e[5]=v*s+m*a+g*c,e[6]=y*r+b*o+w*f,e[7]=y*i+b*u+w*l,e[8]=y*s+b*a+w*c,e},t.mul=t.multiply,t.translate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e[6]=h*r+p*o+f,e[7]=h*i+p*u+l,e[8]=h*s+p*a+c,e},t.rotate=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=Math.sin(n),p=Math.cos(n);return e[0]=p*r+h*o,e[1]=p*i+h*u,e[2]=p*s+h*a,e[3]=p*o-h*r,e[4]=p*u-h*i,e[5]=p*a-h*s,e[6]=f,e[7]=l,e[8]=c,e},t.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,u=r+r,a=i+i,f=n*o,l=n*u,c=n*a,h=r*u,p=r*a,d=i*a,v=s*o,m=s*u,g=s*a;return e[0]=1-(h+d),e[3]=l+g,e[6]=c-m,e[1]=l-g,e[4]=1-(f+d),e[7]=p+v,e[2]=c+m,e[5]=p-v,e[8]=1-(f+h),e},t.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],u=t[5],a=t[6],f=t[7],l=t[8],c=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=n*u-r*o,b=n*a-i*o,w=n*f-s*o,E=r*a-i*u,S=r*f-s*u,x=i*f-s*a,T=l*v-c*d,N=l*m-h*d,C=l*g-p*d,k=c*m-h*v,L=c*g-p*v,A=h*g-p*m,O=y*A-b*L+w*k+E*C-S*N+x*T;return O?(O=1/O,e[0]=(u*A-a*L+f*k)*O,e[1]=(a*C-o*A-f*N)*O,e[2]=(o*L-u*C+f*T)*O,e[3]=(i*L-r*A-s*k)*O,e[4]=(n*A-i*C+s*N)*O,e[5]=(r*C-n*L-s*T)*O,e[6]=(v*x-m*S+g*E)*O,e[7]=(m*w-d*x-g*b)*O,e[8]=(d*S-v*w+g*y)*O,e):null},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t}),define("UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk="],function(e,t){"use strict";var n={};return n.create=function(){var t=e.createFloatArray(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var n=e.createFloatArray(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,r,i){var s=e.createFloatArray(4);return s[0]=t,s[1]=n,s[2]=r,s[3]=i,s},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},n.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},n.sub=n.subtract,n.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},n.mul=n.multiply,n.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},n.div=n.divide,n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},n.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},n.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)},n.dist=n.distance,n.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s},n.sqrDist=n.squaredDistance,n.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},n.len=n.length,n.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},n.sqrLen=n.squaredLength,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},n.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},n.lerp=function(e,t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=u+r*(n[3]-u),e},n.random=function(e,r){return r=r||1,e[0]=t.random(),e[1]=t.random(),e[2]=t.random(),e[3]=t.random(),n.normalize(e,e),n.scale(e,e,r),e},n.transformMat4=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e},n.transformQuat=function(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[0],u=n[1],a=n[2],f=n[3],l=f*r+u*s-a*i,c=f*i+a*r-o*s,h=f*s+o*i-u*r,p=-o*r-u*i-a*s;return e[0]=l*f+p*-o+c*-a-h*-u,e[1]=c*f+p*-u+h*-o-l*-a,e[2]=h*f+p*-a+l*-u-c*-o,e},n.forEach=function(){var e=n.create();return function(t,n,r,i,s,o){var u,a;n||(n=4),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],s(e,e,o),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),n.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},n}),define("97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE="],function(e){"use strict";var t={};t.FLOAT_EPSILON=1e-6,t.random=Math.random;if(e.hasFloatArraySupport()){var n=e.createFloatArray(1),r=e.Int32Array.create(n.buffer);t.invsqrt=function(e){var t=e*.5;n[0]=e;var s=1.5;r[0]=1597463007-(r[0]>>1);var o=n[0];return o*(s-t*o*o)}}else t.invsqrt=function(e){return 1/Math.sqrt(e)};return t.clamp=function(e,t,n){return e<t?t:e>n?n:e},t.isInInterval=function(e,t,n){return e>=t&&e<=n},t.modulo=function(e,t){var n=e%t;return n<0?(n+t)%t:n},t.sign=function(e){return e>=0?1:-1},t.roundToResolution=function(e,t){t||(t=.5);var n=e%t;return e-n+(n>t/2?t:0)},t.isPointInRect=function(e,t,n,r,i){var s=i,o=Math.cos(s),u=Math.sin(s),a=t[0]-n/2,f=t[0]+n/2,l=t[1]-r/2,c=t[1]+r/2,h=t[0]+o*(e[0]-t[0])-u*(e[1]-t[1]),p=t[1]+u*(e[0]-t[0])+o*(e[1]-t[1]);return a<=h&&h<=f&&l<=p&&p<=c},t.mat3Ortho=function(e,t,n,r,i){var s=n-t,o=i-r;return e[0]=2/s,e[1]=0,e[2]=0,e[3]=0,e[4]=2/o,e[5]=0,e[6]=-(t+n)/s,e[7]=-(i+r)/o,e[8]=1,e},t}),define("Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=",["9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=","bA23bDq8fPntmQU9GQoK9B4kAtIeuQjrthbYTL8lteQ=","qcyBA6HTO/9GIJrM+92UIh/6/k62unY2OILgACwxGT8=","O0VUNb7eHdfy7Zk77vE6arREreHH14vpCkPPQ1yVsWI=","kPqicgHkZUNtccahT1HPrc/4aVLyUwv+cXaSLpXJHxo="],function(e,t,n,r,i){"use strict";return{createFloatArray:e,hasFloatArraySupport:t,Int8Array:n,Int32Array:r,Time:i}}),define("XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=",["Bg0Jxf/FOFpaMG2mDXQQWwVCIW/Q7ZP6IUmOkwio2cE=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk="],function(e,t){"use strict";var n={};return n.create=function(){var t=e.createFloatArray(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var n=e.createFloatArray(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var r=e.createFloatArray(2);return r[0]=t,r[1]=n,r},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},n.set=function(e,t,n){return e[0]=t,e[1]=n,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},n.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},n.sub=n.subtract,n.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},n.mul=n.multiply,n.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},n.div=n.divide,n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},n.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},n.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},n.dist=n.distance,n.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},n.sqrDist=n.squaredDistance,n.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},n.len=n.length,n.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},n.sqrLen=n.squaredLength,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},n.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},n.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},n.lerp=function(e,t,n,r){var i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e},n.random=function(e,n){n=n||1;var r=t.random()*2*Math.PI;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e},n.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},n.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},n.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},n.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},n.forEach=function(){var e=n.create();return function(t,n,r,i,s,o){var u,a;n||(n=2),r||(r=0),i?a=Math.min(i*n+r,t.length):a=t.length;for(u=r;u<a;u+=n)e[0]=t[u],e[1]=t[u+1],s(e,e,o),t[u]=e[0],t[u+1]=e[1];return t}}(),n.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},n}),define("GoL+ord+9gG/CZr2Vm4ab0dKMLT/P0WQNG8szm46sIs=",["XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co="],function(e){"use strict";var t=e.create(),n=e.create(),r=e.create(),i=function(e,i,s,o,u,a,f,l){return t[0]=s.x-f,t[1]=s.y,n[0]=o-f,n[1]=u-l,r[0]=s.width+f*2,r[1]=s.height+l*2,e.drawSubTexture(i,t,r,n,r),s.width+a+f},s=function(e,t,n,r){r=t.config.hSpacing+r;if(!n)return 0;var i=0,s=e.length,o=t.config.charset;if(n==="left")return i;if(n==="right")return i;if(n==="center"){for(var u=0;u<s;u++){var a=o[e.charAt(u)];a||(a=o[" "]),i+=a.width+r}return i*.5}};return function(e,t,n,r,o,u,a,f){a=a||0,u=u.toString(),r-=s(u,t,f,a);var l=u.length,c=t.config.charset,h=t.config.hSpacing,p=t.config.vSpacing;for(var d=0;d<l;d++){var v=c[u.charAt(d)];v||(v=c[" "]),r+=i(e,n,v,r,o,a,h,p)}}}),define("wnAnBa/NAGRTURzVFy/y3DjKuL9AnnG5zN1Jjft7iwM=",["GoL+ord+9gG/CZr2Vm4ab0dKMLT/P0WQNG8szm46sIs=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks="],function(e,t,n,r,i){"use strict";var s=i.identity(i.create()),o=n.create(),u=.5,a=r.fromValues(.4,.4,.4,u),f=r.fromValues(.7,.7,.7,u),l=r.fromValues(0,0,.7,u),c=r.fromValues(0,.7,0,u),h=function(e){var t=Math.log(e)/Math.log(10),n=Math.round(t);return Math.pow(10,n-1)},p=function(e,t){var n=e%t;return n!==0?e>0?e-n+t:e-n:e},d=function(e,t){return Math.floor(e/t)},v=function(t,n,r,i,s,o,u,l,h,p){var d=s*10,v=Math.round((u+h[1])*l),m,g;for(var y=0;y<=p;y++)g=o+y*s,m=Math.round((g+h[0])*l),t.setColor(g===0?c:g%d===0?f:a),t.fillRect(m,v,1,i),e(t,n,r,m+3,v,g)},m=function(t,n,r,i,s,o,u,c,h,p){var d=s*10,v=Math.round((u+h[0])*c),m,g;for(var y=0;y<=p;y++)g=o+y*s,m=Math.round((g+h[1])*c),t.setColor(g===0?l:g%d===0?f:a),t.fillRect(v,m,i,1),e(t,n,r,v+3,m,g)};return function(e,r,i,u,a){var f=a.translation,l=u[0],c=u[1],g=f[0]-l/2,y=f[1]-c/2,b=g+l,w=y+c,E=h(l),S=[-g,-y],x=r.resource;n.divide(o,i,u),e.save(),t.mat3Ortho(s,0,i[0],0,i[1]),e.setViewMatrix(s),v(e,r,x,i[1],E,p(g,E),y,o[1],S,d(l,E)),m(e,r,x,i[0],E,p(y,E),g,o[0],S,d(c,E)),e.restore()}}),define("i9MLdMDkxbtBR2CZHJFclZiJU/kTPDaefQqSH5elN5Q=",function(){"use strict";return function(e,t){t||(t=1),e.drawLine(-t,-t,t,t),e.drawLine(-t,t,t,-t)}}),define("4SIYpLzIVb2YGd/OG/bAB2/geQyHSeWfbS1su39XCx0=",function(){"use strict";return function(e,t){t||(t=1);var n=2*t,r=n*.5;e.fillRect(-r,-r,n,n)}}),define("RjLlAfI5Vltng0Gnpb8aWiK65lgRpFMj6tAtBypaimw=",function(){"use strict";return function(e,t,n,r){var i=t*-0.5;e.setLineColor(n),e.drawCircle(0,0,t,r),e.drawLine(t,0,t*.618,0,r)}}),define("RYbxb+1mO6iMdLJEUnOrOauSypye4XjcD3Isw0wfQVQ=",function(){"use strict";return function(e,t,n,r,i){var s=t*.5,o=n*.5;e.setLineColor(r),e.drawRect(-s,-o,t,n,i),e.drawLine(s*.618,0,s,0,i)}}),define("ar2HFFlGQ5PtmMGV2FiBZmOyBRr8awCdXvff4wAbgo0=",function(){"use strict";return{rectangle:function(e,t){var n=t.width,r=t.height,i=n*-0.5,s=r*-0.5;t.fill&&(e.setColor(t.fillColor),e.fillRect(i,s,n,r)),e.setLineColor(t.lineColor),e.drawRect(i,s,n,r,t.lineWidth)}}}),define("IB9jfUoKNrdRjZqEIu7wNHEnyBRP4i1RaGStmBOiBQQ=",["ar2HFFlGQ5PtmMGV2FiBZmOyBRr8awCdXvff4wAbgo0=","RYbxb+1mO6iMdLJEUnOrOauSypye4XjcD3Isw0wfQVQ=","RjLlAfI5Vltng0Gnpb8aWiK65lgRpFMj6tAtBypaimw=","4SIYpLzIVb2YGd/OG/bAB2/geQyHSeWfbS1su39XCx0=","i9MLdMDkxbtBR2CZHJFclZiJU/kTPDaefQqSH5elN5Q=","wnAnBa/NAGRTURzVFy/y3DjKuL9AnnG5zN1Jjft7iwM=","4vsnWAiE5zSFrXpOOZ2hdE2ZexQK0X61B2rw4N6SvLs=","DL2XO5bR2mezFB5wDHhPp+WUMECQNrIMAg+5DYokByc=","UPOGxICBwHHAJnhEO0kYe4CbSZksrC7moXiy6Wgb0MM=","wmv6Nu5PrhR2GBQseWUtsQS+j5FlMm6CQ794XX3Cd9A=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","9h1VbSkUkR0rOE8ony/LEvlqT9hawoj6Npu6TdQx4pI=","HCQLCqor0eV+DAO4JM25Frq5bQkCpQpTDQEHtpXy9ag=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","UXTIupZGRczsgnUj2SpAlCuuFJw3p3TtznLNsAamIcQ=","dunF+D1VptGh1mvT/vo4D+cQh7io0eKZgvwrqCjcMow=","AE4JV5gWwq3FE9WsQybF29eg05JxvOqTmiHIZrNKCR0=","qK33jL/Mq7B5Vu6fbGS3/sPc0C/aQisKbAMhYhm3OJk=","2JM90K4OxW6bfbnvH9gYnm0kSJxaAvTFlf59uaLcTnY=","Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=","vV8JUbcAFKwRw0kj9C+z03trX9WutPyp4SJONZGPilU=","RtIYVMl7NLjPEVfGOmP5fh9Nx6lTDT9M9H4kPYDCldY=","z7TX6BsmUcv0nH/bqr0j7VkT7tQUPxwYZT67+lzEXGk=","Vsylc/NMToQHW836UwRyCRPN84V2NddLsPHwdwldHCE=","hJb+mSFyVabGetH1ke8dX63PPYPjsoFy4ea4w/GvIxQ="],function(){return undefined}),define("ChYbCQykZBon8Ii54rxrAyc7zW54QvlnvqLfW3nPjN0=",["1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU=","d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s="],function(e,t,n){"use strict";return function(r){return e({add:function(e){r.sceneManager.addSystem(e.systemId,e.executionGroupId,e.index,e.systemConfig)},move:function(e){r.sceneManager.moveSystem(e.systemId,e.srcExecutionGroupId,e.dstExecutionGroupId,e.dstIndex)},remove:function(e){r.sceneManager.removeSystem(e.systemId,e.executionGroupId)},update:function(e){var i=e.definition;if(!i.namespace||!i.name)throw"Error: System definition is missing namespace and or name attribute.";var s=t(i.namespace,i.name),o={};o[n(s)]=i,r.libraryManager.addToCache(o),r.sceneManager.restartSystem(s,e.executionGroupId,e.systemConfig)}})}}),define("1rqqQwDriBtxhdpQLfU1QbOSpXNz0qE31+5K46MrYeE=",["1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU="],function(e){"use strict";return function(t){return e({drawCoordinateGrid:function(e){t.configurationManager.setValue("drawCoordinateGrid",e)},drawTitleSafeOutline:function(e){t.configurationManager.setValue("drawTitleSafeOutline",e)},setScreenMode:function(e){t.configurationManager.setValue("screenMode",e)},simulateScreenAspectRatio:function(e){t.configurationManager.setValue("screenAspectRatio",e.aspectRatio)}})}}),define("C20TozIGoGYLzcTFVqaYDwSi189PvKkTfxhBjT84cFc=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(t,n,r,i,s){if(!r)throw"Error: Missing application module. Please provide a application module.";t.applicationModule=r,n.setConfig(e.extend(i,s))}}),define("Zt4dDF5B0lgdwIfuUagRZUHqy70yWlr5e3mCP8+h4ik=",["C20TozIGoGYLzcTFVqaYDwSi189PvKkTfxhBjT84cFc=","1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU="],function(e,t){"use strict";return function(n,r){return t({startApplicationModule:function(e){r(e.applicationModule)},setApplicationModule:function(t){e(n,n.configurationManager,t.applicationModule,t.applicationModule.config,n.loaderConfig)},addToCache:function(e){n.libraryManager.addToCache(e.cacheContent)},startScene:function(e){n.sceneManager.startScene(e.startSceneId,e.initialConfig,e.showLoadingScene)}})}}),define("6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=",["gJW/lLYgY7GQD3jSIw3KqCfqP7QOzxtAqQKeGMkRgsk=","Uk05TQbFhLjcnGbdbOPLJdj/vU155EGxAWS+19s4cWU=","HFDYWVgRyrhHY2KATklGRkPckqV4jVAACe4xWOlbLYY=","nWNLlTtXESn8SqZ6GddNabDOUjB4LefSiI+9XEsZYmg=","l9dSFVp1qo6eP3hR340CJSWXAetRnpxaVzMXOT2OcB8=","Di30uWqRYAwyqAdAxFmRqw86a8D7ltvaWwld3nnR01Q=","0N5cGXariGqD4N3whA0u6kiS5RWgC/2hQRDInlWP/YE=","B6cZIUtIjiQAeBHS1O6wHTUXCz5h3Y0N1v4W5ubpfb8=","KbXW13xQZi+ZmL5T5siHSuWpqYOZ0+3IRsqaL0xh2Vc=","bT1dgc/3zs3/zhPuJg4Xiztl8XLm5Uc+D+Eqtkbsmd4=","7lrsAcIJ54z2DGiA+VzPHPCwn4wrYCSbrHjhffGTNvI=","XqX2t9n50Hfi19mtSZs5LEk42LHNrgz7ttwgdF8R2Wk=","QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg=","XRz6ZY1jo28yLiT686aBwTBcr94D/v97NQM1Ti3dvCQ=","3ZSQGM1c2BAMKa3dbHQCHrSWm3fXxxnzR+a5MWv/xdg=","rEYqh2GBvinjduCyGsbv4n9mKgNnKE+azLg9e1q6fUw=","nBRERbho9PXv7Yc7UKzlz9aYKuD6BeNrhTlfLlHck4o=","dBVCdOd2ydzpZ+4Sx8Q/uZzh/d0W0UPJ9KIqh5lHd9E=","bIKOt9oMElIV0GQpgfiDxhZVWRQmgB/hmFxWZVdBfYI=","dc855VzKbZ3C0uEE8Y0J3EBH7rJisMY0O3dTsUOYRgY=","a95jtPTulju62VK+PhCeL4cucnRzgLbL8cudeGPnhmI=","fYiHptkH5stGiIn5lNcC3Ai/0fjnPHWmmHhv/sJJsuY=","/N66TS4x5oN6xxyJsNRBwLtUixNN3mX6mvW2RfsfciI=","xVmiSeFJmCkslGulIYb/x2nzuFccj+IFmGIdlCbk9uw=","XSTM/Mril+TDjU0Gq8YT4SBxjuKlBLva6Qnc2F8EPTE="],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){"use strict";var N=function(){return r()},C=function(e,t){return new m(e,t)},k=function(e,t,n){E(e,t,n)};return{Box2D:t,callNextFrame:n,registerTimer:h,network:{createSocket:s,performHttpRequest:o},AudioFactory:c,RenderingFactory:f,getHost:N,ModuleLoader:a,configurationOptions:g,platformDetails:w,jsonCoder:i,createInput:C,getAvailableScreenSize:u,registerOnScreenResize:k,openURL:b,createPersistentStorage:function(){return new y},createImageLoader:function(e,t,n,r,i,s){return new p(e,t,n,r,i,s)},createSoundLoader:function(e,t,n,r,i,s){return new d(e,t,n,r,i,s)},createTextLoader:function(e,t,n,r,i,s){return new v(e,t,n,r,i,s)},loadInterstitial:S.loadInterstitial,showInterstitial:S.showInterstitial,flurry:x,createComponentType:T,Application:e,createSplashScreenImage:l}}),define("v8fOdhNCtMEZStOrNxspT+wYpcqnI29sSZZku+1iaIw=",function(){"use strict";return function(e){return e.replace(/\./g,"/")}}),define("JPtYE/eGdg4cjudzm8i8oAteuVIDlvZVo7prxFGenWk=",["d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","v8fOdhNCtMEZStOrNxspT+wYpcqnI29sSZZku+1iaIw=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r){"use strict";var i=function(n,i){return r.reduce(n.getMetaDataRecordsByType("system"),function(n,s){var o=e(s.namespace,s.name),u=t(o);return r.contains(i,u)&&n.push(o),n},[])};return function(e,s){var o=t(s.id);define(o,s.moduleSource);var u=e.sceneManager,a=i(e.libraryManager,n.ModuleLoader.createDependentModules(o).concat(o));r.each(a,function(e){u.restartSystem(e)})}}),define("g0h4wSYJ6PckMghl1xKoDvvqjXOhL04NgsBPD/EzxEg=",function(){"use strict";return function(e,t){e.entityManager.updateEntityTemplate(t.definition)}}),define("t4YVpmpTWzX1X5zYtdZb+Qx3f48PbPKIu/Z/0trq9ZE=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(t){return e.reduce(t,function(e,t){return e.result[t]=e.index++,e},{index:0,result:{}}).result}}),define("AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=",["t4YVpmpTWzX1X5zYtdZb+Qx3f48PbPKIu/Z/0trq9ZE="],function(e){"use strict";var t=e(["SERVER_CONNECTION_ESTABLISHED","MESSAGE_RECEIVED","CLOCK_SYNC_ESTABLISHED","COMPONENT_CREATED","COMPONENT_UPDATED","ENTITY_CREATED","ENTITY_DESTROYED","ASSET_UPDATED","ACTION_STARTED","ACTION_STOPPED","SUBSCRIBE","UNSUBSCRIBE","RESOURCE_PROGRESS","RESOURCE_LOADING_COMPLETED","RESOURCE_ERROR","KEY_DOWN","KEY_UP","RENDER_UPDATE","LOGIC_UPDATE","CREATE_SCENE","DESTROY_SCENE","AVAILABLE_SCREEN_SIZE_CHANGED","SCREEN_RESIZE"]);return t.getNameById=function(e){for(var n in t){var r=t[n];if(e===r)return n}},t}),define("rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s=",function(){"use strict";return function(e){return e.replace(/\./g,"/")+".json"}}),define("Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=",function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,"SEMI-COLON":186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222,ANDROID_BACK:230}}),define("d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(t){var n=arguments.length;n===1?e.isArray(t)||(t=[t]):n>1&&(t=e.toArray(arguments));if(!t||t.length===0)throw"Error: Missing name and or namespace.";return e.reduce(t,function(e,t){return t===""?e:e+(e!==""?".":"")+t},"")}}),define("JscvW/UOc/LPuKzvXkfy4LGmZU+VdMCIs3LRZD33Ecg=",["d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";return function(n){if(!n)throw"Error: Missing argument 'scheme'.";return n+":"+e(t.toArray(arguments).slice(1))}}),define("ingT4RnRpUiJVUpqmIZzn0mb4bWOxvdCL7jVnvrEevs=",["JscvW/UOc/LPuKzvXkfy4LGmZU+VdMCIs3LRZD33Ecg=","bFOXtEjmXJ1lK4AExMZNtVOOBi6q4Gj93XmA7N0camQ=","Njtu1p/lIocQu9jigRUr61eNAmO/ZIR7GBcFv6RVQkk=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r){"use strict";var i=function(e,t,n,r,i,s){return s||(s=0),e+=s*2,t+=s*2,[i%n*e+s,Math.floor(i/n)*t+s]},s=function(e,t){var n=t.assetId,r=e.get(n);if(!r)return;return{type:t.subtype,resourceId:r.resourceId,spriteSheet:r,config:t.config,tilemapDimensions:[t.config.width,t.config.height],tilemapData:t.config.tileLayerData}},o=function(e,t){var n=t.assetId,s=e.get(n);if(!s)return;var o=s.config.frameWidth,u=s.config.frameHeight,a=s.config.innerPadding||0,f=Math.floor(s.config.textureWidth/(o+a*2)),l=Math.floor(s.config.textureHeight/(u+a*2)),c=r.size(t.config.frameIds),h=r.bind(i,null,o,u);return{type:t.subtype,resourceId:s.resourceId,frameDimensions:[o,u],frameDuration:t.config.duration/c,frameOffsets:r.map(t.config.frameIds,function(e){return h(f,l,e,a)}),numFrames:c}},u=function(e){return r.reduce(e.config,function(e,t,r){return e[n[r]]=t,e},{})},a=function(e,t){return r.each(e,function(e){r.each(e,t)})},f=function(e){var t=e.config;return a(t.animate,function(e){e.length=r.last(e.keyFrames).time}),{animate:t.animate,type:e.subtype,length:t.length}},l=function(e){var t=e.config.frameWidth,n=e.config.frameHeight,r=e.config.innerPadding||0,s=Math.floor(e.config.textureWidth/(t+r*2)),o=Math.floor(e.config.textureHeight/(n+r*2)),u=s*o,a=[],f=[];for(var l=0;l<u;l++)a[l]=i(t,n,s,o,l,r),f[l]=l;return{frameDimensions:[t,n],frames:f,frameOffsets:a,frameMaxX:s,frameMaxY:o,numFrames:u,config:e.config,type:e.subtype}},c=function(e,n){var r=n.file;if(!r)return;e.resourceId=t(n.namespace,r)};return function(t,n,i){var a=i?n:r.filter(n,function(n){return!t.has(e(n.subtype,n.namespace,n.name))});r.each(a,function(n){var r,i=n.subtype,s=e(i,n.namespace,n.name);i==="appearance"||i==="sound"?r={type:i}:i==="spriteSheet"?r=l(n):i==="font"?r={config:n.config,type:i}:i==="keyToActionMap"?r=u(n):i==="keyFrameAnimation"?r=f(n):i==="translation"&&(r={config:n.config,type:i}),c(r,n),r&&(r.assetId=s),t.add(s,r)}),r.each(n,function(n){var r=n.subtype;if(r==="animation"){var i=o(t,n);i&&t.add(e(r,n.namespace,n.name),i)}else if(r==="2dTileMap"){var u=s(t,n);u&&t.add(e(r,n.namespace,n.name),u)}})}}),define("+kMCuNhMJbCFFz81NxZMk0B1yxR7pTV+H67Y6qVKnvY=",function(){"use strict";return function(e,t){if(!t.resourceId)return;var n=e.get(t.resourceId);if(!n)return;t.resource=n}}),define("bFOXtEjmXJ1lK4AExMZNtVOOBi6q4Gj93XmA7N0camQ=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(e,t){return e.replace(/\./g,"/")+"/"+t}}),define("3NNm1Xr+NiUMHZ6h4rjokfmOhn1qi0l9m+2oT/bl0aI=",["bFOXtEjmXJ1lK4AExMZNtVOOBi6q4Gj93XmA7N0camQ=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";return function(n,r){var i=n.getValue("currentLanguage");return t.unique(t.reduce(r,function(t,n){if(!n.file)return t;var r;if(n.config&&n.config.localized){var s=n.file,o=s.substr(s.lastIndexOf(".")+1),u=n.name+"."+i+"."+o;r={libraryPath:e(n.namespace,n.file),libraryPathUrlUsedForLoading:e(n.namespace,u)}}else r=e(n.namespace,n.file);return t.concat(r)},[]))}}),define("u5BpngAz0+tckzBYKX+WqMrwRbSFVWFZXgiyYvS/F9Y=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(e,t){var n=e.substr(0,e.length-5);return t?n.split("/"):n.replace(/\//g,".")}}),define("UDKOzFuhCFMgpnBYA5n7LsFCrO6xRaePEI2Hi2gAn6I=",["u5BpngAz0+tckzBYKX+WqMrwRbSFVWFZXgiyYvS/F9Y=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(n){t.each(n,function(t,n){var r=e(n,!0);t.name=r.pop(),t.namespace=r.join(".")})};return n}),define("R53a2CoCf6ZWQXb0vgxuKSv7SedOWMWlQjMyqths10o=",["UDKOzFuhCFMgpnBYA5n7LsFCrO6xRaePEI2Hi2gAn6I=","3NNm1Xr+NiUMHZ6h4rjokfmOhn1qi0l9m+2oT/bl0aI=","+kMCuNhMJbCFFz81NxZMk0B1yxR7pTV+H67Y6qVKnvY=","ingT4RnRpUiJVUpqmIZzn0mb4bWOxvdCL7jVnvrEevs=","JscvW/UOc/LPuKzvXkfy4LGmZU+VdMCIs3LRZD33Ecg=","d0kh+S/Mnugahpa7NEEeOTSkLpvFA8csYgM4qOYvZS0=","bFOXtEjmXJ1lK4AExMZNtVOOBi6q4Gj93XmA7N0camQ=","rvasITs2FBDcIVclbnPocpNbQvHuu/vr/WHZ0WRVg5s=","AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f){"use strict";return function(n,l){var c=n.assetManager,h=n.configurationManager,p=l.definition,d=s(p.namespace,p.name),v=i(p.subtype,d),m=u(d),g={};g[m]=p,e(g),!p.file&&!p.assetId&&(r(c,g,!0),n.eventManager.publish([a.ASSET_UPDATED,p.subtype],[v])),p.file&&n.libraryManager.load(t(h,g),{isMetaDataLoad:!1,omitCache:!0,onLoadingCompleted:function(e){r(c,g,!0),n.libraryManager.addToCache(g);var t=c.getLibraryIdByResourceId(o(p.namespace,p.file)),i=f.reduce(t,function(e,t){var r=u(t);return e[r]=n.libraryManager.get(r),e},{});r(c,i,!0),c.injectResources(e),n.entityManager.refreshAssetReferences(c),n.eventManager.publish([a.ASSET_UPDATED,p.subtype],[v])}});if(p.assetId){var y=p.assetId;n.libraryManager.load([u(y.slice(y.indexOf(":")+1))],{omitCache:!0,onLoadingCompleted:function(e){r(c,e),n.libraryManager.load(t(h,e),{isMetaDataLoad:!1,omitCache:!0,onLoadingCompleted:function(e){r(c,g,!0),c.injectResources(e),n.entityManager.updateAssetReferences(v,c.get(v)),n.eventManager.publish([a.ASSET_UPDATED,p.subtype],[v])}})}})}}}),define("CIb1nJXpKt9CP41s6SRsDATeI6HHJLUDIDiadaxfLaQ=",["1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU=","R53a2CoCf6ZWQXb0vgxuKSv7SedOWMWlQjMyqths10o=","g0h4wSYJ6PckMghl1xKoDvvqjXOhL04NgsBPD/EzxEg=","JPtYE/eGdg4cjudzm8i8oAteuVIDlvZVo7prxFGenWk=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i){"use strict";return function(s){return e({updateAsset:i.bind(t,null,s),updateEntityTemplate:i.bind(n,null,s),updateScript:i.bind(r,null,s)})}}),define("yK0eyZyMwZiwjPdm7fwzZv0BMUD7E0HxS/8Ny9G525k=",["1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU="],function(e){"use strict";return function(t){return e({reassign:function(e){t.entityManager.reassignEntity(e.entityId,e.parentEntityId)},create:function(e){t.entityManager.createEntity(e.entityConfig)},remove:function(e){t.entityManager.removeEntity(e.entityId)}})}}),define("ZHY+SwV0SqzACJlEpd4XnqkDmP62fi13m3DTq4evdB8=",["1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU="],function(e){"use strict";return function(t){return e({add:function(e){t.entityManager.addComponent(e.entityId,e.componentId)},remove:function(e){t.entityManager.removeComponent(e.entityId,e.componentId)},update:function(e){var n=t.entityManager.updateComponent(e.entityId,e.componentId,e.config);n||t.logger.error("Could not update component '"+e.componentId+"' in entity "+e.entityId+".")}})}}),define("sue5lkVBqzKvL6Fk30ca23hDErzVxAbUl2Dno2KmJ/s=",["PF35L31cTrPY3rM0h3RsHDbSwWkzDUR3A+sTdxOq1so="],function(e){return e}),define("wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk=",["sue5lkVBqzKvL6Fk30ca23hDErzVxAbUl2Dno2KmJ/s="],function(e){var t={};return t.isArray=e.isArray,t.isObject=e.isObject,t.size=e.size,t.toArray=e.toArray,t.each=e.each,t.map=e.map,t.last=e.last,t.filter=e.filter,t.has=e.has,t.any=e.any,t.find=e.find,t.times=e.times,t.extend=e.extend,t.all=e.all,t.range=e.range,t.reduce=e.reduce,t.bind=e.bind,t.reject=e.reject,t.clone=e.clone,t.defaults=e.defaults,t.indexOf=e.indexOf,t.isString=e.isString,t.isEmpty=e.isEmpty,t.keys=e.keys,t.isFunction=e.isFunction,t.contains=e.contains,t.invoke=e.invoke,t.flatten=e.flatten,t.pick=e.pick,t.union=e.union,t.difference=e.difference,t.values=e.values,t.unique=e.unique,t.initial=e.initial,t.pluck=e.pluck,t.zip=e.zip,t.after=e.after,t.intersection=e.intersection,t.isNaN=e.isNaN,t.identity=e.identity,t}),define("1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(e,t){t.charAt(0)==="."&&(t=t.substring(1));for(var n in e)if(t.lastIndexOf(n,0)===0)return n},n=function(e,t){return e.substring(t.length+1)};return function(e){return function(r,i,s){s||(s="");var o=t(e,i),u=e[o];if(!u)throw"Error: No handler for message with id '"+s+(s!==""?".":"")+i+"' found.";var a=n(i,o);u(r,a,s+o)}}}),define("0MEJAKZhgW4wQXJQv1R8sjWX6wvfv8nXtDUaZjRQxdw=",["1DRR6y6gIWNLBlHrm9gvioJqj6qz1R6BjAgtWBJ3+tU=","ZHY+SwV0SqzACJlEpd4XnqkDmP62fi13m3DTq4evdB8=","yK0eyZyMwZiwjPdm7fwzZv0BMUD7E0HxS/8Ny9G525k=","CIb1nJXpKt9CP41s6SRsDATeI6HHJLUDIDiadaxfLaQ=","Zt4dDF5B0lgdwIfuUagRZUHqy70yWlr5e3mCP8+h4ik=","1rqqQwDriBtxhdpQLfU1QbOSpXNz0qE31+5K46MrYeE=","ChYbCQykZBon8Ii54rxrAyc7zW54QvlnvqLfW3nPjN0="],function(e,t,n,r,i,s,o){"use strict";return function(u,a){return e({"spell.debug.component":t(u),"spell.debug.entity":n(u),"spell.debug.library":r(u),"spell.debug.application":i(u,a),"spell.debug.settings":s(u),"spell.debug.system":o(u)})}}),define("spell/client/main",["0MEJAKZhgW4wQXJQv1R8sjWX6wvfv8nXtDUaZjRQxdw=","IB9jfUoKNrdRjZqEIu7wNHEnyBRP4i1RaGStmBOiBQQ=","C20TozIGoGYLzcTFVqaYDwSi189PvKkTfxhBjT84cFc=","/onvXG9VhyKIuG0Hn1bR4/mu3mvWKrL3S9G1yf5s9Bs=","7PhHlzIXiau/l87zhE3bIdhsPohgmy+yJQROuFXc0Uw=","PbOCcvOCWKv40wXBycm4YMYdhAZoomihBhjVpxWEQTk=","OINaBjfKqIjxReAWCGJlr0Uba7I0iYH8VHNPNtHxuOA=","Qpj+fizmi2T5BUE0zCUFDzTWLiVETxC7mbwnh7FRpaU=","GSV7+xwIB59dg5QN6WD1h1rWzVc9OwabH1SWt8Pk1c4=","6LWBMS9D/d2r0J5+eQvSlL9x6G8sa+U+ODk4ht82dGw=","5DXS8p6p/6XPSVo/sZHjU842Rl9MoWWPVu5I+ZXlneQ=","hil8xb1IimJN9xLR8nPd5HFdl6J0s1wfcAnkDTTWJEw=","aa1pimqD6igbBAjIMosAzz91SOAoYOjfpQNmoIqX0iE=","QGfnGX0u4msE+kZC/56cY/9TOvn7ZCzFFI10N1Erczg=","x81J/Fr9o8YgVYUYkA4GBLPAGmW4ok/0zW45f+sTXe4=","Y+HrMll7Ng4+i8ynbZkdI2CDky7Ts7kFhGQCNWGqGQw=","6E1ZytdZjwLqo2bG9x406AH0yHwVEopZ8vwpGvxsZyM=","31xs7IP9/9HMl0FlArPRi/p/6e1y56BYxsmywdBgw2Y=","vV8JUbcAFKwRw0kj9C+z03trX9WutPyp4SJONZGPilU=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){"use strict";var E=function(e,t){var i=this.spell,a=i.configurationManager,f=i.libraryManager;n(i,a,e,e.config,i.loaderConfig),i.logger.setSendMessageToEditor(this.sendMessageToEditor),t&&f.addToCache(t);var c=m.RenderingFactory.createContext2d(i.eventManager,a.getValue("id"),a.getValue("currentScreenSize")[0],a.getValue("currentScreenSize")[1],a.getValue("renderingBackEnd"));m.registerOnScreenResize(i.eventManager,a.getValue("id"),a.getValue("screenSize")),i.logger.debug("created rendering context ("+c.getConfiguration().type+")");var p=m.AudioFactory.createAudioContext(a.getValue("audioBackEnd"));i.logger.debug("created audio context ("+p.getConfiguration().type+")"),i.libraryManager.init(p,c);var d=new u(f),g=a.getValue("mode")!=="deployed",w=h(f,g,a.getValue("libraryUrl")),E=new s(i,a,d,i.eventManager,f,w);E.init();var S=new o(i,E,i.statisticsManager,f,i.mainLoop,this.sendMessageToEditor,g),x=b.bind(y,null,f,a.getValue("currentLanguage")),T=new l(a,c);T.init(),i.audioContext=p,i.assetManager=d,i.configurationManager=a,i.moduleLoader=w,i.entityManager=E,i.box2dContext=v(),i.box2dWorlds={},i.renderingContext=c,i.sceneManager=S,i.sendMessageToEditor=this.sendMessageToEditor,i.translate=x,i.inputManager=T,i.logger.debug("client started");var N=function(){i.sceneManager.startScene(i.applicationModule.startScene,{},!g),i.mainLoop.run()};e.environment&&e.environment.forceSplashScreen?r(i,N):N()},S=function(t){var n={},r=new d,s=new f,o=new a(s),u=new p,l=i(s,u);o.setConfig(t),u.init(),n.applicationModule=undefined,n.configurationManager=o,n.eventManager=s,n.libraryManager=new c(s,o.getValue("libraryUrl")),n.loaderConfig=t,n.logger=r,n.mainLoop=l,n.registerTimer=m.registerTimer,n.scenes={},n.statisticsManager=u,n.storage=m.createPersistentStorage(),this.spell=n,t.mode!=="deployed"&&(r.setLogLevel(r.LOG_LEVEL_DEBUG),g(r),this.debugMessageHandler=e(n,b.bind(this.start,this)))},x=function(){this.spell,this.debugMessageHandler,this.sendMessageToEditor,S.call(this,w)};return x.prototype={start:E,setSendMessageToEditor:function(e){this.sendMessageToEditor=e},sendDebugMessage:function(e){this.debugMessageHandler(e.payload,e.type)}},new x})
define("bIKOt9oMElIV0GQpgfiDxhZVWRQmgB/hmFxWZVdBfYI=",["Rqnl9uR1tE4G1Lyk4TB8grgxZMe1xbfJ6SvbIGe/tXc=","kz6mGZqctmGqFpIo4ee1PkfgdV6bvZqRZwqfNNljmR4="],function(e,t){"use strict";var n=function(){return"localStorage"in window&&window.localStorage!==null},r=function(){this.storage=n()?new t:new e};return r.prototype={set:function(e,t){this.storage.set(e,t)},get:function(e){return this.storage.get(e)},clear:function(e){this.storage.clear(e)}},r}),define("kz6mGZqctmGqFpIo4ee1PkfgdV6bvZqRZwqfNNljmR4=",["d8EmzfMdacPwVA8q/9RH9S3FyRT4sLHWQvvJXf1v8Wc=","/1QwQ8R0kAELspzyqhnCYBdgiOOc2QieRZJp3FNY/v0="],function(e,t){"use strict";var n="SpellJS-",r=function(){this.store=window.localStorage};return r.prototype={clear:function(e){this.store.removeItem(n+e)},set:function(e,r){if(r===undefined||r===null)return;this.store.setItem(n+e,t(r))},get:function(t){return e(this.store.getItem(n+t))}},r}),define("/1QwQ8R0kAELspzyqhnCYBdgiOOc2QieRZJp3FNY/v0=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(n){var r="",i=0,s,o,u;if(n==null)return"e:1";if(typeof n=="number")s="n:"+n;else if(typeof n=="boolean")s="b:"+(n?"1":"0");else if(e.isArray(n)){for(o=n.length;i<o;i++)r+=t(n[i]),i!=o-1&&(r+="^");s="a:"+r}else if(typeof n=="object"){for(u in n)typeof n[u]!="function"&&n[u]!==undefined&&(r+=u+"="+t(n[u])+"^");s="o:"+r.substring(0,r.length-1)}else s="s:"+n;return escape(s)};return t}),define("d8EmzfMdacPwVA8q/9RH9S3FyRT4sLHWQvvJXf1v8Wc=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(e){var n=/^(a|n|b|s|o|e)\:(.*)$/,r=n.exec(unescape(e)),i,s,o,u,a,f;if(!r||!r[1])return;s=r[1],e=r[2];switch(s){case"e":return null;case"n":return parseFloat(e);case"b":return e=="1";case"a":i=[];if(e!=""){u=e.split("^"),a=u.length;for(f=0;f<a;f++)e=u[f],i.push(t(e))}return i;case"o":i={};if(e!=""){u=e.split("^"),a=u.length;for(f=0;f<a;f++)e=u[f],o=e.split("="),i[o[0]]=t(o[1])}return i;default:return e}};return t}),define("Rqnl9uR1tE4G1Lyk4TB8grgxZMe1xbfJ6SvbIGe/tXc=",["d8EmzfMdacPwVA8q/9RH9S3FyRT4sLHWQvvJXf1v8Wc=","/1QwQ8R0kAELspzyqhnCYBdgiOOc2QieRZJp3FNY/v0="],function(e,t){"use strict";var n="SpellJS-",r=function(){var e=this;e.path="/",e.expires=new Date((new Date).getTime()+6048e5),e.domain=null,e.secure=!1,e.state=e.readCookies()};return r.prototype={clear:function(e){this.clearCookie(e)},set:function(e,t){var n=this;n.clear(e);if(t===undefined||t===null)return;n.setCookie(e,t)},get:function(t){return e(this.state[n+t])},readCookies:function(){var t={},r=document.cookie+";",i=/\s?(.*?)=(.*?);/g,s=n.length,o,u,a;while((o=i.exec(r))!=null)u=o[1],a=o[2],u&&u.substring(0,s)==n&&(t[u.substr(s)]=e(a));return t},setCookie:function(e,r){var i=this,s=n+e;document.cookie=s+"="+t(r)+(i.expires==null?"":"; expires="+i.expires.toGMTString())+(i.path==null?"":"; path="+i.path)+(i.domain==null?"":"; domain="+i.domain)+(i.secure==1?"; secure":""),i.state[s]=r},clearCookie:function(e){var t=this,r=n+e;document.cookie=r+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(t.path==null?"":"; path="+t.path)+(t.domain==null?"":"; domain="+t.domain)+(t.secure==1?"; secure":""),delete t.state[r]}},r}),define("a95jtPTulju62VK+PhCeL4cucnRzgLbL8cudeGPnhmI=",["W6mNTkG1uX1DfWZaeMz1+GwvmmB1bDZm3iM3gY0QyR4=","z+qR2YKjhvFUFs3XpLlrgIbKUfoFmWoR3c1/5yaCnVA=","csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc=","dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU=","l9dSFVp1qo6eP3hR340CJSWXAetRnpxaVzMXOT2OcB8="],function(e,t,n,r,i){"use strict";if(r)var s=i.decode(NATIVE.device.native_info);return{hasPlentyRAM:function(){return!(t||n||r)},hasTouchSupport:function(){return e.hasWebkitTouchApi()||e.hasPointerTouchApi()},getOS:function(){if(t){var e=navigator.userAgent.split(",");return e[0]+" "+e[1].trim()}return n?"iOS "+navigator.userAgent.match(/([\.\d]+)\)$/)[1]:r?"Android "+s.versionRelease:navigator.platform},getPlatformAdapter:function(){return t?"cocoonjs":n?"ejecta":r?"gameclosure":"html5"},getPlatform:function(){return t?navigator.appVersion:navigator.userAgent},getDevice:function(){return t?navigator.platform:n?navigator.userAgent.match(/\((.*);/)[1]:r?s.model+", "+s.manufacturer:"unknown"},getScreenHeight:function(){return screen.height},getScreenWidth:function(){return screen.width},isMobileDevice:function(){return t||n||r}}}),define("dc855VzKbZ3C0uEE8Y0J3EBH7rJisMY0O3dTsUOYRgY=",["z+qR2YKjhvFUFs3XpLlrgIbKUfoFmWoR3c1/5yaCnVA=","csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc="],function(e,t){"use strict";return function(n,r){t?ejecta.openURL(n,r):e?CocoonJS.App.openURL(n):window.open(n,r)}}),define("0N5cGXariGqD4N3whA0u6kiS5RWgC/2hQRDInlWP/YE=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(t){return e.map(t,function(e,t){return t+"="+encodeURIComponent(e)}).join("&")},n=function(){return typeof XDomainRequest=="undefined"?new XMLHttpRequest:new XDomainRequest},r=function(r,i,s,o,u){var a=n();return o&&(a.onreadystatechange=function(){this.readyState==4&&this.status==200&&o(this.responseText)}),e.size(s)>0&&r=="GET"&&(i+="?"+t(s)),u&&(a.onerror=function(e){u("Error while accessing "+i+".")}),a.open(r,i,!0),a},i=function(e,n,i,s,o){if(!e)throw"method is undefined.";if(e!=="GET"&&e!=="POST")throw"The provided method is not supported.";if(!n)throw"url is undefined.";var u=r(e,n,i,s,o);e==="POST"?(u.setRequestHeader&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(t(i))):u.send()};return i}),define("Di30uWqRYAwyqAdAxFmRqw86a8D7ltvaWwld3nnR01Q=",function(){"use strict";return function(e){var t=window.MozWebSocket||window.WebSocket,n=new t("ws://"+e+"/","socketrocket-0.1");return{send:function(e){n.send(e)},setOnMessage:function(e){n.onmessage=function(t){e(t.data)}},setOnConnected:function(e){n.onopen=function(t){e(t.data)}}}}}),define("wspZzshkZyWF8MhE/MwHByCOFh6eOue2ZqHunVz8+I8=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";return function(e){console.originalLog?console.originalLog(e):console.log(e)}}),define("rEYqh2GBvinjduCyGsbv4n9mKgNnKE+azLg9e1q6fUw=",["AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(e){if(this.loaded===!0)return;this.loaded=!0;var t=e.response||e.responseText;if(e.status!==200&&e.status!==0){r.call(this,t);return}this.onLoadCallback(this.postProcess?this.postProcess(t):t)},r=function(e){this.onErrorCallback(e)},i=function(e){if(e.readyState!==4)return;n.call(this,e)},s=function(e,t,n,r,i){this.postProcess=e,this.libraryUrl=t,this.libraryPath=n,this.onLoadCallback=r,this.onErrorCallback=i,this.loaded=!1};return s.prototype={start:function(){var e=this.libraryUrl?this.libraryUrl+"/"+this.libraryPath:this.libraryPath,s=new XMLHttpRequest;s.onload=t.bind(n,this,s),s.onreadystatechange=t.bind(i,this,s),s.onerror=t.bind(r,this),s.open("GET",e,!0),s.send()}},s}),define("3ZSQGM1c2BAMKa3dbHQCHrSWm3fXxxnzR+a5MWv/xdg=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(e){if(this.loaded===!0)return;this.loaded=!0,this.onLoadCallback(this.audioContext.createSound(e))},n=function(e,t,n,r,i,s){this.audioContext=e,this.libraryUrl=t,this.libraryPath=n,this.onLoadCallback=r,this.onErrorCallback=i,this.loaded=!1};return n.prototype={start:function(){this.audioContext.loadBuffer(this.libraryUrl?this.libraryUrl+"/"+this.libraryPath:this.libraryPath,e.bind(t,this))}},n}),define("XRz6ZY1jo28yLiT686aBwTBcr94D/v97NQM1Ti3dvCQ=",["AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(e){e.onload=null,e.onreadystatechange=null,e.onerror=null},r=function(e){if(this.loaded===!0)return;this.loaded=!0,n(e),this.onLoadCallback(this.renderingContext.createTexture(e))},i=function(e,t){n(e),this.onErrorCallback(t)},s=function(e){e.readyState==="complete"&&e.onload(e)},o=function(e,t,n,r,i,s){this.renderingContext=e,this.libraryUrl=t,this.libraryPath=n,this.onLoadCallback=r,this.onErrorCallback=i,this.loaded=!1};return o.prototype={start:function(){var e=new Image;e.onload=t.bind(r,this,e),e.onreadystatechange=t.bind(s,this,e),e.onerror=t.bind(i,this,e),e.src=this.libraryUrl?this.libraryUrl+"/"+this.libraryPath:this.libraryPath}},o}),define("l9dSFVp1qo6eP3hR340CJSWXAetRnpxaVzMXOT2OcB8=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=e.bind(JSON.stringify,JSON),n=e.bind(JSON.parse,JSON);return{encode:t,decode:n}}),define("IkN6+YJ+tVtroMrc21U5X4xPesbZSx7cE6V/6aB9JXo=",function(){"use strict";return typeof window!="undefined"&&!!navigator&&!!document}),define("J19VukA9OHTe67LZyXj0g0dFAjqaCGG1/kxNYjbMFWo=",function(){"use strict";return function(e){console.originalLog=console.log,console.log=function(){if(console.originalLog){console.log=console.originalLog,delete console.originalLog;var t="console.log can be only used during development because it is not cross-platform save. Be sure to remove this call when you finished your debugging. Use the spell.logger function to enable cross-platform logging.";e.warn(t),console.warn(t),console.log.apply(this,arguments)}},window&&(window.onerror=function(t,n,r){return e.error("'"+t+"' in "+n+":"+r),!0})}}),define("fYiHptkH5stGiIn5lNcC3Ai/0fjnPHWmmHhv/sJJsuY=",["AHznaobFqalp2i3u1DutC/Z4nV5oIF9wXHFZ6WRB9v4=","B6cZIUtIjiQAeBHS1O6wHTUXCz5h3Y0N1v4W5ubpfb8=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(){var e=document.getElementsByTagName("meta");for(var t=0,n=e.length,r;t<n;t++){r=e[t];if(r.name==="viewport")return r}},i=function(e,t){var n=r();if(!n)return;n.setAttribute("content","width=device-width, user-scalable=0, initial-scale="+e+", maximum-scale="+t+"")},s=[{userAgentKeywords:["iPhone","iPod"],initialScale:.5,maximumScale:.5},{userAgentKeywords:["iPad"],initialScale:1,maximumScale:1}],o=function(e){return n.find(s,function(t){return n.any(t.userAgentKeywords,function(t){return e.match(new RegExp(t,"i"))})})};return function(n,r,s){var u=function(){window.scrollTo&&window.scrollTo(0,0),n.publish(e.AVAILABLE_SCREEN_SIZE_CHANGED,[r?t(r):s])},a=o(navigator.userAgent);a&&i(a.initialScale,a.maximumScale),window.addEventListener("resize",u,!0),window.addEventListener("orientationchange",u,!0),u()}}),define("DWjfraEDo+q/rkwKZatllctI/GyXlkj18Gl5WEXSF9A=",function(){"use strict";return{encode:function(e){var t=0,n=e[0],r=[];for(var i=0,s,o=e.length;i<o;i++)s=e[i],s!=n?(r.push(t),r.push(n),n=s,t=1):t++;return t>0&&(r.push(t),r.push(n)),r},decode:function(e){var t=[];for(var n=0,r,i,s=e.length;n<s;n+=2){r=e[n],i=e[n+1];for(var o=0;o<r;o++)t.push(i)}return t}}}),define("7lrsAcIJ54z2DGiA+VzPHPCwn4wrYCSbrHjhffGTNvI=",["dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU=","DWjfraEDo+q/rkwKZatllctI/GyXlkj18Gl5WEXSF9A="],function(e,t){"use strict";var n=function(e,t,n){var r=e.data;for(var i=0,s,o,u=n;i<u;i++)s=i*3,o=i*4,r[o]=t[s],r[o+1]=t[s+1],r[o+2]=t[s+2],r[o+3]=255};return function(){if(e)return;var r=[69369,0,3,19,3,21,18,0,3,19,3,21,738,0,3,38,3,42,18,0,3,38,3,42,738,0,3,38,3,42,18,0,3,38,3,42,588,0,3,38,3,32,3,28,3,39,3,31,3,4,6,0,3,1,3,25,3,38,3,39,3,26,3,1,3,0,3,31,3,42,3,12,3,0,3,38,3,42,3,37,3,0,3,13,3,42,3,30,3,0,3,1,3,25,3,38,3,39,3,26,3,2,3,0,3,38,3,32,3,29,3,42,3,0,3,1,3,25,3,38,3,39,3,26,3,2,6,0,3,25,3,39,3,31,3,39,3,42,18,0,3,38,3,42,3,27,3,39,3,31,3,3,3,0,3,38,3,42,3,4,3,0,3,21,3,42,3,20,552,0,3,38,3,42,6,25,3,42,3,27,6,0,3,23,3,42,3,25,3,24,3,42,3,23,3,0,3,22,3,42,3,18,3,5,3,42,3,34,3,42,3,4,3,19,3,42,3,21,3,0,3,22,3,42,3,20,3,19,3,42,3,24,3,0,3,38,3,42,3,38,3,36,3,0,3,22,3,42,3,20,3,19,3,42,3,24,3,0,3,22,3,42,3,29,3,24,3,41,3,42,18,0,3,38,3,42,3,24,3,26,3,42,3,26,3,0,3,22,3,42,3,16,3,0,3,30,3,42,3,7,552,0,3,38,3,42,6,0,3,41,3,36,6,0,3,35,3,41,6,0,3,41,3,35,3,0,3,13,3,42,3,23,3,14,3,42,3,17,3,42,3,13,3,25,3,42,3,12,3,0,3,35,3,40,6,0,3,40,3,35,3,0,3,38,3,42,9,0,3,35,3,40,6,0,3,40,3,35,3,0,3,34,3,42,3,1,3,0,3,38,3,42,18,0,3,38,3,42,3,0,3,2,3,42,3,35,3,0,3,5,3,42,3,28,3,0,3,40,3,36,555,0,3,38,3,42,6,0,3,39,3,40,6,0,3,40,3,39,6,0,3,39,3,40,3,0,3,3,3,42,3,28,3,23,3,40,3,2,3,41,3,22,3,30,3,42,3,2,3,0,3,40,3,42,9,39,3,38,3,0,3,38,3,42,9,0,3,40,3,42,9,39,3,38,3,0,3,40,3,39,6,0,3,38,3,42,18,0,3,38,3,42,6,0,3,39,3,40,6,0,3,30,3,39,3,9,3,42,3,23,555,0,3,38,3,42,3,0,3,1,3,42,3,34,6,0,3,35,3,42,6,1,3,42,3,35,6,0,3,36,3,33,3,31,3,32,3,0,3,34,3,29,6,35,6,0,3,34,3,40,3,1,12,0,3,38,3,42,9,0,3,34,3,40,3,1,12,0,3,35,3,41,6,0,3,38,3,42,18,0,3,38,3,42,3,0,3,2,3,42,3,34,6,0,3,13,3,42,3,29,3,42,3,10,555,0,3,38,3,42,3,20,3,26,3,42,3,23,6,0,3,23,3,42,6,26,3,42,3,23,6,0,3,27,6,38,3,24,3,0,3,25,3,37,3,40,3,26,6,0,3,22,3,42,3,33,3,24,3,30,3,19,3,0,3,38,3,42,9,0,3,22,3,42,3,33,3,24,3,30,3,19,3,0,3,25,3,42,3,27,3,24,3,41,3,42,18,0,3,38,3,42,3,16,3,27,3,42,3,22,9,0,3,38,3,42,3,38,558,0,3,38,6,42,3,39,3,27,3,1,6,0,3,1,3,26,6,39,3,26,3,1,6,0,3,18,6,42,3,15,3,0,3,16,6,42,3,17,9,0,3,24,3,38,3,40,3,35,3,15,3,0,3,38,3,42,12,0,3,24,3,38,3,40,3,35,3,15,3,0,3,3,3,30,3,39,3,31,3,33,3,42,18,0,3,27,3,35,3,40,3,39,3,25,12,0,3,22,3,42,3,25,558,0,3,38,3,42,195,0,3,20,3,42,3,12,558,0,3,38,3,42,189,0,3,22,3,24,3,39,3,38,3,1,558,0,3,38,3,42,189,0,3,25,3,39,3,34,3,12,1809,0,3,48,3,74,762,0,3,74,3,186,27,0,3,48,3,111,729,0,3,8,3,240,3,9,24,0,3,182,3,104,732,0,3,195,3,74,21,0,3,74,3,206,3,2,732,0,3,119,3,134,18,0,3,6,3,219,3,72,735,0,3,59,3,210,18,0,3,120,3,180,294,0,3,50,3,101,3,119,3,118,6,119,3,102,3,50,174,0,3,187,12,255,3,118,18,0,3,187,12,255,3,118,30,0,1,17,1,12,1,9,1,68,1,51,1,36,1,67,1,51,1,36,1,68,1,51,1,36,1,68,1,51,1,36,1,68,1,51,1,36,1,68,1,51,1,36,1,68,1,51,1,36,1,17,1,12,1,8,33,0,1,67,1,46,1,27,1,118,1,81,1,47,1,118,1,80,1,46,1,119,1,79,1,44,1,119,1,78,1,42,1,119,1,77,1,41,1,119,1,77,1,39,1,67,1,43,1,21,1,16,1,10,1,5,75,0,3,3,3,20,18,0,3,90,3,35,285,0,3,17,3,119,3,238,24,255,3,238,3,119,168,0,3,186,12,255,3,119,18,0,3,186,12,255,3,119,30,0,1,68,1,50,1,34,1,255,1,190,1,131,1,255,1,190,1,131,1,255,1,189,1,130,1,255,1,190,1,131,1,255,1,190,1,131,1,255,1,189,1,130,1,255,1,189,1,130,1,68,1,50,1,34,24,0,1,67,1,47,1,29,1,169,1,118,1,70,1,255,1,176,1,104,1,255,1,174,1,101,1,255,1,172,1,98,1,255,1,170,1,94,1,255,1,169,1,91,1,255,1,167,1,88,1,255,1,165,1,84,1,255,1,164,1,81,1,255,1,162,1,78,1,255,1,160,1,74,1,221,1,136,1,61,1,135,1,83,1,35,1,16,1,10,1,4,42,0,3,14,333,0,3,50,3,238,33,255,3,187,168,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,67,1,49,1,32,1,255,1,186,1,124,1,255,1,187,1,125,1,255,1,186,1,124,1,255,1,187,1,125,1,255,1,186,1,124,1,255,1,186,1,123,1,255,1,186,1,123,1,68,1,49,1,32,18,0,1,17,1,11,1,7,1,153,1,105,1,64,1,255,1,176,1,104,1,255,1,174,1,101,1,255,1,172,1,98,1,255,1,171,1,96,1,255,1,170,1,93,1,255,1,168,1,90,1,255,1,167,1,87,1,255,1,165,1,84,1,255,1,163,1,80,1,255,1,161,1,77,1,255,1,160,1,74,1,255,1,158,1,71,1,255,1,156,1,67,1,255,1,155,1,65,1,67,1,40,1,16,39,0,3,39,3,234,3,114,3,6,324,0,3,50,3,238,36,255,3,187,168,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,48,1,31,1,255,1,183,1,118,1,255,1,183,1,118,1,255,1,183,1,118,1,255,1,183,1,118,1,255,1,183,1,118,1,255,1,182,1,117,1,255,1,182,1,116,1,67,1,48,1,30,18,0,1,203,1,139,1,81,1,255,1,175,1,102,1,255,1,173,1,99,1,255,1,171,1,96,1,255,1,170,1,94,1,255,1,169,1,91,1,255,1,167,1,88,1,255,1,166,1,85,1,255,1,164,1,82,1,255,1,163,1,79,1,255,1,161,1,76,1,255,1,159,1,73,1,255,1,158,1,70,1,255,1,156,1,67,1,255,1,155,1,64,1,255,1,153,1,61,1,67,1,40,1,15,42,0,3,36,3,182,3,219,3,80,321,0,3,186,18,255,3,187,3,118,3,119,3,186,3,238,6,255,3,187,168,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,47,1,29,1,255,1,179,1,111,1,255,1,180,1,112,1,255,1,180,1,112,1,255,1,180,1,112,1,255,1,179,1,111,1,255,1,179,1,111,1,255,1,179,1,110,1,67,1,46,1,28,15,0,1,119,1,81,1,46,1,255,1,172,1,98,1,255,1,171,1,96,1,255,1,170,1,94,1,255,1,169,1,92,1,255,1,168,1,89,1,255,1,167,1,87,1,255,1,165,1,84,1,255,1,163,1,80,1,255,1,162,1,78,1,255,1,160,1,75,1,255,1,159,1,72,1,255,1,158,1,70,1,255,1,156,1,66,1,255,1,155,1,64,1,255,1,153,1,61,1,255,1,151,1,58,1,67,1,39,1,14,48,0,3,72,3,212,3,188,3,3,9,0,3,36,3,184,3,42,36,0,3,3,3,68,3,11,249,0,3,67,15,255,3,204,3,33,15,0,3,50,3,119,3,101,168,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,47,1,27,1,255,1,177,1,106,1,255,1,177,1,106,1,255,1,177,1,106,1,255,1,177,1,106,1,255,1,177,1,106,1,255,1,176,1,105,1,255,1,176,1,105,1,67,1,46,1,27,12,0,1,34,1,23,1,12,1,255,1,171,1,96,1,255,1,170,1,93,1,255,1,169,1,91,1,255,1,168,1,89,1,255,1,166,1,86,1,255,1,165,1,84,1,255,1,164,1,81,1,255,1,163,1,79,1,255,1,161,1,77,1,255,1,159,1,73,1,255,1,158,1,71,1,255,1,157,1,69,1,255,1,156,1,66,1,255,1,154,1,63,1,255,1,153,1,60,1,255,1,151,1,57,1,255,1,150,1,55,1,67,1,39,1,13,51,0,3,2,3,63,12,0,3,169,3,240,3,254,3,157,3,15,21,0,3,44,3,120,3,182,3,246,3,197,3,35,249,0,3,118,12,255,3,238,3,17,195,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,46,1,26,1,255,1,174,1,100,1,255,1,174,1,100,1,255,1,174,1,100,1,255,1,174,1,100,1,255,1,174,1,100,1,255,1,173,1,99,1,255,1,172,1,98,1,67,1,45,1,26,12,0,1,119,1,78,1,43,1,255,1,168,1,89,1,255,1,167,1,88,1,255,1,166,1,86,1,255,1,165,1,84,1,255,1,164,1,82,1,255,1,163,1,79,1,255,1,161,1,77,1,238,1,149,1,70,1,102,1,63,1,29,1,33,1,21,1,8,3,0,1,50,1,31,1,13,1,101,1,61,1,24,1,135,1,80,1,31,1,204,1,121,1,45,1,255,1,149,1,54,1,255,1,148,1,51,1,67,1,39,1,13,66,0,3,60,3,227,6,255,3,248,3,245,3,109,3,3,12,0,3,89,3,218,3,143,3,77,3,14,255,0,3,187,12,255,3,153,198,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,45,1,25,1,255,1,170,1,94,1,255,1,170,1,94,1,255,1,170,1,94,1,255,1,170,1,94,1,255,1,170,1,94,1,255,1,170,1,94,1,255,1,170,1,93,1,67,1,45,1,24,12,0,1,153,1,100,1,52,1,255,1,165,1,84,1,255,1,165,1,83,1,255,1,164,1,81,1,255,1,163,1,79,1,255,1,161,1,77,1,255,1,160,1,74,1,255,1,159,1,73,1,51,1,31,1,14,21,0,1,34,1,19,1,6,1,68,1,39,1,13,1,17,1,9,1,3,63,0,3,3,3,213,3,251,12,255,3,204,3,116,282,0,3,187,12,255,3,119,48,0,3,67,6,118,6,119,3,0,3,16,3,119,3,204,12,255,3,187,3,135,3,33,39,0,3,17,3,119,3,187,3,238,9,255,3,238,3,186,3,119,3,34,30,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,44,1,23,1,255,1,168,1,89,1,255,1,168,1,89,1,255,1,167,1,88,1,255,1,167,1,88,1,255,1,167,1,88,1,255,1,167,1,88,1,255,1,167,1,87,1,67,1,44,1,23,12,0,1,186,1,120,1,59,1,255,1,163,1,80,1,255,1,162,1,78,1,255,1,161,1,77,1,255,1,160,1,74,1,255,1,159,1,73,1,255,1,158,1,70,1,204,1,125,1,54,96,0,3,105,3,223,12,255,3,241,3,230,3,11,282,0,3,186,12,255,3,153,48,0,3,118,12,255,3,118,3,238,27,255,3,118,33,0,3,84,3,238,27,255,3,238,3,102,27,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,43,1,21,1,255,1,165,1,83,1,255,1,165,1,84,1,255,1,165,1,83,1,255,1,165,1,83,1,255,1,165,1,83,1,255,1,165,1,83,1,255,1,164,1,82,1,67,1,43,1,21,12,0,1,187,1,118,1,56,1,255,1,160,1,74,1,255,1,159,1,73,1,255,1,158,1,71,1,255,1,158,1,70,1,255,1,157,1,68,1,255,1,156,1,66,1,204,1,124,1,51,93,0,3,18,3,242,15,255,3,203,3,89,285,0,3,169,12,255,3,238,3,17,45,0,3,118,48,255,3,119,27,0,3,84,39,255,3,102,24,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,42,1,20,1,255,1,161,1,77,1,255,1,163,1,79,1,255,1,162,1,78,1,255,1,162,1,78,1,255,1,162,1,78,1,255,1,161,1,77,1,255,1,161,1,77,1,67,1,42,1,20,12,0,1,186,1,115,1,51,1,255,1,158,1,70,1,255,1,157,1,69,1,255,1,156,1,67,1,255,1,156,1,66,1,255,1,155,1,64,1,255,1,153,1,61,1,255,1,153,1,60,1,50,1,29,1,11,90,0,3,151,3,234,12,255,3,228,3,195,288,0,3,119,15,255,3,204,3,17,42,0,3,119,24,255,3,238,3,186,21,255,3,33,21,0,3,17,3,238,15,255,3,169,3,119,3,186,15,255,3,238,3,33,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,42,1,19,1,255,1,159,1,73,1,255,1,159,1,72,1,255,1,159,1,73,1,255,1,159,1,73,1,255,1,159,1,73,1,255,1,159,1,73,1,255,1,159,1,72,1,67,1,41,1,19,12,0,1,136,1,83,1,35,1,255,1,155,1,65,1,255,1,155,1,64,1,255,1,154,1,62,1,255,1,154,1,62,1,255,1,153,1,60,1,255,1,151,1,58,1,255,1,150,1,56,1,203,1,119,1,43,1,33,1,19,1,7,84,0,3,36,3,253,15,255,3,219,3,50,9,0,3,14,276,0,3,16,3,238,15,255,3,203,3,33,39,0,3,119,18,255,3,169,3,51,6,0,3,16,3,153,15,255,3,152,21,0,3,153,12,255,3,238,3,51,9,0,3,68,15,255,3,136,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,41,1,17,1,255,1,157,1,68,1,255,1,157,1,68,1,255,1,157,1,68,1,255,1,157,1,68,1,255,1,156,1,67,1,255,1,156,1,67,1,255,1,156,2,67,1,41,1,17,12,0,1,101,1,61,1,24,1,255,1,154,1,62,1,255,1,153,1,60,1,255,1,151,1,58,1,255,1,151,1,57,1,255,1,150,1,56,1,255,1,149,1,54,1,255,1,148,1,52,1,255,1,147,1,50,1,238,1,137,1,45,1,119,1,68,1,22,81,0,3,179,3,159,3,224,9,255,3,217,3,165,12,0,3,203,3,164,3,29,273,0,3,118,18,255,3,238,3,85,36,0,3,119,12,255,3,238,3,68,18,0,3,170,15,255,3,34,15,0,3,17,3,238,12,255,3,102,15,0,3,119,12,255,3,238,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,41,1,16,1,255,1,154,1,63,1,255,1,154,1,63,1,255,1,154,1,63,1,255,1,154,1,63,1,255,1,155,1,64,1,255,1,154,1,63,1,255,1,154,1,63,1,67,1,40,1,16,15,0,1,238,1,141,1,52,1,255,1,150,1,55,1,255,1,149,1,54,1,255,1,149,1,53,1,255,1,148,1,51,1,255,1,147,1,50,1,255,1,147,1,49,1,255,1,146,1,47,1,255,1,145,1,46,1,255,1,144,1,44,1,221,1,123,1,36,1,84,1,47,1,13,72,0,3,74,3,180,3,3,3,12,3,124,3,246,3,250,3,245,3,26,12,0,3,12,3,132,3,237,3,128,3,8,270,0,3,152,21,255,3,169,3,17,30,0,3,119,12,255,3,186,21,0,3,34,15,255,3,102,15,0,3,101,12,255,3,221,18,0,3,34,15,255,3,50,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,40,1,15,1,255,1,151,1,58,1,255,1,152,1,59,1,255,1,152,1,59,1,255,1,152,1,59,1,255,1,152,1,59,1,255,1,151,1,58,1,255,1,151,1,58,1,67,1,39,1,14,15,0,1,118,1,69,1,24,1,255,1,148,1,52,1,255,1,147,1,50,1,255,1,147,1,50,1,255,1,146,1,48,1,255,1,146,1,47,1,255,1,145,1,46,1,255,1,144,1,44,1,255,1,143,1,42,1,255,1,143,1,41,1,255,1,141,1,39,1,255,1,141,1,38,1,187,1,102,1,26,1,68,1,37,1,9,63,0,3,6,3,219,3,77,9,4,3,33,3,182,3,120,21,0,3,29,3,164,3,224,3,42,270,0,3,152,21,255,3,221,3,50,27,0,3,119,12,255,3,187,24,0,3,203,12,255,3,152,15,0,3,136,12,255,3,152,21,0,3,221,12,255,3,119,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,39,1,14,1,255,1,149,1,54,1,255,1,150,1,55,1,255,1,150,1,55,1,255,1,150,1,55,1,255,1,149,1,54,1,255,1,149,1,54,1,255,1,149,1,54,1,67,1,39,1,14,18,0,1,152,1,87,1,29,1,255,1,146,1,47,1,255,1,145,1,46,1,255,1,145,1,45,1,255,1,144,1,44,1,255,1,143,1,42,1,255,1,143,1,41,1,255,1,142,1,40,1,255,1,141,1,38,1,255,1,140,1,37,1,255,1,139,1,35,1,255,1,139,1,34,1,255,1,138,1,32,1,136,1,73,1,16,60,0,3,120,3,146,12,4,3,78,3,219,3,5,27,0,3,60,3,6,273,0,3,119,24,255,3,102,24,0,3,119,12,255,3,187,24,0,3,135,12,255,3,186,15,0,3,186,12,255,3,119,21,0,3,187,12,255,3,118,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,39,1,13,1,255,1,147,1,50,1,255,1,148,1,51,1,255,1,147,1,50,1,255,1,147,1,50,1,255,1,148,1,51,1,255,1,147,1,50,1,255,1,147,1,50,1,67,1,39,1,13,21,0,1,152,1,86,1,25,1,255,1,144,1,43,1,255,1,143,1,42,1,255,1,142,1,40,1,255,1,141,1,39,1,255,1,141,1,38,1,255,1,140,1,37,1,255,1,140,1,36,1,255,1,139,1,35,1,255,1,138,1,33,1,255,1,138,1,32,1,255,1,137,1,30,1,255,1,136,1,28,1,203,1,109,1,22,1,16,1,8,1,1,51,0,3,26,3,243,3,34,12,5,3,181,3,75,312,0,3,50,3,203,21,255,3,119,21,0,3,119,12,255,3,187,24,0,3,118,12,255,3,238,15,0,3,220,12,255,3,68,21,0,3,186,12,255,3,152,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,38,1,12,1,255,1,146,1,47,1,255,1,146,1,47,1,255,1,146,1,47,1,255,1,146,1,47,1,255,1,146,1,47,1,255,1,146,1,47,1,255,1,145,1,46,1,67,1,38,1,12,24,0,1,85,1,47,1,12,1,220,1,122,1,33,1,255,1,140,1,37,1,255,1,140,1,36,1,255,1,139,1,35,1,255,1,139,1,34,1,255,1,138,1,32,1,255,1,138,1,32,1,255,1,137,1,31,1,255,1,136,1,29,1,255,1,136,1,28,1,255,1,135,1,27,1,255,1,134,1,25,1,169,1,89,1,15,51,0,3,155,3,125,3,6,9,5,3,105,3,191,321,0,3,136,21,255,3,85,18,0,3,119,12,255,3,187,24,0,3,68,15,255,15,0,15,255,3,153,3,119,3,118,15,119,3,204,12,255,3,186,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,38,1,11,1,255,1,144,1,44,1,255,1,144,1,44,1,255,1,144,1,44,1,255,1,144,1,43,1,255,1,144,1,43,1,255,1,144,1,43,1,255,1,144,1,43,1,67,1,38,1,11,30,0,1,118,1,64,1,16,1,238,1,129,1,31,1,255,1,138,1,32,1,255,1,138,1,32,1,255,1,137,1,30,1,255,1,136,1,29,1,255,1,136,1,28,1,255,1,135,1,27,1,255,1,135,1,26,1,255,1,134,1,24,1,255,1,134,1,24,1,255,1,133,1,22,1,101,1,53,1,8,45,0,3,48,3,252,3,9,9,6,3,9,3,252,3,48,324,0,3,68,3,238,15,255,3,238,3,16,15,0,3,119,12,255,3,187,24,0,3,68,15,255,15,0,54,255,3,187,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,37,1,10,1,255,1,142,1,40,1,255,1,142,1,40,1,255,1,142,1,40,1,255,1,143,1,41,1,255,1,142,1,40,1,255,1,142,1,40,1,255,1,141,1,39,1,67,1,37,1,10,33,0,1,16,1,9,1,2,1,118,1,64,1,14,1,255,1,136,1,28,1,255,1,136,1,28,1,255,1,135,1,27,1,255,1,135,1,26,1,255,1,134,1,25,1,255,1,134,1,24,1,255,1,133,1,23,1,255,1,133,1,22,1,255,1,132,1,21,1,203,1,105,1,16,45,0,3,195,3,106,12,6,3,134,3,149,330,0,3,16,3,204,15,255,3,118,15,0,3,119,12,255,3,187,24,0,3,68,15,255,15,0,54,255,3,187,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,37,1,9,1,255,1,140,1,37,1,255,1,140,1,37,1,255,1,140,1,37,1,255,1,140,1,37,1,255,1,140,1,37,1,255,1,140,1,36,1,255,1,140,1,36,1,67,1,37,1,9,39,0,1,33,1,17,1,3,1,204,1,107,1,19,1,255,1,134,1,25,1,255,1,133,1,23,1,255,1,133,1,23,1,255,1,133,1,22,1,255,1,132,1,21,1,255,1,132,1,20,1,255,1,131,1,19,1,255,1,130,1,18,1,51,1,26,1,3,39,0,3,89,3,167,12,7,3,50,3,237,3,18,333,0,3,34,3,238,12,255,3,187,15,0,3,119,12,255,3,187,24,0,3,68,15,255,15,0,54,255,3,136,18,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,37,1,9,1,255,1,138,1,33,1,255,1,138,1,33,1,255,1,139,1,34,1,255,1,139,1,34,1,255,1,139,1,34,1,255,1,139,1,34,1,255,1,138,1,33,1,67,1,37,1,8,42,0,1,17,1,9,1,1,1,203,1,105,1,17,1,255,1,132,1,21,1,255,1,132,1,21,1,255,1,132,1,20,1,255,1,131,1,19,1,255,1,130,1,18,1,255,1,130,1,17,1,255,1,130,1,17,1,102,1,52,1,6,36,0,3,11,3,228,3,65,12,7,3,152,3,105,339,0,3,152,15,255,15,0,3,119,12,255,3,187,24,0,3,84,15,255,15,0,15,255,3,67,57,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,36,1,8,1,255,1,137,1,31,1,255,1,137,1,31,1,255,1,137,1,31,1,255,1,137,1,31,1,255,1,137,1,31,1,255,1,137,1,31,1,255,1,137,1,31,1,67,1,36,1,7,45,0,1,84,1,43,1,6,1,255,1,132,1,20,1,255,1,131,1,19,1,255,1,131,1,19,1,255,1,130,1,18,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,15,1,119,1,60,1,7,36,0,3,135,3,142,12,8,3,81,3,206,3,3,339,0,3,84,15,255,15,0,3,119,12,255,3,187,24,0,3,119,12,255,3,204,15,0,3,220,12,255,3,102,57,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,36,1,7,1,255,1,136,1,28,1,255,1,136,1,28,1,255,1,136,1,28,1,255,1,136,1,29,1,255,1,136,1,28,1,255,1,136,1,28,1,255,1,136,1,28,1,67,1,36,1,7,48,0,1,255,1,131,1,19,1,255,1,130,1,18,1,255,1,130,1,17,1,255,1,129,1,16,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,128,1,14,1,119,1,60,1,6,33,0,3,32,3,249,3,23,3,8,9,9,3,182,3,75,342,0,3,68,15,255,15,0,3,119,12,255,3,187,24,0,3,170,12,255,3,170,15,0,3,186,12,255,3,119,57,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,36,1,6,1,255,1,134,1,25,1,255,1,134,1,25,1,255,1,135,1,26,1,255,1,135,1,26,1,255,1,135,1,26,1,255,1,134,1,25,1,255,1,134,1,25,1,67,1,35,1,6,45,0,1,16,1,8,1,1,1,255,1,130,1,17,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,15,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,127,1,12,1,118,1,59,1,5,33,0,3,165,3,121,12,9,3,118,3,180,345,0,3,101,15,255,15,0,3,119,12,255,3,187,24,0,3,238,12,255,3,119,15,0,3,153,12,255,3,204,57,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,30,0,1,68,1,35,1,6,1,255,1,134,1,24,1,255,1,134,1,24,1,255,1,134,1,24,1,255,1,134,1,24,1,255,1,133,1,23,1,255,1,133,1,23,1,255,1,133,1,23,1,67,1,35,1,6,45,0,1,101,1,51,1,5,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,127,1,11,1,118,1,59,1,5,30,0,3,60,3,197,3,9,9,10,3,24,3,249,3,35,345,0,3,187,12,255,3,204,15,0,3,119,12,255,3,187,21,0,3,101,15,255,3,34,15,0,3,102,15,255,3,67,54,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,12,0,1,119,1,61,1,9,1,101,1,52,1,8,1,34,1,17,1,2,9,0,1,101,1,52,1,8,1,255,1,133,1,22,1,255,1,133,1,22,1,255,1,132,1,21,1,255,1,133,1,22,1,255,1,133,1,22,1,255,1,132,1,21,1,255,1,132,1,21,1,67,1,34,1,5,12,0,1,119,1,61,1,9,1,255,1,132,1,20,1,170,1,87,1,12,1,118,1,60,1,8,1,33,1,17,1,2,15,0,1,67,1,34,1,3,1,238,1,119,1,13,1,255,1,128,1,14,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,11,1,255,1,126,1,10,1,67,1,33,1,2,27,0,3,3,3,206,3,97,12,10,3,142,3,134,345,0,3,101,15,255,3,152,15,0,3,119,12,255,3,187,18,0,3,17,3,220,12,255,3,204,18,0,3,16,15,255,3,203,3,16,24,0,3,67,3,33,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,12,0,1,255,1,130,1,18,1,255,1,131,1,19,1,255,1,131,1,19,1,221,1,113,1,16,1,169,1,87,1,12,1,152,1,78,1,11,1,255,1,131,1,19,1,255,1,131,1,19,1,255,1,131,1,19,1,255,1,132,1,20,1,255,1,132,1,20,1,255,1,131,1,19,1,255,1,131,1,19,1,255,1,131,1,19,1,51,1,26,1,3,12,0,1,119,1,60,1,8,1,255,1,130,1,17,1,255,1,130,1,17,1,255,1,130,1,17,1,255,1,129,1,16,1,238,1,120,1,15,1,187,1,94,1,11,1,119,1,60,1,6,1,135,1,68,1,7,1,204,1,102,1,11,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,126,1,10,1,238,1,118,1,8,30,0,3,105,3,154,12,11,3,62,3,227,3,11,315,0,3,119,3,255,3,220,3,152,3,101,3,67,6,0,3,67,3,153,18,255,3,84,15,0,3,119,12,255,3,203,3,34,12,0,3,34,3,203,15,255,3,85,21,0,3,152,15,255,3,221,3,101,3,16,3,0,3,33,3,67,3,118,3,170,3,238,3,255,3,119,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,12,0,1,255,1,129,1,16,1,255,1,130,1,17,1,255,1,130,1,17,1,255,1,130,1,18,1,255,1,130,1,18,1,255,1,130,1,17,1,255,1,130,1,18,1,255,1,130,1,18,1,255,1,130,1,18,1,255,1,130,1,17,1,255,1,130,1,18,1,255,1,130,1,18,1,255,1,130,1,18,1,255,1,130,1,18,15,0,1,119,1,60,1,7,1,255,1,129,1,16,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,13,1,255,1,128,1,14,1,255,1,128,1,13,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,126,1,10,1,255,1,126,1,10,1,255,1,126,1,9,1,255,1,126,1,9,1,119,1,58,1,3,27,0,3,18,3,237,3,54,12,11,3,163,3,95,318,0,3,119,42,255,3,204,18,0,3,119,18,255,3,203,3,153,3,119,3,186,18,255,3,169,24,0,3,34,3,238,42,255,3,118,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,12,0,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,129,1,16,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,16,1,255,1,129,1,15,1,152,1,77,1,8,15,0,1,119,1,60,1,6,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,126,1,10,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,126,1,9,1,204,1,99,1,5,1,17,1,8,28,0,3,150,3,138,3,11,9,12,3,98,3,206,3,3,318,0,3,119,39,255,3,238,3,51,18,0,3,119,45,255,3,204,3,16,27,0,3,101,42,255,3,119,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,12,0,1,255,1,128,1,13,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,128,1,14,1,255,1,129,1,15,1,255,1,129,1,15,1,255,1,129,1,15,1,238,1,119,1,13,1,34,1,17,1,1,15,0,1,119,1,59,1,6,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,126,1,10,1,255,1,126,1,10,1,255,1,126,1,10,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,125,1,8,1,255,1,125,1,8,1,221,1,108,1,6,1,51,1,25,1,1,27,0,3,36,3,249,3,18,12,12,3,198,3,59,321,0,3,119,36,255,3,187,3,51,21,0,3,119,42,255,3,136,36,0,3,84,3,238,36,255,3,118,21,0,3,186,12,255,3,118,18,0,3,186,12,255,3,118,12,0,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,255,1,128,1,13,1,238,1,119,1,12,1,51,1,25,1,2,18,0,1,119,1,59,1,5,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,127,1,11,1,255,1,126,1,10,1,255,1,126,1,10,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,125,1,8,1,255,1,125,1,8,1,152,1,74,1,3,1,16,1,7,31,0,3,179,3,121,6,12,3,13,3,12,3,129,3,165,324,0,3,16,3,102,3,136,3,186,3,238,12,255,3,238,3,186,3,135,3,68,27,0,3,119,12,255,3,221,3,152,3,221,12,255,3,187,3,136,3,33,42,0,3,16,3,101,3,170,3,203,15,255,3,204,3,170,3,119,3,50,24,0,3,102,3,118,3,119,6,118,3,68,18,0,3,102,3,118,3,119,6,118,3,68,12,0,1,50,1,25,1,2,1,118,1,58,1,4,1,169,1,84,1,7,1,203,1,101,1,9,1,255,1,127,1,11,1,255,1,127,1,12,1,255,1,127,1,12,1,255,1,127,1,12,1,238,1,119,1,11,1,186,1,93,1,8,1,119,1,59,1,5,1,17,1,8,25,0,1,51,1,25,1,2,1,118,1,59,1,5,1,153,1,75,1,5,1,186,1,92,1,7,1,221,1,109,1,8,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,126,1,9,1,255,1,125,1,8,1,204,1,99,1,5,1,170,1,83,1,4,1,119,1,58,1,2,1,34,1,16,34,0,3,74,3,183,12,13,3,41,3,243,3,27,390,0,3,119,12,255,3,186,333,0,3,215,3,116,12,13,3,147,3,120,393,0,3,119,12,255,3,187,333,0,3,42,3,182,3,187,3,87,3,14,3,70,3,227,3,8,393,0,3,119,12,255,3,187,339,0,3,71,3,219,3,151,3,169,3,90,396,0,3,119,12,255,3,187,342,0,3,6,3,113,3,180,399,0,3,119,12,255,3,187,750,0,3,119,12,255,3,187,750,0,3,119,12,255,3,187,750,0,3,119,12,255,3,187,49791,0,3,4,18,112,3,14,3,17,3,14,15,0,3,84,3,78,96,0,3,71,3,60,3,0,3,84,3,78,57,0,3,84,3,78,60,0,3,84,3,78,33,0,3,17,3,14,36,0,3,84,3,78,6,0,3,71,3,60,60,0,3,84,3,78,21,0,3,17,3,14,84,0,3,71,3,60,3,0,3,71,3,60,192,0,3,2,6,62,3,104,3,112,6,62,3,2,3,112,3,94,15,0,3,78,3,74,96,0,3,112,3,94,3,0,3,78,3,74,42,0,3,42,3,86,9,0,3,78,3,74,60,0,3,78,3,74,33,0,3,112,3,94,36,0,3,78,3,74,6,0,3,112,3,94,3,0,3,42,3,86,51,0,3,78,3,74,6,0,3,42,3,86,9,0,3,112,3,94,24,0,3,12,3,82,3,107,3,101,3,52,45,0,3,112,3,94,3,0,3,112,3,94,6,0,3,112,3,94,3,12,3,82,3,107,3,101,3,52,174,0,3,94,3,112,9,0,3,112,3,94,15,0,3,38,3,36,96,0,3,112,3,94,3,0,3,38,3,36,42,0,3,89,3,112,9,0,3,38,3,36,60,0,3,38,3,36,33,0,3,112,3,94,36,0,3,38,3,36,6,0,3,112,3,94,3,0,3,89,3,112,51,0,3,38,3,36,6,0,3,89,3,112,9,0,3,112,3,94,24,0,3,75,3,112,3,57,3,51,3,41,45,0,3,112,3,94,3,0,3,112,3,94,6,0,3,112,3,94,3,75,3,112,3,57,3,51,3,41,174,0,3,94,3,112,9,0,3,112,3,99,3,64,3,99,3,101,3,36,3,0,3,112,3,106,3,0,3,29,3,85,3,105,3,103,3,75,12,0,3,15,3,86,3,101,3,109,3,95,3,32,6,0,3,112,3,82,3,86,3,107,3,82,3,8,3,0,3,112,3,82,3,86,3,107,3,82,3,8,3,0,3,112,3,94,3,0,3,112,3,106,6,0,3,6,3,73,6,105,3,54,3,86,3,101,3,109,3,95,3,32,3,0,3,101,9,112,3,37,3,0,3,112,3,106,3,0,3,3,3,68,3,104,3,107,3,79,3,10,6,0,3,112,3,84,3,65,3,99,3,102,3,37,15,0,3,112,3,106,3,0,3,29,3,85,3,105,3,103,3,75,15,0,3,112,3,103,3,85,3,107,3,82,3,8,3,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,106,6,0,3,112,3,94,3,101,9,112,3,37,12,0,3,86,3,109,3,0,3,57,3,112,3,104,3,0,3,63,3,112,3,20,3,0,3,112,3,106,3,0,3,101,9,112,3,37,3,0,3,112,3,99,3,64,3,99,3,101,3,36,12,0,3,83,3,112,3,20,12,0,3,112,3,82,3,86,3,107,3,82,3,8,3,0,3,17,3,83,3,107,3,100,3,49,3,0,3,112,3,94,3,0,3,112,3,94,6,0,3,112,3,94,3,83,3,112,3,20,180,0,3,94,3,112,9,0,3,112,3,108,3,68,3,54,3,112,3,87,3,0,3,112,3,106,3,0,3,86,3,112,3,48,3,34,3,29,12,0,3,13,3,55,3,45,3,49,3,112,3,87,6,0,3,112,3,103,3,39,3,56,3,112,3,64,3,0,3,112,3,103,3,39,3,56,3,112,3,64,3,0,3,112,3,94,3,0,3,112,3,106,6,0,3,71,3,112,3,60,3,40,3,36,3,55,3,45,3,49,3,112,3,87,3,0,3,12,3,96,3,112,3,13,3,3,3,0,3,112,3,106,3,0,3,57,3,112,3,56,3,41,3,112,3,76,6,0,3,112,3,107,3,62,3,54,3,112,3,88,15,0,3,112,3,106,3,0,3,86,3,112,3,48,3,34,3,29,15,0,3,112,3,103,3,36,3,56,3,112,3,64,3,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,106,6,0,3,112,3,94,3,12,3,96,3,112,3,13,3,3,12,0,3,61,3,112,3,13,3,83,3,86,3,112,3,16,3,79,3,107,3,1,3,0,3,112,3,106,3,0,3,12,3,96,3,112,3,13,3,3,3,0,3,112,3,108,3,68,3,54,3,112,3,87,12,0,3,36,3,110,3,106,3,51,9,0,3,112,3,103,3,39,3,56,3,112,3,64,3,0,3,86,3,109,3,23,3,61,3,112,3,17,3,112,3,94,3,0,3,112,3,94,6,0,3,112,3,94,3,36,3,110,3,106,3,51,177,0,3,94,3,112,9,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,106,3,0,3,70,3,112,3,103,3,62,3,7,12,0,3,19,3,87,3,109,6,112,3,94,6,0,3,112,3,94,3,0,3,4,3,112,3,86,3,0,3,112,3,94,3,0,3,4,3,112,3,86,3,0,3,112,3,94,3,0,3,112,3,106,6,0,3,100,3,101,6,0,3,19,3,87,3,109,6,112,3,94,6,0,3,94,3,112,9,0,3,112,3,106,3,0,3,84,3,112,3,4,3,0,3,99,3,102,6,0,3,112,3,94,6,0,3,112,3,94,15,0,3,112,3,106,3,0,3,70,3,112,3,103,3,62,3,7,15,0,3,112,3,94,3,0,3,10,3,112,3,86,3,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,106,6,0,3,112,3,94,3,0,3,94,3,112,18,0,3,37,3,112,3,29,3,106,3,44,3,108,3,41,3,95,3,83,6,0,3,112,3,106,6,0,3,94,3,112,9,0,3,112,3,94,6,0,3,112,3,94,15,0,3,22,3,84,3,112,3,68,6,0,3,112,3,94,3,0,3,4,3,112,3,86,3,0,3,107,3,109,3,94,3,99,3,112,3,35,3,112,3,94,3,0,3,112,3,94,6,0,3,112,3,94,3,0,3,22,3,84,3,112,3,68,174,0,3,94,3,112,9,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,106,3,0,3,2,3,50,3,96,3,112,3,77,12,0,3,80,3,112,3,32,3,2,3,112,3,94,6,0,3,112,3,94,3,0,3,6,3,112,3,82,3,0,3,112,3,94,3,0,3,6,3,112,3,82,3,0,3,112,3,94,3,0,3,112,3,106,6,0,3,103,3,100,6,0,3,80,3,112,3,32,3,2,3,112,3,94,6,0,3,94,3,112,9,0,3,112,3,106,3,0,3,84,3,112,3,5,3,0,3,100,3,101,6,0,3,112,3,94,6,0,3,112,3,94,15,0,3,112,3,106,3,0,3,2,3,50,3,96,3,112,3,77,15,0,3,112,3,94,3,0,3,6,3,112,3,82,3,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,106,6,0,3,112,3,94,3,0,3,94,3,112,18,0,3,13,3,112,3,59,3,112,3,19,3,89,3,62,3,108,3,59,6,0,3,112,3,106,6,0,3,94,3,112,9,0,3,112,3,94,6,0,3,112,3,94,18,0,3,2,3,105,3,106,6,0,3,112,3,94,3,0,3,6,3,112,3,82,3,0,3,95,3,102,12,0,3,112,3,94,3,0,3,112,3,94,6,0,3,112,3,94,6,0,3,2,3,105,3,106,174,0,3,94,3,112,9,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,106,3,0,3,30,3,36,3,47,3,112,3,83,12,0,3,84,3,112,3,45,3,46,3,112,3,94,6,0,3,112,3,100,3,30,3,62,3,112,3,57,3,0,3,112,3,100,3,30,3,62,3,112,3,57,3,0,3,112,3,94,3,0,3,112,3,106,6,0,3,79,3,112,3,60,3,44,3,110,3,112,3,45,3,46,3,112,3,94,6,0,3,89,3,112,3,43,3,28,3,0,3,112,3,106,3,0,3,58,3,112,3,59,3,46,3,112,3,75,6,0,3,112,3,94,6,0,3,112,3,94,15,0,3,112,3,106,3,0,3,30,3,36,3,47,3,112,3,83,15,0,3,112,3,98,3,21,3,64,3,112,3,55,3,0,3,107,3,106,3,53,3,107,3,112,6,0,3,112,3,106,6,0,3,112,3,94,3,0,3,89,3,112,3,43,3,28,15,0,3,101,3,91,3,107,3,1,3,65,3,91,3,112,3,34,6,0,3,112,3,106,6,0,3,89,3,112,3,43,3,28,3,0,3,112,3,94,6,0,3,112,3,94,12,0,3,59,3,53,3,55,3,112,3,92,6,0,3,112,3,100,3,30,3,62,3,112,3,57,3,0,3,67,3,112,3,63,3,43,3,60,3,0,3,112,3,94,3,0,3,112,3,94,3,43,3,49,3,112,3,87,3,59,3,53,3,55,3,112,3,92,6,0,3,74,3,89,3,1,159,0,3,94,3,112,9,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,106,3,0,3,71,3,100,3,109,3,93,3,26,12,0,3,30,3,100,3,103,3,76,3,103,3,94,6,0,9,112,3,105,3,69,3,3,3,0,9,112,3,105,3,69,3,3,3,0,3,112,3,94,3,0,3,112,3,106,6,0,3,13,3,83,3,108,3,100,3,68,3,100,3,103,3,76,3,103,3,94,6,0,3,43,3,98,3,102,3,45,3,0,3,112,3,106,3,0,3,3,3,70,3,105,3,107,3,79,3,10,6,0,3,112,3,94,6,0,3,112,3,94,15,0,3,112,3,106,3,0,3,71,3,100,3,109,3,93,3,26,15,0,3,86,3,97,3,108,3,104,3,66,3,2,3,0,3,53,3,106,3,89,3,86,3,112,6,0,3,112,3,106,6,0,3,112,3,94,3,0,3,43,3,98,3,102,3,45,15,0,3,76,3,112,3,86,3,0,3,41,6,112,3,10,6,0,3,112,3,106,6,0,3,43,3,98,3,102,3,45,3,0,3,112,3,94,6,0,3,112,3,94,12,0,3,75,3,103,3,109,3,90,3,24,6,0,9,112,3,105,3,69,3,3,3,0,3,6,3,74,6,106,3,85,3,0,3,112,3,94,3,0,3,112,3,94,3,70,3,107,3,100,3,35,3,75,3,103,3,109,3,90,3,24,6,0,3,89,3,102,3,4,255,0,3,112,3,94,15,0,3,112,3,94,390,0,3,112,3,94,81,0,3,1,3,4,258,0,3,112,3,94,15,0,3,112,3,94,390,0,3,112,3,94,4071,0,3,112,3,94,12,0,3,84,3,78,102,0,3,14,3,17,309,0,3,84,3,78,27,0,3,71,3,60,123,0,3,71,3,60,159,0,3,112,3,94,12,0,3,78,3,74,102,0,3,94,3,112,18,0,3,47,3,93,3,97,3,93,279,0,3,78,3,74,27,0,3,112,3,94,123,0,3,112,3,94,159,0,3,112,3,94,12,0,3,38,3,36,102,0,3,94,3,112,18,0,3,106,3,103,285,0,3,38,3,36,27,0,3,112,3,94,123,0,3,112,3,94,159,0,3,112,3,94,12,0,3,112,3,106,6,0,3,6,3,73,6,105,3,39,3,17,3,83,3,107,3,100,3,49,3,0,3,112,3,84,3,65,3,99,3,102,3,37,3,29,3,85,3,105,3,103,3,75,3,0,3,17,3,83,3,107,3,100,3,49,3,0,3,14,3,87,3,101,3,105,3,112,12,0,3,6,12,112,3,46,3,68,3,104,3,107,3,79,3,10,6,0,3,112,3,83,3,93,3,64,15,0,3,112,3,84,3,65,3,99,3,102,3,37,3,3,3,68,3,104,3,107,3,79,3,10,6,0,3,112,3,84,3,65,3,99,3,102,3,37,21,0,3,6,3,73,6,105,3,42,3,68,3,104,3,107,3,79,3,10,6,0,3,112,6,85,3,103,3,52,3,63,3,100,3,102,3,37,6,0,3,112,6,85,3,103,3,52,3,63,3,100,3,102,3,37,6,0,3,17,3,83,3,107,3,100,3,49,3,0,3,112,3,83,3,93,3,64,3,0,3,6,3,73,6,105,3,39,3,112,3,106,3,0,3,15,3,86,3,101,3,109,3,95,3,32,6,0,3,112,3,94,15,0,3,112,3,94,3,0,3,94,3,112,3,0,3,29,3,85,3,105,3,103,3,75,3,0,3,17,3,83,3,107,3,100,3,49,12,0,3,3,3,68,3,104,3,107,3,79,3,10,6,0,3,112,3,84,3,65,3,99,3,102,3,37,3,0,3,112,3,96,3,99,3,95,3,0,3,19,3,112,3,59,141,0,3,112,3,94,12,0,3,112,3,106,6,0,3,71,3,112,3,60,3,40,3,23,3,86,3,109,3,23,3,61,3,112,3,17,3,112,3,107,3,62,3,54,3,112,3,88,3,86,3,112,3,48,3,34,3,29,3,0,3,86,3,109,3,23,3,61,3,112,3,17,3,78,3,112,3,46,3,103,3,112,15,0,3,13,3,112,3,99,3,13,3,62,3,112,3,56,3,41,3,112,3,76,6,0,3,112,3,107,3,68,3,40,15,0,3,112,3,107,3,62,3,54,3,112,3,88,3,57,3,112,3,56,3,41,3,112,3,76,6,0,3,112,3,107,3,62,3,54,3,112,3,88,3,18,12,112,3,59,3,0,3,71,3,112,3,60,3,40,3,81,3,112,3,56,3,41,3,112,3,76,6,0,3,112,3,107,3,55,3,105,3,112,3,67,3,53,3,112,3,87,6,0,3,112,3,107,3,55,3,105,3,112,3,67,3,53,3,112,3,87,6,0,3,86,3,109,3,23,3,61,3,112,3,17,3,112,3,107,3,68,3,40,3,0,3,71,3,112,3,60,3,40,3,23,3,112,3,106,3,0,3,13,3,55,3,45,3,49,3,112,3,87,6,0,3,112,3,94,15,0,3,112,3,94,3,0,3,94,3,112,3,0,3,86,3,112,3,48,3,34,3,29,3,0,3,86,3,109,3,23,3,61,3,112,3,17,9,0,3,57,3,112,3,56,3,41,3,112,3,76,6,0,3,112,3,107,3,62,3,54,3,112,3,88,3,0,3,112,3,94,3,53,3,112,3,17,3,48,3,112,3,21,141,0,3,112,3,94,12,0,3,112,3,106,6,0,3,100,3,101,9,0,3,107,3,109,3,94,3,99,3,112,3,35,3,112,3,94,6,0,3,112,3,94,3,70,3,112,3,103,3,62,3,7,3,0,3,107,3,109,3,94,3,99,3,112,3,35,3,102,3,103,3,0,3,94,3,112,18,0,3,112,3,97,3,0,3,84,3,112,3,4,3,0,3,99,3,102,6,0,3,112,3,94,21,0,3,112,3,94,6,0,3,112,3,94,3,84,3,112,3,4,3,0,3,99,3,102,6,0,3,112,3,94,6,0,3,112,3,94,3,16,12,94,3,50,3,0,3,100,3,101,6,0,3,84,3,112,3,4,3,0,3,99,3,102,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,107,3,109,3,94,3,99,3,112,3,35,3,112,3,94,9,0,3,100,3,101,9,0,3,112,3,106,3,0,3,19,3,87,3,109,6,112,3,94,6,0,3,112,3,94,15,0,3,112,3,94,3,0,3,94,3,112,3,0,3,70,3,112,3,103,3,62,3,7,3,0,3,107,3,109,3,94,3,99,3,112,3,35,9,0,3,84,3,112,3,4,3,0,3,99,3,102,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,94,3,8,3,107,3,51,3,77,3,97,144,0,3,112,3,94,12,0,3,112,3,106,6,0,3,103,3,100,9,0,3,95,3,102,12,0,3,112,3,94,6,0,3,112,3,94,3,2,3,50,3,96,3,112,3,77,3,0,3,95,3,102,12,0,3,104,3,101,3,0,3,94,3,112,18,0,3,112,3,97,3,0,3,84,3,112,3,5,3,0,3,100,3,101,6,0,3,112,3,94,21,0,3,112,3,94,6,0,3,112,3,94,3,84,3,112,3,5,3,0,3,100,3,101,6,0,3,112,3,94,6,0,3,112,3,94,21,0,3,103,3,100,6,0,3,84,3,112,3,5,3,0,3,100,3,101,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,95,3,102,12,0,3,112,3,94,9,0,3,103,3,100,9,0,3,112,3,106,3,0,3,80,3,112,3,32,3,2,3,112,3,94,6,0,3,112,3,94,15,0,3,112,3,94,3,0,3,94,3,112,3,0,3,2,3,50,3,96,3,112,3,77,3,0,3,95,3,102,21,0,3,84,3,112,3,5,3,0,3,100,3,101,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,94,3,0,3,67,3,87,3,105,3,59,144,0,3,112,3,104,6,60,3,35,3,0,3,112,3,106,6,0,3,79,3,112,3,60,3,44,3,25,3,67,3,112,3,63,3,43,3,60,3,0,3,112,3,94,6,0,3,112,3,94,3,30,3,36,3,47,3,112,3,83,3,0,3,67,3,112,3,63,3,43,3,60,3,0,3,83,3,112,3,43,3,104,3,112,18,0,3,112,3,97,3,0,3,58,3,112,3,59,3,46,3,112,3,75,6,0,3,112,3,94,21,0,3,112,3,94,6,0,3,112,3,94,3,58,3,112,3,59,3,46,3,112,3,75,6,0,3,112,3,94,6,0,3,112,3,94,21,0,3,79,3,112,3,60,3,44,3,84,3,112,3,59,3,46,3,112,3,75,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,67,3,112,3,63,3,43,3,60,3,0,3,112,3,94,9,0,3,79,3,112,3,60,3,44,3,25,3,112,3,106,3,0,3,84,3,112,3,45,3,46,3,112,3,94,6,0,3,112,3,94,15,0,3,107,3,106,3,53,3,107,3,112,3,0,3,30,3,36,3,47,3,112,3,83,3,0,3,67,3,112,3,63,3,43,3,60,12,0,3,58,3,112,3,59,3,46,3,112,3,75,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,94,3,0,3,19,6,112,3,21,6,0,3,74,3,89,3,1,129,0,12,112,3,54,3,0,3,112,3,106,6,0,3,13,3,83,3,108,3,100,3,37,3,6,3,74,6,106,3,85,3,0,3,112,3,94,6,0,3,112,3,94,3,71,3,100,3,109,3,93,3,26,3,0,3,6,3,74,6,106,3,85,3,0,3,21,3,94,3,102,3,93,3,112,18,0,3,112,3,97,3,0,3,3,3,70,3,105,3,107,3,79,3,10,6,0,3,112,3,94,21,0,3,112,3,94,6,0,3,112,3,94,3,3,3,70,3,105,3,107,3,79,3,10,6,0,3,112,3,94,6,0,3,112,3,94,21,0,3,13,3,83,3,108,3,100,3,41,3,70,3,105,3,107,3,79,3,10,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,94,3,112,6,0,3,112,3,94,6,0,3,6,3,74,6,106,3,85,3,0,3,112,3,94,9,0,3,13,3,83,3,108,3,100,3,37,3,112,3,106,3,0,3,30,3,100,3,103,3,76,3,103,3,94,6,0,3,112,3,94,15,0,3,53,3,106,3,89,3,86,3,112,3,0,3,71,3,100,3,109,3,93,3,26,3,0,3,6,3,74,6,106,3,85,12,0,3,3,3,70,3,105,3,107,3,79,3,10,6,0,3,112,3,94,6,0,3,112,3,94,3,0,3,112,3,94,6,0,3,90,3,96,9,0,3,89,3,102,3,4,738,0,3,37,3,45,3,110,3,58,9,0,3,1,3,4,741,0,3,76,3,106,3,82,3,8,10833,0],i=t.decode(r),s=256,o=document.createElement("canvas");o.width=s,o.height=s;var u=o.getContext("2d"),a=u.createImageData(s,s);return n(a,i,s*s),u.putImageData(a,0,0),o}}),define("B6cZIUtIjiQAeBHS1O6wHTUXCz5h3Y0N1v4W5ubpfb8=",["dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU=","csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc="],function(e,t){"use strict";var n=function(e){if(!e.getBoundingClientRect)return[0,0];var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,s=window.pageXOffset||r.scrollLeft||n.scrollLeft,o=r.clientTop||n.clientTop||0,u=r.clientLeft||n.clientLeft||0,a=t.top+i-o,f=t.left+s-u;return[Math.round(f),Math.round(a)]};return function(r){if(e||t)return[window.innerWidth,window.innerHeight];if(!r)throw"Missing container id argument. Please call the function with the spell container id.";var i=n(document.getElementById(r)),s=window.innerWidth-i[0],o=window.innerHeight-i[1];return[s,o]}}),define("xVmiSeFJmCkslGulIYb/x2nzuFccj+IFmGIdlCbk9uw=",["csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc=","dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU="],function(e,t){"use strict";return{logEvent:function(n,r){e?ejecta.flurryLogEvent(n,r):t&&NATIVE.flurry.logEvent(n)},endTimedEvent:function(n){e?ejecta.flurryEndTimedEvent(n):t&&NATIVE.flurry.endTimedEvent(n)}}}),define("nWNLlTtXESn8SqZ6GddNabDOUjB4LefSiI+9XEsZYmg=",function(){"use strict";return function(){return document.location.host}}),define("XSTM/Mril+TDjU0Gq8YT4SBxjuKlBLva6Qnc2F8EPTE=",["v8fOdhNCtMEZStOrNxspT+wYpcqnI29sSZZku+1iaIw="],function(e){"use strict";var t={};return function(n,r,i){var s=t[i];if(s===!1)return;if(s===undefined)try{s=n.require(e(i)),t[i]=s}catch(o){t[i]=!1;return}return new s(r)}}),define("J86Z2Rq66RrGkGHc2GhXacoIiB8EOMdIXJYmIxuMkj4=",["GKx02IAXksWe2mEgOqA6HPm8jC52ylvI+rWudnjLCYo=","s/xUctGz8FfLLMjeJiPQUy7iixST8p7w+2YsH1qz8FI="],function(e,t){"use strict";var n=function(){},r=function(e){return e=="library/superkumba/sounds/KibaKumbaDschungel.mp3"||e=="library/superkumba/sounds/KibaKumbaWueste.mp3"||e=="library/superkumba/sounds/KibaKumbaHoehle.mp3"||e=="library/superkumba/sounds/KibaKumbaArktis.mp3"},i={},s={},o=function(e,t,n){this.src=e,this.onload=t,this.onerror=n,this.loaded=!1},u=!1,a=function(e){u=e;for(var t in i)l(t,u?0:1)},f=function(){return u},l=function(e,t){var n=i[e];if(!n)return;NATIVE.sound.setVolume(n,t)},c=function(e){var t=i[e];if(!t)return;delete i[e],NATIVE.sound.stopSound(t)},h=function(e,t,n,s){n|=1;var o=e.src;t&&(i[t]=o);var a=r(o)?NATIVE.sound.playBackgroundMusic:NATIVE.sound.playSound;a(o,u?0:n,!!s)},p=function(e){return{duration:0,src:e.src}},d=function(t,n){if(!t)throw"Error: No src provided.";if(!n)throw"Error: No onLoadCallback provided.";var i=e(t),u=new o(i,n);s[i]=u,r(i)?n(u):NATIVE.sound.loadSound(i)},v=function(){return{tick:n,play:h,setLoop:n,setVolume:l,setAllMuted:a,isAllMuted:f,stop:c,mute:n,createSound:p,loadBuffer:d,getConfiguration:function(){return{type:"native"}}}},m=function(){return NATIVE.events.registerHandler("soundLoaded",function(e){var t=s[e.url];t&&!t.loaded&&(t.loaded=!0,t.onload&&t.onload(t))}),NATIVE.events.registerHandler("soundError",function(e){var t=s[e.url];t&&t.onerror&&t.onerror(t)}),v()};return m}),define("Pkh75qHXzXfcHECAdRJlsnYpKcB+g/xxhSTTFJVfHsY=",["GKx02IAXksWe2mEgOqA6HPm8jC52ylvI+rWudnjLCYo=","s/xUctGz8FfLLMjeJiPQUy7iixST8p7w+2YsH1qz8FI=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r,i={},s=!1,o=function(e,t){var n=r.createGainNode(),s=r.createBufferSource();return s.buffer=t.privateAudioResource,s.connect(n),n.connect(r.destination),i[e]=s,s},u=function(e,r,s,u){r=r?r:t(),u=!!u,s=s?s:1;var a=n.has(i,r)?i[r]:o(r,e);l(r,u),f(r,s),v()&&c(r),a.playbackState!==a.PLAYING_STATE&&a.noteOn(0)},a=function(e){var t=i[e];t&&t.noteOff(0)},f=function(e,t){t=isNaN(t)?1:t;var n=i[e];n&&(n.gain.value=t)},l=function(e,t){t=!!t;var n=i[e];n&&(n.loop=t)},c=function(e){var t=i[e];t&&(t.gain.value=0)},h=function(e){a(e),i[e]=null,delete i[e]},p=function(){for(var e in i){var t=i[e];t.playbackState===t.FINISHED_STATE&&h(e)}},d=function(e){e===!0?n.each(i,function(e,t){c(t)}):n.each(i,function(e,t){f(t,1)}),s=e},v=function(){return s},m=function(t,n){if(!t)throw"Error: No src provided.";if(!n)throw"Error: No onLoadCallback provided.";var i=new XMLHttpRequest;i.open("GET",e(t),!0),i.responseType="arraybuffer",i.onload=function(){r.decodeAudioData(i.response,n)},i.onError=function(){throw'Error: Could not load sound resource "'+config.resource+'".'},i.send()},g=function(){return{tick:p,play:u,setLoop:l,setVolume:f,setAllMuted:d,isAllMuted:v,stop:a,mute:c,createSound:b,loadBuffer:m,getConfiguration:function(){return{type:"web"}}}},y=function(){return r?r:(r=new webkitAudioContext,g())},b=function(e){return{duration:e.duration,privateAudioResource:e}};return y}),define("s/xUctGz8FfLLMjeJiPQUy7iixST8p7w+2YsH1qz8FI=",function(){"use strict";var e=0;return function(){return e++}}),define("Rubj7WmnCZz9f9BFloFEBjP5W4TGUlJrZWs+rP3Pcmc=",["dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU="],function(e){"use strict";var t=[{fileExtension:"ogg",mimeTypes:["audio/ogg; codecs=vorbis"]},{fileExtension:"mp3",mimeTypes:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"]}],n,r=function(){if(e)return"mp3";if(n)return n;var r=new Audio;for(var i=0,s=t.length;i<s;i++){var o=t[i].fileExtension,u=t[i].mimeTypes;for(var a=0,f=u.length;a<f;a++)if(r.canPlayType(u[a]))return n=o,o}};return r}),define("GKx02IAXksWe2mEgOqA6HPm8jC52ylvI+rWudnjLCYo=",["Rubj7WmnCZz9f9BFloFEBjP5W4TGUlJrZWs+rP3Pcmc="],function(e){"use strict";var t=function(t){var n=t.split(".");return n.pop(),n.push(e()),n.join(".")};return t}),define("KCfYxgL9XWNC48QkJ5BbwiyYm69CZJXVhdxMVP80dd0=",["z+qR2YKjhvFUFs3XpLlrgIbKUfoFmWoR3c1/5yaCnVA=","GKx02IAXksWe2mEgOqA6HPm8jC52ylvI+rWudnjLCYo=","s/xUctGz8FfLLMjeJiPQUy7iixST8p7w+2YsH1qz8FI="],function(e,t,n){"use strict";var r=16,i={},s=!1,o=r,u=function(t,n){var r;return!e&&n.privateAudioResource.cloneNode?r=n.privateAudioResource.cloneNode(!0):(r=new Audio,r.src=n.privateAudioResource.src),r.id=t,r.playing=!1,r},a=function(){this.currentTime=0,this.play()},f=function(){l(this)},l=function(e){e.pause(),e.removeEventListener("ended",f,!0),e.removeEventListener("ended",a,!0),o++,delete i[e.id]},c=function(e,t,r,s){t||(t=n());var a=i[t];return!a&&o>0&&(o--,a=u(t,e),i[t]=a),a&&(m(t,s),v(t,r),b()&&g(t),a.playing||(a.playing=!0,a.play())),t},h=function(){for(var e in i)g(e)},p=function(){for(var e in i)v(e,1)},d=function(e){var t=i[e];if(!t)return;l(t)},v=function(e,t){t=!isNaN(t)&&t<1&&t>=0?t:1;var n=i[e];if(!n)return;n.volume=t},m=function(e,t){var n=i[e];if(!n)return;n.loop=t,t?(n.addEventListener("ended",a,!0),n.removeEventListener("ended",f,!0)):(n.addEventListener("ended",f,!0),n.removeEventListener("ended",a,!0))},g=function(e){v(e,0)},y=function(e){e?h():p(),s=e},b=function(){return s},w=function(){},E=function(e,n){if(!e)throw"Error: No src provided.";if(!n)throw"Error: No onLoadCallback provided.";var r=new Audio;r.src=t(e),r.autobuffer&&(r.autobuffer="auto"),r.preload&&(r.preload="auto"),r.load(),n(r)},S=function(e){return{duration:e.duration,privateAudioResource:e}},x=function(){return T()},T=function(){return{tick:w,play:c,setLoop:m,setVolume:v,setAllMuted:y,isAllMuted:b,stop:d,mute:g,createSound:S,loadBuffer:E,getConfiguration:function(){return{type:"html5"}}}};return x}),define("yjHfpzFuvrEyEiwuMg+rlvKxsDtls93nU4XV4lbAXM0=",function(){"use strict";var e=!1,t=function(){},n=function(t){e=t},r=function(){return e},i=function(e){return{}},s=function(e,t){if(!e)throw"Error: No src provided.";if(!t)throw"Error: No onLoadCallback provided.";t({})},o=function(){return{tick:t,play:t,setLoop:t,setVolume:t,setAllMuted:n,isAllMuted:r,stop:t,mute:t,createSound:i,loadBuffer:s,getConfiguration:function(){return{type:"dummy"}}}},u=function(){return o()};return u}),define("XqX2t9n50Hfi19mtSZs5LEk42LHNrgz7ttwgdF8R2Wk=",["yjHfpzFuvrEyEiwuMg+rlvKxsDtls93nU4XV4lbAXM0=","KCfYxgL9XWNC48QkJ5BbwiyYm69CZJXVhdxMVP80dd0=","Pkh75qHXzXfcHECAdRJlsnYpKcB+g/xxhSTTFJVfHsY=","J86Z2Rq66RrGkGHc2GhXacoIiB8EOMdIXJYmIxuMkj4="],function(e,t,n,r){"use strict";var i="dummy",s="web",o="html5",u="native",a=null,f=function(f){try{if(f===undefined?!0:f===i)a=e();else if(f===undefined?!0:f===s)a=n();else if(f===undefined?!0:f===o)a=t();else if(f===undefined?!0:f===u)a=r()}catch(l){a=null}if(a)return a;throw"Could not create a audio back-end."};return{BACK_END_DUMMY_AUDIO:i,BACK_END_HTML5_AUDIO:o,BACK_END_WEB_AUDIO:s,BACK_END_NATIVE_AUDIO:u,createAudioContext:f}}),define("Pcc/biVPUnlHYey99hXN/gpvcMdumN7m5R8g2fh6f9Q=",function(){"use strict";return function(e,t,n){var r;window&&window.canvas?r=window.canvas:r=document.createElement("canvas"),r.id=e+"-screen",r.width=t,r.height=n,r.className+="spell-canvas";if(e){var i=document.getElementById(e);if(!i)throw"Could not find a container with the id "+e+" in the DOM tree.";i.appendChild(r)}else document.body.appendChild(r);return r}}),define("ylYWHG4ZqarTkEWDhe57WvjShKgZjvD5PeHlyjvDF04=",function(){return{vertex:["attribute vec2 aVertexPosition;","uniform mat3 uScreenSpaceShimMatrix;","uniform mat3 uModelViewMatrix;","uniform mat3 uTextureMatrix;","varying vec2 vTextureCoord;","void main( void ) {","vTextureCoord = ( uTextureMatrix * vec3( aVertexPosition, 1.0 ) ).st;","gl_Position = vec4( uScreenSpaceShimMatrix * uModelViewMatrix * vec3( aVertexPosition, 1.0 ), 1.0 );","}"].join("\n"),fragment:["precision mediump float;","uniform sampler2D uTexture0;","uniform vec4 uGlobalColor;","uniform float uGlobalAlpha;","uniform bool uFillRect;","varying vec2 vTextureCoord;","void main( void ) {","if( !uFillRect ) {","	vec4 color = texture2D( uTexture0, vTextureCoord );","	gl_FragColor = color * vec4( 1.0, 1.0, 1.0, uGlobalAlpha );","} else {","	gl_FragColor = uGlobalColor * vec4( 1.0, 1.0, 1.0, uGlobalAlpha );","}","}"].join("\n")}}),define("N7A3kDX83iXVoMIuYfUpdj9KNKE5/GD+cgj2f2prdqo=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=function(t){var n=null,r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i={alpha:!1};return e.find(r,function(e){return n=t.getContext(e,i),n!==null}),n};return t}),define("nUDcNlIdSATy78dLW44o5WS90njS6/U29KzWJbZcW7c=",["FVHd7ApTLsQfGrxEv0dRsRbKKSZlAf1dzrptE8P5d20=","N7A3kDX83iXVoMIuYfUpdj9KNKE5/GD+cgj2f2prdqo=","ylYWHG4ZqarTkEWDhe57WvjShKgZjvD5PeHlyjvDF04=","c3TtVd3rj7BPHOmetcKxDeLDfncpdkLzPceSVTUQEMY=","9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l,c,h=new e(32),p=h.getTop(),d=32,v=0,m=v+4,g=m+d,y=i((g+2)*2),b,w=a.create(),E=a.create();a.identity(E);var S=a.create();a.identity(S);var x=a.create();a.identity(x);var T=a.create();a.identity(T);var N=a.create(),C=a.create();a.identity(C);var k=function(e,t,n){return s.mat3Ortho(n,0,e,0,t),n},L=function(e,t,n){return a.identity(n),n[0]=e*.5,n[4]=t*.5,n[6]=e*.5,n[7]=t*.5,n},A=function(e){nt(e,0,0,l.canvas.width,l.canvas.height),l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT),l.enable(l.BLEND),l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),l.disable(l.DEPTH_TEST),l.activeTexture(l.TEXTURE0)},O=function(){var e=_();return A(e),{clear:X,createTexture:st,drawTexture:f.bind(V,null,e),drawSubTexture:f.bind($,null,e),drawRect:f.bind(J,null,e),drawCircle:f.bind(K,null,e),drawLine:f.bind(Q,null,e),fillRect:f.bind(G,null,e),getConfiguration:rt,resizeColorBuffer:Y,restore:j,rotate:W,save:B,scale:U,setClearColor:R,setColor:F,setLineColor:I,setGlobalAlpha:q,setTransform:et,setViewMatrix:tt,transform:Z,translate:z,viewport:f.bind(nt,null,e),transformScreenToWorld:H,getCanvasElement:function(){return c}}},M=function(e){if(e===undefined)throw"Missing first argument.";return l!==undefined?l:(c=e,l=t(c),l===null?null:O())},_=function(){var e=l.createProgram(),t=l.createShader(l.VERTEX_SHADER);l.shaderSource(t,n.vertex),l.compileShader(t),l.attachShader(e,t);var r=l.createShader(l.FRAGMENT_SHADER);l.shaderSource(r,n.fragment),l.compileShader(r),l.attachShader(e,r),l.linkProgram(e),l.useProgram(e),e.aVertexPosition=l.getAttribLocation(e,"aVertexPosition"),e.uScreenSpaceShimMatrix=l.getUniformLocation(e,"uScreenSpaceShimMatrix"),e.uTextureMatrix=l.getUniformLocation(e,"uTextureMatrix"),e.uFillRect=l.getUniformLocation(e,"uFillRect"),e.uGlobalAlpha=l.getUniformLocation(e,"uGlobalAlpha"),e.uGlobalColor=l.getUniformLocation(e,"uGlobalColor"),e.uTexture0=l.getUniformLocation(e,"uTexture0"),e.uModelViewMatrix=l.getUniformLocation(e,"uModelViewMatrix");var i=Math.PI*2/d;y[v*2+0]=0,y[v*2+1]=0,y[v*2+2]=1,y[v*2+3]=0,y[v*2+4]=1,y[v*2+5]=1,y[v*2+6]=0,y[v*2+7]=1;for(var s=0;s<d;s++){var o=i*s;y[m*2+s*2]=Math.sin(o),y[m*2+s*2+1]=Math.cos(o)}return y[g*2+0]=0,y[g*2+1]=0,y[g*2+2]=0,y[g*2+3]=0,b=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,b),l.bufferData(l.ARRAY_BUFFER,y,l.STATIC_DRAW),l.vertexAttribPointer(e.aVertexPosition,2,l.FLOAT,!1,0,0),l.enableVertexAttribArray(e.aVertexPosition),l.uniformMatrix3fv(e.uScreenSpaceShimMatrix,!1,w),P(e,C),e},D=function(e,t,n,r,i,s){a.identity(s),s[0]=t,s[4]=n,s[6]=r,s[7]=i,l.uniformMatrix3fv(e.uTextureMatrix,!1,s)},P=function(e,t){l.uniformMatrix3fv(e.uTextureMatrix,!1,t)},H=function(e){var t=o.clone(e);return t[1]=l.canvas.height-t[1],o.transformMat3(t,t,T),t},B=function(){h.pushState(),p=h.getTop()},j=function(){h.popState(),p=h.getTop(),tt(p.viewMatrix)},F=function(e){p.color=r.createRgba(e)},I=function(e){p.lineColor=r.createRgba(e)},q=function(e){p.opacity=e},R=function(e){l.clearColor(e[0],e[1],e[2],1)},U=function(e){a.scale(p.matrix,p.matrix,e)},z=function(e){a.translate(p.matrix,p.matrix,e)},W=function(e){a.rotate(p.matrix,p.matrix,e)},X=function(){l.clear(l.COLOR_BUFFER_BIT)},V=function(e,t,n,r,i){if(t===undefined)throw"Texture is undefined";l.uniform1i(e.uFillRect,0),l.uniform1f(e.uGlobalAlpha,p.opacity),l.uniform4fv(e.uGlobalColor,p.color),l.bindTexture(l.TEXTURE_2D,t.privateGlTextureResource),l.uniform1i(e.uTexture0,0),a.multiply(N,x,p.matrix),a.translate(N,N,n),a.rotate(N,N,Math.PI),a.scale(N,N,[-1,1]),a.scale(N,N,r),a.translate(N,N,[0,-1]),l.uniformMatrix3fv(e.uModelViewMatrix,!1,N),P(e,i?i:C),l.drawArrays(l.TRIANGLE_FAN,v,4)},$=function(e,t,n,r,i,s){if(t===undefined)throw"Texture is undefined";l.uniform1i(e.uFillRect,0),l.uniform1f(e.uGlobalAlpha,p.opacity),l.uniform4fv(e.uGlobalColor,p.color),l.bindTexture(l.TEXTURE_2D,t.privateGlTextureResource),l.uniform1i(e.uTexture0,0),a.multiply(N,x,p.matrix),a.translate(N,N,i),a.rotate(N,N,Math.PI),a.scale(N,N,[-1,1]),a.scale(N,N,s),a.translate(N,N,[0,-1]),l.uniformMatrix3fv(e.uModelViewMatrix,!1,N);var o=t.dimensions[0],u=t.dimensions[1];D(e,(r[0]-1)/o,(r[1]-1)/u,(n[0]+.5)/o,(n[1]+.5)/u,N),l.drawArrays(l.TRIANGLE_FAN,v,4)},J=function(e,t,n,r,i,s){s||(s=1),l.lineWidth(s),l.uniform1i(e.uFillRect,1),l.uniform1f(e.uGlobalAlpha,p.opacity),l.uniform4fv(e.uGlobalColor,p.lineColor),a.multiply(N,x,p.matrix),a.translate(N,N,[t,n]),a.scale(N,N,[r,i]),l.uniformMatrix3fv(e.uModelViewMatrix,!1,N),l.drawArrays(l.LINE_LOOP,v,4)},K=function(e,t,n,r,i){i||(i=1),l.lineWidth(i),l.uniform1i(e.uFillRect,1),l.uniform1f(e.uGlobalAlpha,p.opacity),l.uniform4fv(e.uGlobalColor,p.lineColor),a.multiply(N,x,p.matrix),a.translate(N,N,[t,n]),a.scale(N,N,[r,r]),l.uniformMatrix3fv(e.uModelViewMatrix,!1,N),l.drawArrays(l.LINE_LOOP,m,d)},Q=function(e,t,n,r,i,s){s||(s=1),l.lineWidth(s),l.uniform1i(e.uFillRect,1),l.uniform1f(e.uGlobalAlpha,p.opacity),l.uniform4fv(e.uGlobalColor,p.lineColor),a.multiply(N,x,p.matrix),l.uniformMatrix3fv(e.uModelViewMatrix,!1,N),y[g*2+0]=t,y[g*2+1]=n,y[g*2+2]=r,y[g*2+3]=i,l.bufferData(l.ARRAY_BUFFER,y,l.STATIC_DRAW),l.drawArrays(l.LINES,g,2)},G=function(e,t,n,r,i){l.uniform1i(e.uFillRect,1),l.uniform1f(e.uGlobalAlpha,p.opacity),l.uniform4fv(e.uGlobalColor,p.color),a.multiply(N,x,p.matrix),a.translate(N,N,[t,n]),a.scale(N,N,[r,i]),l.uniformMatrix3fv(e.uModelViewMatrix,!1,N),l.drawArrays(l.TRIANGLE_FAN,v,4)},Y=function(e,t){l.canvas.width=e,l.canvas.height=t,L(e,t,E),a.multiply(x,E,S)},Z=function(e){a.multiply(p.matrix,p.matrix,e)},et=function(e){a.copy(p.matrix,e)},tt=function(e){a.copy(p.viewMatrix,e),a.copy(S,e),L(l.canvas.width,l.canvas.height,E),a.multiply(x,E,S),a.invert(T,x)},nt=function(e,t,n,r,i){l.viewport(t,n,r,i),k(r,i,w),l.uniformMatrix3fv(e.uScreenSpaceShimMatrix,!1,w)},rt=function(){var e=l.getParameter(l.VENDOR)+";"+l.getParameter(l.RENDERER)+";"+l.getParameter(l.VERSION)+";"+l.getParameter(l.SHADING_LANGUAGE_VERSION);return{type:"webgl",width:l.canvas.width,height:l.canvas.height,info:e}},it=function(e){var t=Math.log(e)/Math.log(2);return t===parseInt(t,10)},st=function(e){var t=it(e.width)&&it(e.height),n=l.createTexture();return l.bindTexture(l.TEXTURE_2D,n),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),t?(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.generateMipmap(l.TEXTURE_2D)):(l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE)),l.bindTexture(l.TEXTURE_2D,null),{dimensions:[e.width,e.height],privateGlTextureResource:n}};return M}),define("c3TtVd3rj7BPHOmetcKxDeLDfncpdkLzPceSVTUQEMY=",["97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","a6QMpZpC/oS8xcSHem/guTKp+NBdWdqqxoayLw/oN8Y=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n=function(t){return Math.round(e.clamp(t,0,1)*255)},r=function(e,t,n){return[e,t,n]},i=function(e){return e.length===4?[e[0],e[1],e[2],e[3]]:[e[0],e[1],e[2],1]},s=function(){var e=Math.round(Math.random()*3),n=t.fromValues(.8,.8,.8);for(var r=0;r<n.length;r++)r===e?n[r]=.95:n[r]*=Math.random();return n},o=function(t){return t.length===4?"rgba("+n(t[0])+", "+n(t[1])+", "+n(t[2])+", "+e.clamp(t[3],0,1)+")":"rgb("+n(t[0])+", "+n(t[1])+", "+n(t[2])+")"};return{createRgb:r,createRgba:i,createRandom:s,formatCanvas:o}}),define("O0VUNb7eHdfy7Zk77vE6arREreHH14vpCkPPQ1yVsWI=",function(){"use strict";var e=typeof Int32Array!="undefined",t=e?Int32Array:Array;return{isSupported:function(){return e},create:function(e){return new t(e)},fromValues:function(n){return e?new t(n):n.slice(0)}}}),define("qcyBA6HTO/9GIJrM+92UIh/6/k62unY2OILgACwxGT8=",function(){"use strict";var e=typeof Int8Array!="undefined",t=e?Int8Array:Array;return{isSupported:function(){return e},create:function(e){return new t(e)},fromValues:function(n){return e?new t(n):n.slice(0)}}}),define("bA23bDq8fPntmQU9GQoK9B4kAtIeuQjrthbYTL8lteQ=",function(){"use strict";return function(){return typeof Float32Array!="undefined"}}),define("9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=",["bA23bDq8fPntmQU9GQoK9B4kAtIeuQjrthbYTL8lteQ="],function(e){"use strict";var t=e()?Float32Array:Array;return function(e){return new t(e)}}),define("FVHd7ApTLsQfGrxEv0dRsRbKKSZlAf1dzrptE8P5d20=",["9j5YbzgCjvaUn4tlE8fL6F5Uj/eoNIWP1ooU7TsRiWE=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t,n){"use strict";var r=function(e,t,n,r,i){return{opacity:e,color:t,lineColor:n,matrix:r,viewMatrix:i}},i=function(){var n=1,i=e(4),s=e(4),o=t.create(),u=t.create();return i[0]=1,i[1]=1,i[2]=1,i[3]=1,s[0]=1,s[1]=1,s[2]=1,s[3]=1,t.identity(o),t.identity(u),r(n,i,s,o,u)},s=function(e,n){n.opacity=e.opacity,n.color[0]=e.color[0],n.color[1]=e.color[1],n.color[2]=e.color[2],n.color[3]=e.color[3],n.lineColor[0]=e.lineColor[0],n.lineColor[1]=e.lineColor[1],n.lineColor[2]=e.lineColor[2],n.lineColor[3]=e.lineColor[3],t.copy(n.matrix,e.matrix),t.copy(n.viewMatrix,e.viewMatrix)},o=function(e){this.depth=e,this.stack=n.range(e),this.index=0;for(var t=0,r=this.stack;t<e;t++)r[t]=i()};return o.prototype={pushState:function(){var e=this.index,t=this.stack;if(e===this.depth-1)throw"Can not push state. Maximum state stack depth of "+this.depth+" was reached.";s(t[e],t[++this.index])},popState:function(){var e=this.index;if(!(e>0))throw"Can not pop state. The state stack is already depleted.";this.index--},getTop:function(){return this.stack[this.index]}},o}),define("GH0nggQp7UVp4RV7Ty6NNe5AI3I5Cw4zpAVEDu8nxiQ=",["FVHd7ApTLsQfGrxEv0dRsRbKKSZlAf1dzrptE8P5d20=","c3TtVd3rj7BPHOmetcKxDeLDfncpdkLzPceSVTUQEMY=","97QSKdFRX0w37qbL3KqhfQrCAv7uhiVQnnchaRbQLpk=","XkHHuWc5juwWekXa4T8qrEaFSxzgKdm3364FC6cx4Co=","yVWG+StUPY2cpL5TJDIz/GlQdjOt3yQROd6W8z+bGks="],function(e,t,n,r,i){"use strict";var s=n.modulo,o,u,a=t.formatCanvas([0,0,0,1]),f=new e(32),l=f.getTop(),c=1.015,h=-c,p,d=i.create();i.identity(d);var v=i.create();i.identity(v);var m=i.create();i.identity(m);var g=i.create();i.identity(g);var y=function(e,t,n){if(e+1===t){var r=n%1;return r===0?1:r}return 1},b=function(e){return e<0&&(e+=1),s(e,1)},w=function(e,t,n,r){var i=Math.abs(n[0]),s=Math.abs(n[4]),o=t.dimensions[0],u=t.dimensions[1],a=r[0],f=r[1],l=b(n[6]),c=b(n[7]),h=l+Math.abs(i),p=c+Math.abs(s),d=Math.round(Math.ceil(h)-Math.floor(l)),v=Math.round(Math.ceil(p)-Math.floor(c));for(var m=0,g=c,w=0,E=0,S=0,x=0,T=0,N=0;m<v;m++){w=y(m,v,p),E=w-g,N+=E,S=E/s;for(var C=0,k=l,L=0,A=0,O=0,M=0;C<d;C++)L=y(C,d,h),A=L-k,M+=A,x=A/i,e.drawImage(t.privateImageResource,o*k,u*g,o*A,u*E,a*O-.5,f*T-.5,a*x+1,f*S+1),O+=x,k=0;T+=S,g=0}},E=function(e,t,n,r){var i=e,s=e+n,o=t+r,a=t;return i<=0&&s>=u.width&&o>=u.height&&a<=0},S=function(e,t,n,r){o.beginPath(),o.rect(e,t,n,r),o.closePath(),o.clip()},x=function(e,t){i.multiply(m,e,t),i.invert(g,m),p=Math.abs(1/m[0]),o.setTransform(m[0],m[1],m[3],m[4],m[6],m[7])},T=function(){J(0,0,u.width,u.height);var e=u.width,t=u.height;n.mat3Ortho(d,-e*.5,e*.5,-t*.5,t*.5),i.translate(d,d,[-e*.5,-t*.5]),x(v,d)},N=function(){return T(),{clear:j,createTexture:Q,drawTexture:F,drawSubTexture:I,drawRect:q,drawCircle:R,drawLine:U,fillRect:z,getConfiguration:K,resizeColorBuffer:W,restore:D,rotate:B,save:_,scale:P,setClearColor:M,setColor:L,setLineColor:A,setGlobalAlpha:O,setTransform:V,setViewMatrix:$,transform:X,translate:H,viewport:J,transformScreenToWorld:k,getCanvasElement:function(){return u}}},C=function(e){if(e===undefined)throw"Missing first argument.";return o!==undefined?o:(u=e,o=u.getContext("2d"),o===null?null:N())},k=function(e){return r.transformMat3(r.create(),e,g)},L=function(e){l.color=t.createRgba(e),o.fillStyle=t.formatCanvas(e)},A=function(e){l.lineColor=t.createRgba(e),o.strokeStyle=t.formatCanvas(e)},O=function(e){l.opacity=e,o.globalAlpha=e},M=function(e){a=t.formatCanvas(e)},_=function(){f.pushState(),l=f.getTop()},D=function(){f.popState(),l=f.getTop(),$(l.viewMatrix)},P=function(e){i.scale(l.matrix,l.matrix,e)},H=function(e){i.translate(l.matrix,l.matrix,e)},B=function(e){i.rotate(l.matrix,e)},j=function(){o.save(),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,o.fillStyle=a,o.fillRect(0,0,u.width,u.height),o.restore()},F=function(e,t,n,r){if(e===undefined)throw"Texture is undefined";o.save(),o.globalAlpha=l.opacity;var i=l.matrix;o.transform(i[0],i[1],i[3],i[4],i[6],i[7]);if(!r)o.translate(t[0],t[1]),o.rotate(Math.PI),o.scale(-1,1),o.translate(0,-n[1]),o.drawImage(e.privateImageResource,0,0,n[0],n[1]);else{o.translate(t[0],t[1]),o.rotate(Math.PI);var s=r[0]<0,u=r[4]<0;o.scale(s?1:-1,u?-1:1),o.translate(s?-n[0]:0,u?0:-n[1]),w(o,e,r,n)}o.restore()},I=function(e,t,n,r,i){if(e===undefined)throw"Texture is undefined";o.save(),o.globalAlpha=l.opacity;var s=l.matrix;o.transform(s[0],s[1],s[3],s[4],s[6],s[7]),o.translate(r[0],r[1]),o.rotate(Math.PI),o.scale(h,c),o.translate(0,-i[1]),o.drawImage(e.privateImageResource,t[0],t[1],n[0],n[1],0,0,i[0],i[1]),o.restore()},q=function(e,t,n,r,i){i||(i=1),o.save(),o.globalAlpha=l.opacity;var s=l.matrix;o.transform(s[0],s[1],s[3],s[4],s[6],s[7]),o.lineWidth=p*i,o.strokeRect(e,t,n,r),o.restore()},R=function(e,t,n,r){r||(r=1),o.save(),o.globalAlpha=l.opacity;var i=l.matrix;o.transform(i[0],i[1],i[3],i[4],i[6],i[7]),o.lineWidth=p*r,o.beginPath(),o.arc(e,t,n,0,Math.PI*2,!0),o.stroke(),o.restore()},U=function(e,t,n,r,i){i||(i=1),o.save(),o.globalAlpha=l.opacity;var s=l.matrix;o.transform(s[0],s[1],s[3],s[4],s[6],s[7]);var u=p*i;o.lineWidth=u,o.beginPath(),o.moveTo(e,t),o.lineTo(n,r),o.stroke(),o.restore()},z=function(e,t,n,r){o.save(),o.globalAlpha=l.opacity;var i=l.matrix;o.transform(i[0],i[1],i[3],i[4],i[6],i[7]),o.translate(e,t),o.rotate(Math.PI),o.scale(-1,1),o.translate(0,-r),o.fillRect(0,0,n,r),o.restore()},W=function(e,t){u.width=e,u.height=t},X=function(e){i.multiply(e,l.matrix)},V=function(e){i.copy(l.matrix,e)},$=function(e){i.copy(l.viewMatrix,e),i.copy(d,e),x(v,d)},J=function(e,t,n,r){i.identity(v),v[0]=n*.5,v[4]=r*.5*-1,v[6]=e+n*.5,v[7]=t+r*.5,x(v,d),E(e,t,n,r)||S(e,t,n,r)},K=function(){return{type:"canvas-2d",width:u.width,height:u.height,info:""}},Q=function(e){return{dimensions:[e.width,e.height],privateImageResource:e}};return C}),define("bT1dgc/3zs3/zhPuJg4Xiztl8XLm5Uc+D+Eqtkbsmd4=",["GH0nggQp7UVp4RV7Ty6NNe5AI3I5Cw4zpAVEDu8nxiQ=","nUDcNlIdSATy78dLW44o5WS90njS6/U29KzWJbZcW7c=","Pcc/biVPUnlHYey99hXN/gpvcMdumN7m5R8g2fh6f9Q="],function(e,t,n){"use strict";var r="canvas-2d",i="webgl",s=function(s,o,u,a,f){var l=n(o,u,a),c;if(l===null||l===undefined)throw"Could not create canvas node.";if(f===undefined?!0:f===i){c=t(l);if(c)return c}if(f===undefined?!0:f===r){l.scalingMode&&(l.scalingMode="none"),c=e(l);if(c)return c}throw"Could not create a rendering back-end."};return{BACK_END_WEBGL:i,BACK_END_CANVAS:r,createContext2d:s}}),define("dBVCdOd2ydzpZ+4Sx8Q/uZzh/d0W0UPJ9KIqh5lHd9E=",["bT1dgc/3zs3/zhPuJg4Xiztl8XLm5Uc+D+Eqtkbsmd4=","XqX2t9n50Hfi19mtSZs5LEk42LHNrgz7ttwgdF8R2Wk="],function(e,t){"use strict";var n={renderingBackEnd:{validValues:[e.BACK_END_CANVAS,e.BACK_END_WEBGL],configurable:!0},audioBackEnd:{validValues:[t.BACK_END_DUMMY_AUDIO,t.BACK_END_WEB_AUDIO,t.BACK_END_HTML5_AUDIO,t.BACK_END_NATIVE_AUDIO],configurable:!0},libraryUrl:{configurable:!0}},r={renderingBackEnd:"canvas-2d",audioBackEnd:"html5",libraryUrl:"library"};return{defaultOptions:r,validOptions:n}}),define("QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg=",function(){"use strict";return function(e,t){setTimeout(e,t)}}),define("HFDYWVgRyrhHY2KATklGRkPckqV4jVAACe4xWOlbLYY=",["QaD0f6fU2UVjItxoSDDWeB2ElIaLINNHevlJfzmoDBg="],function(e){"use strict";if(typeof window=="undefined")return function(t){e(t,5)};var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,n=!!t;return n?function(e){t.call(window,e)}:function(t){e(function(){t(new Date)},1e3/60)}}),define("z+qR2YKjhvFUFs3XpLlrgIbKUfoFmWoR3c1/5yaCnVA=",function(){"use strict";return typeof CocoonJS=="object"}),define("/N66TS4x5oN6xxyJsNRBwLtUixNN3mX6mvW2RfsfciI=",["z+qR2YKjhvFUFs3XpLlrgIbKUfoFmWoR3c1/5yaCnVA=","csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc=","dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU="],function(e,t,n){"use strict";return{loadInterstitial:function(){e?CocoonJS.Ad.preloadFullScreen():t?ejecta.loadInterstitial():n&&NATIVE.advertisement.loadInterstitial()},showInterstitial:function(){e?(CocoonJS.Ad.setBannerLayout(CocoonJS.Ad.BannerLayout.TOP_CENTER),CocoonJS.Ad.showFullScreen()):t?ejecta.showInterstitial():n&&NATIVE.advertisement.showInterstitial()}}}),define("kPqicgHkZUNtccahT1HPrc/4aVLyUwv+cXaSLpXJHxo=",function(){"use strict";return{getCurrentInMs:function(){return Date.now()}}}),define("KbXW13xQZi+ZmL5T5siHSuWpqYOZ0+3IRsqaL0xh2Vc=",function(){"use strict";var e=typeof window=="undefined"?function(){}:window.createDependentModules;return{createDependentModules:e,require:require,define:define}}),define("ZuE33vO9o4JHXXRCIMSkgktoZlMj42+5BJ82TWoxaiI=",["wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e){"use strict";var t=null,n=function(e,t){t.preventDefault();var n=t.wheelDelta?t.wheelDelta:t.detail*-1,r=n>0?1:-1;e({type:"mouseWheel",direction:r})},r=function(r,i){t=e.bind(n,this,i),r.addEventListener("mousewheel",t,!0),r.addEventListener("DOMMouseScroll",t,!0)},i=function(e){nativeKeyHandler!==null&&(e.removeEventLister("mousewheel",t),e.removeEventLister("DOMMouseScroll",t)),nativeKeyHandler=null};return{registerListener:r,removeListener:i}}),define("csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc=",function(){"use strict";return typeof ejecta!="undefined"}),define("W6mNTkG1uX1DfWZaeMz1+GwvmmB1bDZm3iM3gY0QyR4=",["csuP5G7u9Prgc+YUYtj6IoO8NxstMN2E2KSVP+DilOc="],function(e){"use strict";return{hasPointerApi:function(){return window.navigator.pointerEnabled},hasMicrosoftPointerApi:function(){return window.navigator.msPointerEnabled},hasPointerTouchApi:function(){return"msMaxTouchPoints"in window.navigator&&window.navigator.msMaxTouchPoints>0||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0},hasWebkitTouchApi:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||e}}}),define("WEqyErIlORDW9eDhu65Ws2hgFAZMEGbTljDyyVrAG04=",["W6mNTkG1uX1DfWZaeMz1+GwvmmB1bDZm3iM3gY0QyR4=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";function o(e){if(!e.getBoundingClientRect)return[0,0];var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,s=window.pageXOffset||r.scrollLeft||n.scrollLeft,o=r.clientTop||n.clientTop||0,u=r.clientLeft||n.clientLeft||0,a=t.top+i-o,f=t.left+s-u;return[Math.round(f),Math.round(a)]}var n=null,r=[],i={pointermove:"pointerMove",pointerup:"pointerUp",pointerdown:"pointerDown",pointercancel:"pointerCancel",MSPointerMove:"pointerMove",MSPointerUp:"pointerUp",MSPointerDown:"pointerDown",MSPointerCancel:"pointerCancel",touchstart:"pointerDown",touchmove:"pointerMove",touchend:"pointerUp",touchcancel:"pointerCancel",mousemove:"pointerMove",mousedown:"pointerDown",mouseup:"pointerUp"},s=function(e,t,n,r,i,s){e({type:t,pointerId:n,button:r,position:[i,s]})},u=function(e,t,n,r,i){var u=i.type,a=0,f=r.getValue("currentScreenSize"),l=o(n);i.preventDefault(),t[u]&&(u=t[u]);for(var c=0,h=i.changedTouches.length;c<h;c++){var p=i.changedTouches[c],d=p.identifier,v=p.pageX-l[0],m=p.pageY-l[1];if(v<0||v>f[0]||m<0||m>f[1])continue;s(e,u,d,a,v,m)}},a=function(e,t,n,r,i){var u=i.type,a=i.button,f=typeof i.pointerId!="undefined"?i.pointerId:1,l=r.getValue("currentScreenSize"),c=o(n),h=i.pageX-c[0],p=i.pageY-c[1];if(h<0||h>l[0]||p<0||p>l[1])return;a>0&&i.preventDefault(),t[u]&&(u=t[u]),s(e,u,f,a,h,p)},f=function(s,o,f,l){e.hasPointerApi()?(n=t.bind(a,this,l,i,o,f),r=["pointermove","pointerup","pointerdown","pointercancel"]):e.hasMicrosoftPointerApi()?(n=t.bind(a,this,l,i,o,f),r=["MSPointerMove","MSPointerUp","MSPointerDown","MSPointerCancel"]):e.hasWebkitTouchApi()?(n=t.bind(u,this,l,i,o,f),r=["touchstart","touchmove","touchend","touchcancel"]):(n=t.bind(a,this,l,i,o,f),r=["mousemove","mousedown","mouseup"]);for(var c in r)s.addEventListener(r[c],n,!0)},l=function(e){if(n!==null){for(var t in r)e.removeEventListener(r[t],n);r.length=0,n=null}};return{registerListener:f,removeListener:l}}),define("PF35L31cTrPY3rM0h3RsHDbSwWkzDUR3A+sTdxOq1so=",function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(S.has(e,u)){s++;if(!(o=S.has(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(S.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new P(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(S.isArray(e)){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(S.has(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=S.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),S.isArray(e)&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},S.sortBy=function(e,t,n){var r=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):e.toArray&&S.isFunction(e.toArray)?e.toArray():S.values(e):[]},S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return e.length<3&&(t=!0),S.reduce(r,function(n,r,s){if(t?S.last(n)!==r||!n.length:!S.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1),!0);return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return S.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u,a=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},S.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={};return x(S.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(e==null)return!0;if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!S.has(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.has=function(e,t){return f.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(e,t){if(e==null)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){x(S.functions(e),function(t){B(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var O in A)A[A[O]]=O;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,_=/\\(\\|'|r|n|t|u2028|u2029)/g,D=function(e){return e.replace(_,function(e,t){return A[t]})};S.template=function(e,t,n){n=S.defaults(n||{},S.templateSettings);var r="__p+='"+e.replace(M,function(e){return"\\"+A[e]}).replace(n.escape||L,function(e,t){return"'+\n_.escape("+D(t)+")+\n'"}).replace(n.interpolate||L,function(e,t){return"'+\n("+D(t)+")+\n'"}).replace(n.evaluate||L,function(e,t){return"';\n"+D(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,S);var s=function(e){return i.call(this,e,S)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},S.chain=function(e){return S(e).chain()};var P=function(e){this._wrapped=e};S.prototype=P.prototype;var H=function(e,t){return t?S(e).chain():e},B=function(e,t){P.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),H(t.apply(S,e),this._chain)}};return S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];P.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],H(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];P.prototype[e]=function(){return H(t.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped},S.noConflict()}),define("My+Bb49yS9JyZg1Wb/B2ArZhmOLA98u8ywNsDb9JYlw=",["dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU=","wVFr9CZXGUAbM65CNh4+09WyEbulEsZUP6h4oyE02mk="],function(e,t){"use strict";var n,r=function(e,t){return{keyCode:e,type:t=="keydown"?"keyDown":"keyUp"}},i=function(e,t){t.preventDefault(),e(r(t.keyCode,t.type))},s=function(s,o){if(!s||!o)return;e&&NATIVE.events.registerHandler("keyEvent",function(e){o(r(e.keyCode,e.type))}),n=t.bind(i,this,o),s.addEventListener("keyup",n,!0),s.addEventListener("keydown",n,!0)},o=function(e){n!==null&&(e.removeEventLister("keyup",n),e.removeEventLister("keydown",n)),n=null};return{registerListener:s,removeListener:o}}),define("nBRERbho9PXv7Yc7UKzlz9aYKuD6BeNrhTlfLlHck4o=",["My+Bb49yS9JyZg1Wb/B2ArZhmOLA98u8ywNsDb9JYlw=","WEqyErIlORDW9eDhu65Ws2hgFAZMEGbTljDyyVrAG04=","ZuE33vO9o4JHXXRCIMSkgktoZlMj42+5BJ82TWoxaiI="],function(e,t,n){"use strict";var r=function(e){e.preventDefault()},i=function(i){document.addEventListener("contextmenu",r,!0),e.registerListener(document,i),n.registerListener(document,i),t.registerListener(document,this.container,this.configurationManager,i)},s=function(){e.removeListener(document),n.removeListener(document),t.removeListener(document)},o=function(e,t){this.configurationManager=e,this.container=t.getCanvasElement()};return o.prototype={setInputEventListener:i,removeInputEventListener:s},o}),define("Uk05TQbFhLjcnGbdbOPLJdj/vU155EGxAWS+19s4cWU=",function(){var e=1e-6,t={};(function(e,t){function n(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(e,t,n){n.get instanceof Function&&e.__defineGetter__(t,n.get),n.set instanceof Function&&e.__defineSetter__(t,n.set)}),e.inherit=function(e,t){var r=e;n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=r},e.generateCallback=function(t,n){return function(){n.apply(t,arguments)}},e.NVector=function(n){n===t&&(n=0);var r=new Array(n||0);for(var i=0;i<n;++i)r[i]=0;return r},e.is=function(n,r){return n===null?!1:r instanceof Function&&n instanceof r?!0:n.constructor.__implements!=t&&n.constructor.__implements[r]?!0:!1},e.parseUInt=function(e){return Math.abs(parseInt(e))}})(t);var n=Array,r=t.NVector;typeof t=="undefined"&&(t={}),typeof t.Collision=="undefined"&&(t.Collision={}),typeof t.Collision.Shapes=="undefined"&&(t.Collision.Shapes={}),typeof t.Common=="undefined"&&(t.Common={}),typeof t.Common.Math=="undefined"&&(t.Common.Math={}),typeof t.Dynamics=="undefined"&&(t.Dynamics={}),typeof t.Dynamics.Contacts=="undefined"&&(t.Dynamics.Contacts={}),typeof t.Dynamics.Controllers=="undefined"&&(t.Dynamics.Controllers={}),typeof t.Dynamics.Joints=="undefined"&&(t.Dynamics.Joints={}),function(){function e(){e.b2AABB.apply(this,arguments)}function n(){n.b2Bound.apply(this,arguments)}function r(){r.b2BoundValues.apply(this,arguments),this.constructor===r&&this.b2BoundValues.apply(this,arguments)}function i(){i.b2Collision.apply(this,arguments)}function s(){s.b2ContactID.apply(this,arguments),this.constructor===s&&this.b2ContactID.apply(this,arguments)}function o(){o.b2ContactPoint.apply(this,arguments)}function u(){u.b2Distance.apply(this,arguments)}function a(){a.b2DistanceInput.apply(this,arguments)}function f(){f.b2DistanceOutput.apply(this,arguments)}function l(){l.b2DistanceProxy.apply(this,arguments)}function c(){c.b2DynamicTree.apply(this,arguments),this.constructor===c&&this.b2DynamicTree.apply(this,arguments)}function h(){h.b2DynamicTreeBroadPhase.apply(this,arguments)}function p(){p.b2DynamicTreeNode.apply(this,arguments)}function d(){d.b2DynamicTreePair.apply(this,arguments)}function v(){v.b2Manifold.apply(this,arguments),this.constructor===v&&this.b2Manifold.apply(this,arguments)}function m(){m.b2ManifoldPoint.apply(this,arguments),this.constructor===m&&this.b2ManifoldPoint.apply(this,arguments)}function g(){g.b2Point.apply(this,arguments)}function y(){y.b2RayCastInput.apply(this,arguments),this.constructor===y&&this.b2RayCastInput.apply(this,arguments)}function b(){b.b2RayCastOutput.apply(this,arguments)}function w(){w.b2Segment.apply(this,arguments)}function E(){E.b2SeparationFunction.apply(this,arguments)}function S(){S.b2Simplex.apply(this,arguments),this.constructor===S&&this.b2Simplex.apply(this,arguments)}function x(){x.b2SimplexCache.apply(this,arguments)}function T(){T.b2SimplexVertex.apply(this,arguments)}function N(){N.b2TimeOfImpact.apply(this,arguments)}function C(){C.b2TOIInput.apply(this,arguments)}function k(){k.b2WorldManifold.apply(this,arguments),this.constructor===k&&this.b2WorldManifold.apply(this,arguments)}function L(){L.ClipVertex.apply(this,arguments)}function A(){A.Features.apply(this,arguments)}function O(){O.b2CircleShape.apply(this,arguments),this.constructor===O&&this.b2CircleShape.apply(this,arguments)}function M(){M.b2EdgeChainDef.apply(this,arguments),this.constructor===M&&this.b2EdgeChainDef.apply(this,arguments)}function _(){_.b2EdgeShape.apply(this,arguments),this.constructor===_&&this.b2EdgeShape.apply(this,arguments)}function D(){D.b2MassData.apply(this,arguments)}function P(){P.b2PolygonShape.apply(this,arguments),this.constructor===P&&this.b2PolygonShape.apply(this,arguments)}function H(){H.b2Shape.apply(this,arguments),this.constructor===H&&this.b2Shape.apply(this,arguments)}function B(){B.b2Color.apply(this,arguments),this.constructor===B&&this.b2Color.apply(this,arguments)}function j(){j.b2Settings.apply(this,arguments)}function F(){F.b2Mat22.apply(this,arguments),this.constructor===F&&this.b2Mat22.apply(this,arguments)}function I(){I.b2Mat33.apply(this,arguments),this.constructor===I&&this.b2Mat33.apply(this,arguments)}function q(){q.b2Math.apply(this,arguments)}function R(){R.b2Sweep.apply(this,arguments)}function U(){U.b2Transform.apply(this,arguments),this.constructor===U&&this.b2Transform.apply(this,arguments)}function z(){z.b2Vec2.apply(this,arguments),this.constructor===z&&this.b2Vec2.apply(this,arguments)}function W(){W.b2Vec3.apply(this,arguments),this.constructor===W&&this.b2Vec3.apply(this,arguments)}function X(){X.b2Body.apply(this,arguments),this.constructor===X&&this.b2Body.apply(this,arguments)}function V(){V.b2BodyDef.apply(this,arguments),this.constructor===V&&this.b2BodyDef.apply(this,arguments)}function $(){$.b2ContactFilter.apply(this,arguments)}function J(){J.b2ContactImpulse.apply(this,arguments)}function K(){K.b2ContactListener.apply(this,arguments)}function Q(){Q.b2ContactManager.apply(this,arguments),this.constructor===Q&&this.b2ContactManager.apply(this,arguments)}function G(){G.b2DebugDraw.apply(this,arguments),this.constructor===G&&this.b2DebugDraw.apply(this,arguments)}function Y(){Y.b2DestructionListener.apply(this,arguments)}function Z(){Z.b2FilterData.apply(this,arguments)}function et(){et.b2Fixture.apply(this,arguments),this.constructor===et&&this.b2Fixture.apply(this,arguments)}function tt(){tt.b2FixtureDef.apply(this,arguments),this.constructor===tt&&this.b2FixtureDef.apply(this,arguments)}function nt(){nt.b2Island.apply(this,arguments),this.constructor===nt&&this.b2Island.apply(this,arguments)}function rt(){rt.b2TimeStep.apply(this,arguments)}function it(){it.b2World.apply(this,arguments),this.constructor===it&&this.b2World.apply(this,arguments)}function st(){st.b2CircleContact.apply(this,arguments)}function ot(){ot.b2Contact.apply(this,arguments),this.constructor===ot&&this.b2Contact.apply(this,arguments)}function ut(){ut.b2ContactConstraint.apply(this,arguments),this.constructor===ut&&this.b2ContactConstraint.apply(this,arguments)}function at(){at.b2ContactConstraintPoint.apply(this,arguments)}function ft(){ft.b2ContactEdge.apply(this,arguments)}function lt(){lt.b2ContactFactory.apply(this,arguments),this.constructor===lt&&this.b2ContactFactory.apply(this,arguments)}function ct(){ct.b2ContactRegister.apply(this,arguments)}function ht(){ht.b2ContactResult.apply(this,arguments)}function pt(){pt.b2ContactSolver.apply(this,arguments),this.constructor===pt&&this.b2ContactSolver.apply(this,arguments)}function dt(){dt.b2EdgeAndCircleContact.apply(this,arguments)}function vt(){vt.b2NullContact.apply(this,arguments),this.constructor===vt&&this.b2NullContact.apply(this,arguments)}function mt(){mt.b2PolyAndCircleContact.apply(this,arguments)}function gt(){gt.b2PolyAndEdgeContact.apply(this,arguments)}function yt(){yt.b2PolygonContact.apply(this,arguments)}function bt(){bt.b2PositionSolverManifold.apply(this,arguments),this.constructor===bt&&this.b2PositionSolverManifold.apply(this,arguments)}function wt(){wt.b2BuoyancyController.apply(this,arguments)}function Et(){Et.b2ConstantAccelController.apply(this,arguments)}function St(){St.b2ConstantForceController.apply(this,arguments)}function xt(){xt.b2Controller.apply(this,arguments)}function Tt(){Tt.b2ControllerEdge.apply(this,arguments)}function Nt(){Nt.b2GravityController.apply(this,arguments)}function Ct(){Ct.b2TensorDampingController.apply(this,arguments)}function kt(){kt.b2DistanceJoint.apply(this,arguments),this.constructor===kt&&this.b2DistanceJoint.apply(this,arguments)}function Lt(){Lt.b2DistanceJointDef.apply(this,arguments),this.constructor===Lt&&this.b2DistanceJointDef.apply(this,arguments)}function At(){At.b2FrictionJoint.apply(this,arguments),this.constructor===At&&this.b2FrictionJoint.apply(this,arguments)}function Ot(){Ot.b2FrictionJointDef.apply(this,arguments),this.constructor===Ot&&this.b2FrictionJointDef.apply(this,arguments)}function Mt(){Mt.b2GearJoint.apply(this,arguments),this.constructor===Mt&&this.b2GearJoint.apply(this,arguments)}function _t(){_t.b2GearJointDef.apply(this,arguments),this.constructor===_t&&this.b2GearJointDef.apply(this,arguments)}function Dt(){Dt.b2Jacobian.apply(this,arguments)}function Pt(){Pt.b2Joint.apply(this,arguments),this.constructor===Pt&&this.b2Joint.apply(this,arguments)}function Ht(){Ht.b2JointDef.apply(this,arguments),this.constructor===Ht&&this.b2JointDef.apply(this,arguments)}function Bt(){Bt.b2JointEdge.apply(this,arguments)}function jt(){jt.b2LineJoint.apply(this,arguments),this.constructor===jt&&this.b2LineJoint.apply(this,arguments)}function Ft(){Ft.b2LineJointDef.apply(this,arguments),this.constructor===Ft&&this.b2LineJointDef.apply(this,arguments)}function It(){It.b2MouseJoint.apply(this,arguments),this.constructor===It&&this.b2MouseJoint.apply(this,arguments)}function qt(){qt.b2MouseJointDef.apply(this,arguments),this.constructor===qt&&this.b2MouseJointDef.apply(this,arguments)}function Rt(){Rt.b2PrismaticJoint.apply(this,arguments),this.constructor===Rt&&this.b2PrismaticJoint.apply(this,arguments)}function Ut(){Ut.b2PrismaticJointDef.apply(this,arguments),this.constructor===Ut&&this.b2PrismaticJointDef.apply(this,arguments)}function zt(){zt.b2PulleyJoint.apply(this,arguments),this.constructor===zt&&this.b2PulleyJoint.apply(this,arguments)}function Wt(){Wt.b2PulleyJointDef.apply(this,arguments),this.constructor===Wt&&this.b2PulleyJointDef.apply(this,arguments)}function Xt(){Xt.b2RevoluteJoint.apply(this,arguments),this.constructor===Xt&&this.b2RevoluteJoint.apply(this,arguments)}function Vt(){Vt.b2RevoluteJointDef.apply(this,arguments),this.constructor===Vt&&this.b2RevoluteJointDef.apply(this,arguments)}function $t(){$t.b2WeldJoint.apply(this,arguments),this.constructor===$t&&this.b2WeldJoint.apply(this,arguments)}function Jt(){Jt.b2WeldJointDef.apply(this,arguments),this.constructor===Jt&&this.b2WeldJointDef.apply(this,arguments)}t.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",t.Collision.b2AABB=e,t.Collision.b2Bound=n,t.Collision.b2BoundValues=r,t.Collision.b2Collision=i,t.Collision.b2ContactID=s,t.Collision.b2ContactPoint=o,t.Collision.b2Distance=u,t.Collision.b2DistanceInput=a,t.Collision.b2DistanceOutput=f,t.Collision.b2DistanceProxy=l,t.Collision.b2DynamicTree=c,t.Collision.b2DynamicTreeBroadPhase=h,t.Collision.b2DynamicTreeNode=p,t.Collision.b2DynamicTreePair=d,t.Collision.b2Manifold=v,t.Collision.b2ManifoldPoint=m,t.Collision.b2Point=g,t.Collision.b2RayCastInput=y,t.Collision.b2RayCastOutput=b,t.Collision.b2Segment=w,t.Collision.b2SeparationFunction=E,t.Collision.b2Simplex=S,t.Collision.b2SimplexCache=x,t.Collision.b2SimplexVertex=T,t.Collision.b2TimeOfImpact=N,t.Collision.b2TOIInput=C,t.Collision.b2WorldManifold=k,t.Collision.ClipVertex=L,t.Collision.Features=A,t.Collision.Shapes.b2CircleShape=O,t.Collision.Shapes.b2EdgeChainDef=M,t.Collision.Shapes.b2EdgeShape=_,t.Collision.Shapes.b2MassData=D,t.Collision.Shapes.b2PolygonShape=P,t.Collision.Shapes.b2Shape=H,t.Common.b2internal="Box2D.Common.b2internal",t.Common.b2Color=B,t.Common.b2Settings=j,t.Common.Math.b2Mat22=F,t.Common.Math.b2Mat33=I,t.Common.Math.b2Math=q,t.Common.Math.b2Sweep=R,t.Common.Math.b2Transform=U,t.Common.Math.b2Vec2=z,t.Common.Math.b2Vec3=W,t.Dynamics.b2Body=X,t.Dynamics.b2BodyDef=V,t.Dynamics.b2ContactFilter=$,t.Dynamics.b2ContactImpulse=J,t.Dynamics.b2ContactListener=K,t.Dynamics.b2ContactManager=Q,t.Dynamics.b2DebugDraw=G,t.Dynamics.b2DestructionListener=Y,t.Dynamics.b2FilterData=Z,t.Dynamics.b2Fixture=et,t.Dynamics.b2FixtureDef=tt,t.Dynamics.b2Island=nt,t.Dynamics.b2TimeStep=rt,t.Dynamics.b2World=it,t.Dynamics.Contacts.b2CircleContact=st,t.Dynamics.Contacts.b2Contact=ot,t.Dynamics.Contacts.b2ContactConstraint=ut,t.Dynamics.Contacts.b2ContactConstraintPoint=at,t.Dynamics.Contacts.b2ContactEdge=ft,t.Dynamics.Contacts.b2ContactFactory=lt,t.Dynamics.Contacts.b2ContactRegister=ct,t.Dynamics.Contacts.b2ContactResult=ht,t.Dynamics.Contacts.b2ContactSolver=pt,t.Dynamics.Contacts.b2EdgeAndCircleContact=dt,t.Dynamics.Contacts.b2NullContact=vt,t.Dynamics.Contacts.b2PolyAndCircleContact=mt,t.Dynamics.Contacts.b2PolyAndEdgeContact=gt,t.Dynamics.Contacts.b2PolygonContact=yt,t.Dynamics.Contacts.b2PositionSolverManifold=bt,t.Dynamics.Controllers.b2BuoyancyController=wt,t.Dynamics.Controllers.b2ConstantAccelController=Et,t.Dynamics.Controllers.b2ConstantForceController=St,t.Dynamics.Controllers.b2Controller=xt,t.Dynamics.Controllers.b2ControllerEdge=Tt,t.Dynamics.Controllers.b2GravityController=Nt,t.Dynamics.Controllers.b2TensorDampingController=Ct,t.Dynamics.Joints.b2DistanceJoint=kt,t.Dynamics.Joints.b2DistanceJointDef=Lt,t.Dynamics.Joints.b2FrictionJoint=At,t.Dynamics.Joints.b2FrictionJointDef=Ot,t.Dynamics.Joints.b2GearJoint=Mt,t.Dynamics.Joints.b2GearJointDef=_t,t.Dynamics.Joints.b2Jacobian=Dt,t.Dynamics.Joints.b2Joint=Pt,t.Dynamics.Joints.b2JointDef=Ht,t.Dynamics.Joints.b2JointEdge=Bt,t.Dynamics.Joints.b2LineJoint=jt,t.Dynamics.Joints.b2LineJointDef=Ft,t.Dynamics.Joints.b2MouseJoint=It,t.Dynamics.Joints.b2MouseJointDef=qt,t.Dynamics.Joints.b2PrismaticJoint=Rt,t.Dynamics.Joints.b2PrismaticJointDef=Ut,t.Dynamics.Joints.b2PulleyJoint=zt,t.Dynamics.Joints.b2PulleyJointDef=Wt,t.Dynamics.Joints.b2RevoluteJoint=Xt,t.Dynamics.Joints.b2RevoluteJointDef=Vt,t.Dynamics.Joints.b2WeldJoint=$t,t.Dynamics.Joints.b2WeldJointDef=Jt}(),t.postDefs=[],function(){var i=t.Collision.Shapes.b2CircleShape,s=t.Collision.Shapes.b2EdgeChainDef,o=t.Collision.Shapes.b2EdgeShape,u=t.Collision.Shapes.b2MassData,a=t.Collision.Shapes.b2PolygonShape,f=t.Collision.Shapes.b2Shape,l=t.Common.b2Color,c=t.Common.b2internal,h=t.Common.b2Settings,p=t.Common.Math.b2Mat22,d=t.Common.Math.b2Mat33,v=t.Common.Math.b2Math,m=t.Common.Math.b2Sweep,g=t.Common.Math.b2Transform,y=t.Common.Math.b2Vec2,b=t.Common.Math.b2Vec3,w=t.Collision.b2AABB,E=t.Collision.b2Bound,S=t.Collision.b2BoundValues,x=t.Collision.b2Collision,T=t.Collision.b2ContactID,N=t.Collision.b2ContactPoint,C=t.Collision.b2Distance,k=t.Collision.b2DistanceInput,L=t.Collision.b2DistanceOutput,A=t.Collision.b2DistanceProxy,O=t.Collision.b2DynamicTree,M=t.Collision.b2DynamicTreeBroadPhase,_=t.Collision.b2DynamicTreeNode,D=t.Collision.b2DynamicTreePair,P=t.Collision.b2Manifold,H=t.Collision.b2ManifoldPoint,B=t.Collision.b2Point,j=t.Collision.b2RayCastInput,F=t.Collision.b2RayCastOutput,I=t.Collision.b2Segment,q=t.Collision.b2SeparationFunction,R=t.Collision.b2Simplex,U=t.Collision.b2SimplexCache,z=t.Collision.b2SimplexVertex,W=t.Collision.b2TimeOfImpact,X=t.Collision.b2TOIInput,V=t.Collision.b2WorldManifold,$=t.Collision.ClipVertex,J=t.Collision.Features,K=t.Collision.IBroadPhase;w.b2AABB=function(){this.lowerBound=new y,this.upperBound=new y},w.prototype.IsValid=function(){var e=this.upperBound.x-this.lowerBound.x,t=this.upperBound.y-this.lowerBound.y,n=e>=0&&t>=0;return n=n&&this.lowerBound.IsValid()&&this.upperBound.IsValid(),n},w.prototype.GetCenter=function(){return new y((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},w.prototype.GetExtents=function(){return new y((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},w.prototype.Contains=function(e){var t=!0;return t=t&&this.lowerBound.x<=e.lowerBound.x,t=t&&this.lowerBound.y<=e.lowerBound.y,t=t&&e.upperBound.x<=this.upperBound.x,t=t&&e.upperBound.y<=this.upperBound.y,t},w.prototype.RayCast=function(t,n){var r=-Number.MAX_VALUE,i=Number.MAX_VALUE,s=n.p1.x,o=n.p1.y,u=n.p2.x-n.p1.x,a=n.p2.y-n.p1.y,f=Math.abs(u),l=Math.abs(a),c=t.normal,h=0,p=0,d=0,v=0,m=0;if(f<e){if(s<this.lowerBound.x||this.upperBound.x<s)return!1}else{h=1/u,p=(this.lowerBound.x-s)*h,d=(this.upperBound.x-s)*h,m=-1,p>d&&(v=p,p=d,d=v,m=1),p>r&&(c.x=m,c.y=0,r=p),i=Math.min(i,d);if(r>i)return!1}if(l<e){if(o<this.lowerBound.y||this.upperBound.y<o)return!1}else{h=1/a,p=(this.lowerBound.y-o)*h,d=(this.upperBound.y-o)*h,m=-1,p>d&&(v=p,p=d,d=v,m=1),p>r&&(c.y=m,c.x=0,r=p),i=Math.min(i,d);if(r>i)return!1}return t.fraction=r,!0},w.prototype.TestOverlap=function(e){var t=e.lowerBound.x-this.upperBound.x,n=e.lowerBound.y-this.upperBound.y,r=this.lowerBound.x-e.upperBound.x,i=this.lowerBound.y-e.upperBound.y;return t>0||n>0?!1:r>0||i>0?!1:!0},w.Combine=function(e,t){var n=new w;return n.Combine(e,t),n},w.prototype.Combine=function(e,t){this.lowerBound.x=Math.min(e.lowerBound.x,t.lowerBound.x),this.lowerBound.y=Math.min(e.lowerBound.y,t.lowerBound.y),this.upperBound.x=Math.max(e.upperBound.x,t.upperBound.x),this.upperBound.y=Math.max(e.upperBound.y,t.upperBound.y)},E.b2Bound=function(){},E.prototype.IsLower=function(){return(this.value&1)==0},E.prototype.IsUpper=function(){return(this.value&1)==1},E.prototype.Swap=function(e){var t=this.value,n=this.proxy,r=this.stabbingCount;this.value=e.value,this.proxy=e.proxy,this.stabbingCount=e.stabbingCount,e.value=t,e.proxy=n,e.stabbingCount=r},S.b2BoundValues=function(){},S.prototype.b2BoundValues=function(){this.lowerValues=new r,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new r,this.upperValues[0]=0,this.upperValues[1]=0},x.b2Collision=function(){},x.ClipSegmentToLine=function(e,t,n,r){r===undefined&&(r=0);var i,s=0;i=t[0];var o=i.v;i=t[1];var u=i.v,a=n.x*o.x+n.y*o.y-r,f=n.x*u.x+n.y*u.y-r;a<=0&&e[s++].Set(t[0]),f<=0&&e[s++].Set(t[1]);if(a*f<0){var l=a/(a-f);i=e[s];var c=i.v;c.x=o.x+l*(u.x-o.x),c.y=o.y+l*(u.y-o.y),i=e[s];var h;a>0?(h=t[0],i.id=h.id):(h=t[1],i.id=h.id),++s}return s},x.EdgeSeparation=function(e,t,n,r,i){n===undefined&&(n=0);var s=parseInt(e.m_vertexCount),o=e.m_vertices,u=e.m_normals,a=parseInt(r.m_vertexCount),f=r.m_vertices,l,c;l=t.R,c=u[n];var h=l.col1.x*c.x+l.col2.x*c.y,p=l.col1.y*c.x+l.col2.y*c.y;l=i.R;var d=l.col1.x*h+l.col1.y*p,v=l.col2.x*h+l.col2.y*p,m=0,g=Number.MAX_VALUE;for(var y=0;y<a;++y){c=f[y];var b=c.x*d+c.y*v;b<g&&(g=b,m=y)}c=o[n],l=t.R;var w=t.position.x+(l.col1.x*c.x+l.col2.x*c.y),E=t.position.y+(l.col1.y*c.x+l.col2.y*c.y);c=f[m],l=i.R;var S=i.position.x+(l.col1.x*c.x+l.col2.x*c.y),x=i.position.y+(l.col1.y*c.x+l.col2.y*c.y);S-=w,x-=E;var T=S*h+x*p;return T},x.FindMaxSeparation=function(e,t,n,r,i){var s=parseInt(t.m_vertexCount),o=t.m_normals,u,a;a=i.R,u=r.m_centroid;var f=i.position.x+(a.col1.x*u.x+a.col2.x*u.y),l=i.position.y+(a.col1.y*u.x+a.col2.y*u.y);a=n.R,u=t.m_centroid,f-=n.position.x+(a.col1.x*u.x+a.col2.x*u.y),l-=n.position.y+(a.col1.y*u.x+a.col2.y*u.y);var c=f*n.R.col1.x+l*n.R.col1.y,h=f*n.R.col2.x+l*n.R.col2.y,p=0,d=-Number.MAX_VALUE;for(var v=0;v<s;++v){u=o[v];var m=u.x*c+u.y*h;m>d&&(d=m,p=v)}var g=x.EdgeSeparation(t,n,p,r,i),y=parseInt(p-1>=0?p-1:s-1),b=x.EdgeSeparation(t,n,y,r,i),w=parseInt(p+1<s?p+1:0),E=x.EdgeSeparation(t,n,w,r,i),S=0,T=0,N=0;if(b>g&&b>E)N=-1,S=y,T=b;else{if(!(E>g))return e[0]=p,g;N=1,S=w,T=E}for(;;){N==-1?p=S-1>=0?S-1:s-1:p=S+1<s?S+1:0,g=x.EdgeSeparation(t,n,p,r,i);if(!(g>T))break;S=p,T=g}return e[0]=S,T},x.FindIncidentEdge=function(e,t,n,r,i,s){r===undefined&&(r=0);var o=parseInt(t.m_vertexCount),u=t.m_normals,a=parseInt(i.m_vertexCount),f=i.m_vertices,l=i.m_normals,c,h;c=n.R,h=u[r];var p=c.col1.x*h.x+c.col2.x*h.y,d=c.col1.y*h.x+c.col2.y*h.y;c=s.R;var v=c.col1.x*p+c.col1.y*d;d=c.col2.x*p+c.col2.y*d,p=v;var m=0,g=Number.MAX_VALUE;for(var y=0;y<a;++y){h=l[y];var b=p*h.x+d*h.y;b<g&&(g=b,m=y)}var w,E=parseInt(m),S=parseInt(E+1<a?E+1:0);w=e[0],h=f[E],c=s.R,w.v.x=s.position.x+(c.col1.x*h.x+c.col2.x*h.y),w.v.y=s.position.y+(c.col1.y*h.x+c.col2.y*h.y),w.id.features.referenceEdge=r,w.id.features.incidentEdge=E,w.id.features.incidentVertex=0,w=e[1],h=f[S],c=s.R,w.v.x=s.position.x+(c.col1.x*h.x+c.col2.x*h.y),w.v.y=s.position.y+(c.col1.y*h.x+c.col2.y*h.y),w.id.features.referenceEdge=r,w.id.features.incidentEdge=S,w.id.features.incidentVertex=1},x.MakeClipPointVector=function(){var e=new n(2);return e[0]=new $,e[1]=new $,e},x.CollidePolygons=function(e,t,n,r,i){var s;e.m_pointCount=0;var o=t.m_radius+r.m_radius,u=0;x.s_edgeAO[0]=u;var a=x.FindMaxSeparation(x.s_edgeAO,t,n,r,i);u=x.s_edgeAO[0];if(a>o)return;var f=0;x.s_edgeBO[0]=f;var l=x.FindMaxSeparation(x.s_edgeBO,r,i,t,n);f=x.s_edgeBO[0];if(l>o)return;var c,p,d,v,m=0,g=0,y=.98,b=.001,w;l>y*a+b?(c=r,p=t,d=i,v=n,m=f,e.m_type=P.e_faceB,g=1):(c=t,p=r,d=n,v=i,m=u,e.m_type=P.e_faceA,g=0);var E=x.s_incidentEdge;x.FindIncidentEdge(E,c,d,m,p,v);var S=parseInt(c.m_vertexCount),T=c.m_vertices,N=T[m],C;m+1<S?C=T[parseInt(m+1)]:C=T[0];var k=x.s_localTangent;k.Set(C.x-N.x,C.y-N.y),k.Normalize();var L=x.s_localNormal;L.x=k.y,L.y=-k.x;var A=x.s_planePoint;A.Set(.5*(N.x+C.x),.5*(N.y+C.y));var O=x.s_tangent;w=d.R,O.x=w.col1.x*k.x+w.col2.x*k.y,O.y=w.col1.y*k.x+w.col2.y*k.y;var M=x.s_tangent2;M.x=-O.x,M.y=-O.y;var _=x.s_normal;_.x=O.y,_.y=-O.x;var D=x.s_v11,H=x.s_v12;D.x=d.position.x+(w.col1.x*N.x+w.col2.x*N.y),D.y=d.position.y+(w.col1.y*N.x+w.col2.y*N.y),H.x=d.position.x+(w.col1.x*C.x+w.col2.x*C.y),H.y=d.position.y+(w.col1.y*C.x+w.col2.y*C.y);var B=_.x*D.x+_.y*D.y,j=-O.x*D.x-O.y*D.y+o,F=O.x*H.x+O.y*H.y+o,I=x.s_clipPoints1,q=x.s_clipPoints2,R=0;R=x.ClipSegmentToLine(I,E,M,j);if(R<2)return;R=x.ClipSegmentToLine(q,I,O,F);if(R<2)return;e.m_localPlaneNormal.SetV(L),e.m_localPoint.SetV(A);var U=0;for(var z=0;z<h.b2_maxManifoldPoints;++z){s=q[z];var W=_.x*s.v.x+_.y*s.v.y-B;if(W<=o){var X=e.m_points[U];w=v.R;var V=s.v.x-v.position.x,$=s.v.y-v.position.y;X.m_localPoint.x=V*w.col1.x+$*w.col1.y,X.m_localPoint.y=V*w.col2.x+$*w.col2.y,X.m_id.Set(s.id),X.m_id.features.flip=g,++U}}e.m_pointCount=U},x.CollideCircles=function(e,t,n,r,i){e.m_pointCount=0;var s,o;s=n.R,o=t.m_p;var u=n.position.x+(s.col1.x*o.x+s.col2.x*o.y),a=n.position.y+(s.col1.y*o.x+s.col2.y*o.y);s=i.R,o=r.m_p;var f=i.position.x+(s.col1.x*o.x+s.col2.x*o.y),l=i.position.y+(s.col1.y*o.x+s.col2.y*o.y),c=f-u,h=l-a,p=c*c+h*h,d=t.m_radius+r.m_radius;if(p>d*d)return;e.m_type=P.e_circles,e.m_localPoint.SetV(t.m_p),e.m_localPlaneNormal.SetZero(),e.m_pointCount=1,e.m_points[0].m_localPoint.SetV(r.m_p),e.m_points[0].m_id.key=0},x.CollidePolygonAndCircle=function(t,n,r,i,s){t.m_pointCount=0;var o,u=0,a=0,f=0,l=0,c,h;h=s.R,c=i.m_p;var p=s.position.x+(h.col1.x*c.x+h.col2.x*c.y),d=s.position.y+(h.col1.y*c.x+h.col2.y*c.y);u=p-r.position.x,a=d-r.position.y,h=r.R;var v=u*h.col1.x+a*h.col1.y,m=u*h.col2.x+a*h.col2.y,g=0,y=0,b=-Number.MAX_VALUE,w=n.m_radius+i.m_radius,E=parseInt(n.m_vertexCount),S=n.m_vertices,x=n.m_normals;for(var T=0;T<E;++T){c=S[T],u=v-c.x,a=m-c.y,c=x[T];var N=c.x*u+c.y*a;if(N>w)return;N>b&&(b=N,y=T)}var C=parseInt(y),k=parseInt(C+1<E?C+1:0),L=S[C],A=S[k];if(b<e){t.m_pointCount=1,t.m_type=P.e_faceA,t.m_localPlaneNormal.SetV(x[y]),t.m_localPoint.x=.5*(L.x+A.x),t.m_localPoint.y=.5*(L.y+A.y),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0;return}var O=(v-L.x)*(A.x-L.x)+(m-L.y)*(A.y-L.y),M=(v-A.x)*(L.x-A.x)+(m-A.y)*(L.y-A.y);if(O<=0){if((v-L.x)*(v-L.x)+(m-L.y)*(m-L.y)>w*w)return;t.m_pointCount=1,t.m_type=P.e_faceA,t.m_localPlaneNormal.x=v-L.x,t.m_localPlaneNormal.y=m-L.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(L),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}else if(M<=0){if((v-A.x)*(v-A.x)+(m-A.y)*(m-A.y)>w*w)return;t.m_pointCount=1,t.m_type=P.e_faceA,t.m_localPlaneNormal.x=v-A.x,t.m_localPlaneNormal.y=m-A.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(A),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}else{var _=.5*(L.x+A.x),D=.5*(L.y+A.y);b=(v-_)*x[C].x+(m-D)*x[C].y;if(b>w)return;t.m_pointCount=1,t.m_type=P.e_faceA,t.m_localPlaneNormal.x=x[C].x,t.m_localPlaneNormal.y=x[C].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(_,D),t.m_points[0].m_localPoint.SetV(i.m_p),t.m_points[0].m_id.key=0}},x.TestOverlap=function(e,t){var n=t.lowerBound,r=e.upperBound,i=n.x-r.x,s=n.y-r.y;n=e.lowerBound,r=t.upperBound;var o=n.x-r.x,u=n.y-r.y;return i>0||s>0?!1:o>0||u>0?!1:!0},t.postDefs.push(function(){t.Collision.b2Collision.s_incidentEdge=x.MakeClipPointVector(),t.Collision.b2Collision.s_clipPoints1=x.MakeClipPointVector(),t.Collision.b2Collision.s_clipPoints2=x.MakeClipPointVector(),t.Collision.b2Collision.s_edgeAO=new r(1),t.Collision.b2Collision.s_edgeBO=new r(1),t.Collision.b2Collision.s_localTangent=new y,t.Collision.b2Collision.s_localNormal=new y,t.Collision.b2Collision.s_planePoint=new y,t.Collision.b2Collision.s_normal=new y,t.Collision.b2Collision.s_tangent=new y,t.Collision.b2Collision.s_tangent2=new y,t.Collision.b2Collision.s_v11=new y,t.Collision.b2Collision.s_v12=new y,t.Collision.b2Collision.b2CollidePolyTempVec=new y,t.Collision.b2Collision.b2_nullFeature=255}),T.b2ContactID=function(){this.features=new J},T.prototype.b2ContactID=function(){this.features._m_id=this},T.prototype.Set=function(e){this.key=e._key},T.prototype.Copy=function(){var e=new T;return e.key=this.key,e},Object.defineProperty(T.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(T.prototype,"key",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._key=e,this.features._referenceEdge=this._key&255,this.features._incidentEdge=(this._key&65280)>>8&255,this.features._incidentVertex=(this._key&16711680)>>16&255,this.features._flip=(this._key&4278190080)>>24&255}}),N.b2ContactPoint=function(){this.position=new y,this.velocity=new y,this.normal=new y,this.id=new T},C.b2Distance=function(){},C.Distance=function(t,n,r){++C.b2_gjkCalls;var i=r.proxyA,s=r.proxyB,o=r.transformA,u=r.transformB,a=C.s_simplex;a.ReadCache(n,i,o,s,u);var f=a.m_vertices,l=20,c=C.s_saveA,p=C.s_saveB,d=0,m=a.GetClosestPoint(),g=m.LengthSquared(),b=g,w=0,E,S=0;while(S<l){d=a.m_count;for(w=0;w<d;w++)c[w]=f[w].indexA,p[w]=f[w].indexB;switch(a.m_count){case 1:break;case 2:a.Solve2();break;case 3:a.Solve3();break;default:h.b2Assert(!1)}if(a.m_count==3)break;E=a.GetClosestPoint(),b=E.LengthSquared(),b>g,g=b;var x=a.GetSearchDirection();if(x.LengthSquared()<e*e)break;var T=f[a.m_count];T.indexA=i.GetSupport(v.MulTMV(o.R,x.GetNegative())),T.wA=v.MulX(o,i.GetVertex(T.indexA)),T.indexB=s.GetSupport(v.MulTMV(u.R,x)),T.wB=v.MulX(u,s.GetVertex(T.indexB)),T.w=v.SubtractVV(T.wB,T.wA),++S,++C.b2_gjkIters;var N=!1;for(w=0;w<d;w++)if(T.indexA==c[w]&&T.indexB==p[w]){N=!0;break}if(N)break;++a.m_count}C.b2_gjkMaxIters=v.Max(C.b2_gjkMaxIters,S),a.GetWitnessPoints(t.pointA,t.pointB),t.distance=v.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=S,a.WriteCache(n);if(r.useRadii){var k=i.m_radius,L=s.m_radius;if(t.distance>k+L&&t.distance>e){t.distance-=k+L;var A=v.SubtractVV(t.pointB,t.pointA);A.Normalize(),t.pointA.x+=k*A.x,t.pointA.y+=k*A.y,t.pointB.x-=L*A.x,t.pointB.y-=L*A.y}else E=new y,E.x=.5*(t.pointA.x+t.pointB.x),E.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=E.x,t.pointA.y=t.pointB.y=E.y,t.distance=0}},t.postDefs.push(function(){t.Collision.b2Distance.s_simplex=new R,t.Collision.b2Distance.s_saveA=new r(3),t.Collision.b2Distance.s_saveB=new r(3)}),k.b2DistanceInput=function(){},L.b2DistanceOutput=function(){this.pointA=new y,this.pointB=new y},A.b2DistanceProxy=function(){},A.prototype.Set=function(e){switch(e.GetType()){case f.e_circleShape:var t=e instanceof i?e:null;this.m_vertices=new n(1,!0),this.m_vertices[0]=t.m_p,this.m_count=1,this.m_radius=t.m_radius;break;case f.e_polygonShape:var r=e instanceof a?e:null;this.m_vertices=r.m_vertices,this.m_count=r.m_vertexCount,this.m_radius=r.m_radius;break;default:h.b2Assert(!1)}},A.prototype.GetSupport=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_count;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return t},A.prototype.GetSupportVertex=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_count;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return this.m_vertices[t]},A.prototype.GetVertexCount=function(){return this.m_count},A.prototype.GetVertex=function(e){return e===undefined&&(e=0),h.b2Assert(0<=e&&e<this.m_count),this.m_vertices[e]},O.b2DynamicTree=function(){},O.prototype.b2DynamicTree=function(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0},O.prototype.CreateProxy=function(e,t){var n=this.AllocateNode(),r=h.b2_aabbExtension,i=h.b2_aabbExtension;return n.aabb.lowerBound.x=e.lowerBound.x-r,n.aabb.lowerBound.y=e.lowerBound.y-i,n.aabb.upperBound.x=e.upperBound.x+r,n.aabb.upperBound.y=e.upperBound.y+i,n.userData=t,this.InsertLeaf(n),n},O.prototype.DestroyProxy=function(e){this.RemoveLeaf(e),this.FreeNode(e)},O.prototype.MoveProxy=function(e,t,n){h.b2Assert(e.IsLeaf());if(e.aabb.Contains(t))return!1;this.RemoveLeaf(e);var r=h.b2_aabbExtension+h.b2_aabbMultiplier*(n.x>0?n.x:-n.x),i=h.b2_aabbExtension+h.b2_aabbMultiplier*(n.y>0?n.y:-n.y);return e.aabb.lowerBound.x=t.lowerBound.x-r,e.aabb.lowerBound.y=t.lowerBound.y-i,e.aabb.upperBound.x=t.upperBound.x+r,e.aabb.upperBound.y=t.upperBound.y+i,this.InsertLeaf(e),!0},O.prototype.Rebalance=function(e){e===undefined&&(e=0);if(this.m_root==null)return;for(var t=0;t<e;t++){var n=this.m_root,r=0;while(n.IsLeaf()==0)n=this.m_path>>r&1?n.child2:n.child1,r=r+1&31;++this.m_path,this.RemoveLeaf(n),this.InsertLeaf(n)}},O.prototype.GetFatAABB=function(e){return e.aabb},O.prototype.GetUserData=function(e){return e.userData},O.prototype.Query=function(e,t){if(this.m_root==null)return;var r=new n,i=0;r[i++]=this.m_root;while(i>0){var s=r[--i];if(s.aabb.TestOverlap(t))if(s.IsLeaf()){var o=e(s);if(!o)return}else r[i++]=s.child1,r[i++]=s.child2}},O.prototype.RayCast=function(e,t){if(this.m_root==null)return;var r=t.p1,i=t.p2,s=v.SubtractVV(r,i);s.Normalize();var o=v.CrossFV(1,s),u=v.AbsV(o),a=t.maxFraction,f=new w,l=0,c=0;l=r.x+a*(i.x-r.x),c=r.y+a*(i.y-r.y),f.lowerBound.x=Math.min(r.x,l),f.lowerBound.y=Math.min(r.y,c),f.upperBound.x=Math.max(r.x,l),f.upperBound.y=Math.max(r.y,c);var h=new n,p=0;h[p++]=this.m_root;while(p>0){var d=h[--p];if(d.aabb.TestOverlap(f)==0)continue;var m=d.aabb.GetCenter(),g=d.aabb.GetExtents(),y=Math.abs(o.x*(r.x-m.x)+o.y*(r.y-m.y))-u.x*g.x-u.y*g.y;if(y>0)continue;if(d.IsLeaf()){var b=new j;b.p1=t.p1,b.p2=t.p2,b.maxFraction=t.maxFraction,a=e(b,d);if(a==0)return;a>0&&(l=r.x+a*(i.x-r.x),c=r.y+a*(i.y-r.y),f.lowerBound.x=Math.min(r.x,l),f.lowerBound.y=Math.min(r.y,c),f.upperBound.x=Math.max(r.x,l),f.upperBound.y=Math.max(r.y,c))}else h[p++]=d.child1,h[p++]=d.child2}},O.prototype.AllocateNode=function(){if(this.m_freeList){var e=this.m_freeList;return this.m_freeList=e.parent,e.parent=null,e.child1=null,e.child2=null,e}return new _},O.prototype.FreeNode=function(e){e.parent=this.m_freeList,this.m_freeList=e},O.prototype.InsertLeaf=function(e){++this.m_insertionCount;if(this.m_root==null){this.m_root=e,this.m_root.parent=null;return}var t=e.aabb.GetCenter(),n=this.m_root;if(n.IsLeaf()==0)do{var r=n.child1,i=n.child2,s=Math.abs((r.aabb.lowerBound.x+r.aabb.upperBound.x)/2-t.x)+Math.abs((r.aabb.lowerBound.y+r.aabb.upperBound.y)/2-t.y),o=Math.abs((i.aabb.lowerBound.x+i.aabb.upperBound.x)/2-t.x)+Math.abs((i.aabb.lowerBound.y+i.aabb.upperBound.y)/2-t.y);s<o?n=r:n=i}while(n.IsLeaf()==0);var u=n.parent,a=this.AllocateNode();a.parent=u,a.userData=null,a.aabb.Combine(e.aabb,n.aabb);if(u){n.parent.child1==n?u.child1=a:u.child2=a,a.child1=n,a.child2=e,n.parent=a,e.parent=a;do{if(u.aabb.Contains(a.aabb))break;u.aabb.Combine(u.child1.aabb,u.child2.aabb),a=u,u=u.parent}while(u)}else a.child1=n,a.child2=e,n.parent=a,e.parent=a,this.m_root=a},O.prototype.RemoveLeaf=function(e){if(e==this.m_root){this.m_root=null;return}var t=e.parent,n=t.parent,r;t.child1==e?r=t.child2:r=t.child1;if(n){n.child1==t?n.child1=r:n.child2=r,r.parent=n,this.FreeNode(t);while(n){var i=n.aabb;n.aabb=w.Combine(n.child1.aabb,n.child2.aabb);if(i.Contains(n.aabb))break;n=n.parent}}else this.m_root=r,r.parent=null,this.FreeNode(t)},M.b2DynamicTreeBroadPhase=function(){this.m_tree=new O,this.m_moveBuffer=new n,this.m_pairBuffer=new n,this.m_pairCount=0},M.prototype.CreateProxy=function(e,t){var n=this.m_tree.CreateProxy(e,t);return++this.m_proxyCount,this.BufferMove(n),n},M.prototype.DestroyProxy=function(e){this.UnBufferMove(e),--this.m_proxyCount,this.m_tree.DestroyProxy(e)},M.prototype.MoveProxy=function(e,t,n){var r=this.m_tree.MoveProxy(e,t,n);r&&this.BufferMove(e)},M.prototype.TestOverlap=function(e,t){var n=this.m_tree.GetFatAABB(e),r=this.m_tree.GetFatAABB(t);return n.TestOverlap(r)},M.prototype.GetUserData=function(e){return this.m_tree.GetUserData(e)},M.prototype.GetFatAABB=function(e){return this.m_tree.GetFatAABB(e)},M.prototype.GetProxyCount=function(){return this.m_proxyCount},M.prototype.UpdatePairs=function(e){var t=this;t.m_pairCount=0;var n=0,r;for(n=0;n<t.m_moveBuffer.length;++n){r=t.m_moveBuffer[n];function i(e){if(e==r)return!0;t.m_pairCount==t.m_pairBuffer.length&&(t.m_pairBuffer[t.m_pairCount]=new D);var n=t.m_pairBuffer[t.m_pairCount];return n.proxyA=e<r?e:r,n.proxyB=e>=r?e:r,++t.m_pairCount,!0}var s=t.m_tree.GetFatAABB(r);t.m_tree.Query(i,s)}t.m_moveBuffer.length=0;for(var n=0;n<t.m_pairCount;){var o=t.m_pairBuffer[n],u=t.m_tree.GetUserData(o.proxyA),a=t.m_tree.GetUserData(o.proxyB);e(u,a),++n;while(n<t.m_pairCount){var f=t.m_pairBuffer[n];if(f.proxyA!=o.proxyA||f.proxyB!=o.proxyB)break;++n}}},M.prototype.Query=function(e,t){this.m_tree.Query(e,t)},M.prototype.RayCast=function(e,t){this.m_tree.RayCast(e,t)},M.prototype.Validate=function(){},M.prototype.Rebalance=function(e){e===undefined&&(e=0),this.m_tree.Rebalance(e)},M.prototype.BufferMove=function(e){this.m_moveBuffer[this.m_moveBuffer.length]=e},M.prototype.UnBufferMove=function(e){var t=parseInt(this.m_moveBuffer.indexOf(e));this.m_moveBuffer.splice(t,1)},M.prototype.ComparePairs=function(e,t){return 0},M.__implements={},M.__implements[K]=!0,_.b2DynamicTreeNode=function(){this.aabb=new w},_.prototype.IsLeaf=function(){return this.child1==null},D.b2DynamicTreePair=function(){},P.b2Manifold=function(){this.m_pointCount=0},P.prototype.b2Manifold=function(){this.m_points=new n(h.b2_maxManifoldPoints);for(var e=0;e<h.b2_maxManifoldPoints;e++)this.m_points[e]=new H;this.m_localPlaneNormal=new y,this.m_localPoint=new y},P.prototype.Reset=function(){for(var e=0;e<h.b2_maxManifoldPoints;e++)(this.m_points[e]instanceof H?this.m_points[e]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_type=0,this.m_pointCount=0},P.prototype.Set=function(e){this.m_pointCount=e.m_pointCount;for(var t=0;t<h.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof H?this.m_points[t]:null).Set(e.m_points[t]);this.m_localPlaneNormal.SetV(e.m_localPlaneNormal),this.m_localPoint.SetV(e.m_localPoint),this.m_type=e.m_type},P.prototype.Copy=function(){var e=new P;return e.Set(this),e},t.postDefs.push(function(){t.Collision.b2Manifold.e_circles=1,t.Collision.b2Manifold.e_faceA=2,t.Collision.b2Manifold.e_faceB=4}),H.b2ManifoldPoint=function(){this.m_localPoint=new y,this.m_id=new T},H.prototype.b2ManifoldPoint=function(){this.Reset()},H.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_normalImpulse=0,this.m_tangentImpulse=0,this.m_id.key=0},H.prototype.Set=function(e){this.m_localPoint.SetV(e.m_localPoint),this.m_normalImpulse=e.m_normalImpulse,this.m_tangentImpulse=e.m_tangentImpulse,this.m_id.Set(e.m_id)},B.b2Point=function(){this.p=new y},B.prototype.Support=function(e,t,n){return t===undefined&&(t=0),n===undefined&&(n=0),this.p},B.prototype.GetFirstVertex=function(e){return this.p},j.b2RayCastInput=function(){this.p1=new y,this.p2=new y},j.prototype.b2RayCastInput=function(e,t,n){e===undefined&&(e=null),t===undefined&&(t=null),n===undefined&&(n=1),e&&this.p1.SetV(e),t&&this.p2.SetV(t),this.maxFraction=n},F.b2RayCastOutput=function(){this.normal=new y},I.b2Segment=function(){this.p1=new y,this.p2=new y},I.prototype.TestSegment=function(t,n,r,i){i===undefined&&(i=0);var s=r.p1,o=r.p2.x-s.x,u=r.p2.y-s.y,a=this.p2.x-this.p1.x,f=this.p2.y-this.p1.y,l=f,c=-a,h=100*e,p=-(o*l+u*c);if(p>h){var d=s.x-this.p1.x,v=s.y-this.p1.y,m=d*l+v*c;if(0<=m&&m<=i*p){var g=-o*v+u*d;if(-h*p<=g&&g<=p*(1+h)){m/=p;var y=Math.sqrt(l*l+c*c);return l/=y,c/=y,t[0]=m,n.Set(l,c),!0}}}return!1},I.prototype.Extend=function(e){this.ExtendForward(e),this.ExtendBackward(e)},I.prototype.ExtendForward=function(e){var t=this.p2.x-this.p1.x,n=this.p2.y-this.p1.y,r=Math.min(t>0?(e.upperBound.x-this.p1.x)/t:t<0?(e.lowerBound.x-this.p1.x)/t:Number.POSITIVE_INFINITY,n>0?(e.upperBound.y-this.p1.y)/n:n<0?(e.lowerBound.y-this.p1.y)/n:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+t*r,this.p2.y=this.p1.y+n*r},I.prototype.ExtendBackward=function(e){var t=-this.p2.x+this.p1.x,n=-this.p2.y+this.p1.y,r=Math.min(t>0?(e.upperBound.x-this.p2.x)/t:t<0?(e.lowerBound.x-this.p2.x)/t:Number.POSITIVE_INFINITY,n>0?(e.upperBound.y-this.p2.y)/n:n<0?(e.lowerBound.y-this.p2.y)/n:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+t*r,this.p1.y=this.p2.y+n*r},q.b2SeparationFunction=function(){this.m_localPoint=new y,this.m_axis=new y},q.prototype.Initialize=function(e,t,n,r,i){this.m_proxyA=t,this.m_proxyB=r;var s=parseInt(e.count);h.b2Assert(0<s&&s<3);var o,u,a,f,l,c,p=0,d=0,m=0,g=0,b=0,w=0,E,S,x=0,T=0;if(s==1)this.m_type=q.e_points,o=this.m_proxyA.GetVertex(e.indexA[0]),f=this.m_proxyB.GetVertex(e.indexB[0]),S=o,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),d=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=f,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),g=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),this.m_axis.x=m-p,this.m_axis.y=g-d,this.m_axis.Normalize();else if(e.indexB[0]==e.indexB[1])this.m_type=q.e_faceA,u=this.m_proxyA.GetVertex(e.indexA[0]),a=this.m_proxyA.GetVertex(e.indexA[1]),f=this.m_proxyB.GetVertex(e.indexB[0]),this.m_localPoint.x=.5*(u.x+a.x),this.m_localPoint.y=.5*(u.y+a.y),this.m_axis=v.CrossVF(v.SubtractVV(a,u),1),this.m_axis.Normalize(),S=this.m_axis,E=n.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),d=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=f,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),g=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),x=(m-p)*b+(g-d)*w,x<0&&this.m_axis.NegativeSelf();else if(e.indexA[0]==e.indexA[0])this.m_type=q.e_faceB,l=this.m_proxyB.GetVertex(e.indexB[0]),c=this.m_proxyB.GetVertex(e.indexB[1]),o=this.m_proxyA.GetVertex(e.indexA[0]),this.m_localPoint.x=.5*(l.x+c.x),this.m_localPoint.y=.5*(l.y+c.y),this.m_axis=v.CrossVF(v.SubtractVV(c,l),1),this.m_axis.Normalize(),S=this.m_axis,E=i.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),g=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=o,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),d=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),x=(p-m)*b+(d-g)*w,x<0&&this.m_axis.NegativeSelf();else{u=this.m_proxyA.GetVertex(e.indexA[0]),a=this.m_proxyA.GetVertex(e.indexA[1]),l=this.m_proxyB.GetVertex(e.indexB[0]),c=this.m_proxyB.GetVertex(e.indexB[1]);var N=v.MulX(n,o),C=v.MulMV(n.R,v.SubtractVV(a,u)),k=v.MulX(i,f),L=v.MulMV(i.R,v.SubtractVV(c,l)),A=C.x*C.x+C.y*C.y,O=L.x*L.x+L.y*L.y,M=v.SubtractVV(L,C),_=C.x*M.x+C.y*M.y,D=L.x*M.x+L.y*M.y,P=C.x*L.x+C.y*L.y,H=A*O-P*P;x=0,H!=0&&(x=v.Clamp((P*D-_*O)/H,0,1));var B=(P*x+D)/O;B<0&&(B=0,x=v.Clamp((P-_)/A,0,1)),o=new y,o.x=u.x+x*(a.x-u.x),o.y=u.y+x*(a.y-u.y),f=new y,f.x=l.x+x*(c.x-l.x),f.y=l.y+x*(c.y-l.y),x==0||x==1?(this.m_type=q.e_faceB,this.m_axis=v.CrossVF(v.SubtractVV(c,l),1),this.m_axis.Normalize(),this.m_localPoint=f,S=this.m_axis,E=i.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),g=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=o,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),d=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),T=(p-m)*b+(d-g)*w,x<0&&this.m_axis.NegativeSelf()):(this.m_type=q.e_faceA,this.m_axis=v.CrossVF(v.SubtractVV(a,u),1),this.m_localPoint=o,S=this.m_axis,E=n.R,b=E.col1.x*S.x+E.col2.x*S.y,w=E.col1.y*S.x+E.col2.y*S.y,S=this.m_localPoint,E=n.R,p=n.position.x+(E.col1.x*S.x+E.col2.x*S.y),d=n.position.y+(E.col1.y*S.x+E.col2.y*S.y),S=f,E=i.R,m=i.position.x+(E.col1.x*S.x+E.col2.x*S.y),g=i.position.y+(E.col1.y*S.x+E.col2.y*S.y),T=(m-p)*b+(g-d)*w,x<0&&this.m_axis.NegativeSelf())}},q.prototype.Evaluate=function(e,t){var n,r,i,s,o,u,a=0,f;switch(this.m_type){case q.e_points:return n=v.MulTMV(e.R,this.m_axis),r=v.MulTMV(t.R,this.m_axis.GetNegative()),i=this.m_proxyA.GetSupportVertex(n),s=this.m_proxyB.GetSupportVertex(r),o=v.MulX(e,i),u=v.MulX(t,s),a=(u.x-o.x)*this.m_axis.x+(u.y-o.y)*this.m_axis.y,a;case q.e_faceA:return f=v.MulMV(e.R,this.m_axis),o=v.MulX(e,this.m_localPoint),r=v.MulTMV(t.R,f.GetNegative()),s=this.m_proxyB.GetSupportVertex(r),u=v.MulX(t,s),a=(u.x-o.x)*f.x+(u.y-o.y)*f.y,a;case q.e_faceB:return f=v.MulMV(t.R,this.m_axis),u=v.MulX(t,this.m_localPoint),n=v.MulTMV(e.R,f.GetNegative()),i=this.m_proxyA.GetSupportVertex(n),o=v.MulX(e,i),a=(o.x-u.x)*f.x+(o.y-u.y)*f.y,a;default:return h.b2Assert(!1),0}},t.postDefs.push(function(){t.Collision.b2SeparationFunction.e_points=1,t.Collision.b2SeparationFunction.e_faceA=2,t.Collision.b2SeparationFunction.e_faceB=4}),R.b2Simplex=function(){this.m_v1=new z,this.m_v2=new z,this.m_v3=new z,this.m_vertices=new n(3)},R.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},R.prototype.ReadCache=function(t,n,r,i,s){h.b2Assert(0<=t.count&&t.count<=3);var o,u;this.m_count=t.count;var a=this.m_vertices;for(var f=0;f<this.m_count;f++){var l=a[f];l.indexA=t.indexA[f],l.indexB=t.indexB[f],o=n.GetVertex(l.indexA),u=i.GetVertex(l.indexB),l.wA=v.MulX(r,o),l.wB=v.MulX(s,u),l.w=v.SubtractVV(l.wB,l.wA),l.a=0}if(this.m_count>1){var c=t.metric,p=this.GetMetric();if(p<.5*c||2*c<p||p<e)this.m_count=0}this.m_count==0&&(l=a[0],l.indexA=0,l.indexB=0,o=n.GetVertex(0),u=i.GetVertex(0),l.wA=v.MulX(r,o),l.wB=v.MulX(s,u),l.w=v.SubtractVV(l.wB,l.wA),this.m_count=1)},R.prototype.WriteCache=function(e){e.metric=this.GetMetric(),e.count=t.parseUInt(this.m_count);var n=this.m_vertices;for(var r=0;r<this.m_count;r++)e.indexA[r]=t.parseUInt(n[r].indexA),e.indexB[r]=t.parseUInt(n[r].indexB)},R.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var e=v.SubtractVV(this.m_v2.w,this.m_v1.w),t=v.CrossVV(e,this.m_v1.w.GetNegative());return t>0?v.CrossFV(1,e):v.CrossVF(e,1);default:return h.b2Assert(!1),new y}},R.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return h.b2Assert(!1),new y;case 1:return this.m_v1.w;case 2:return new y(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return h.b2Assert(!1),new y}},R.prototype.GetWitnessPoints=function(e,t){switch(this.m_count){case 0:h.b2Assert(!1);break;case 1:e.SetV(this.m_v1.wA),t.SetV(this.m_v1.wB);break;case 2:e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,t.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,t.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:t.x=e.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,t.y=e.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:h.b2Assert(!1)}},R.prototype.GetMetric=function(){switch(this.m_count){case 0:return h.b2Assert(!1),0;case 1:return 0;case 2:return v.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return v.CrossVV(v.SubtractVV(this.m_v2.w,this.m_v1.w),v.SubtractVV(this.m_v3.w,this.m_v1.w));default:return h.b2Assert(!1),0}},R.prototype.Solve2=function(){var e=this.m_v1.w,t=this.m_v2.w,n=v.SubtractVV(t,e),r=-(e.x*n.x+e.y*n.y);if(r<=0){this.m_v1.a=1,this.m_count=1;return}var i=t.x*n.x+t.y*n.y;if(i<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2);return}var s=1/(i+r);this.m_v1.a=i*s,this.m_v2.a=r*s,this.m_count=2},R.prototype.Solve3=function(){var e=this.m_v1.w,t=this.m_v2.w,n=this.m_v3.w,r=v.SubtractVV(t,e),i=v.Dot(e,r),s=v.Dot(t,r),o=s,u=-i,a=v.SubtractVV(n,e),f=v.Dot(e,a),l=v.Dot(n,a),c=l,h=-f,p=v.SubtractVV(n,t),d=v.Dot(t,p),m=v.Dot(n,p),g=m,y=-d,b=v.CrossVV(r,a),w=b*v.CrossVV(t,n),E=b*v.CrossVV(n,e),S=b*v.CrossVV(e,t);if(u<=0&&h<=0){this.m_v1.a=1,this.m_count=1;return}if(o>0&&u>0&&S<=0){var x=1/(o+u);this.m_v1.a=o*x,this.m_v2.a=u*x,this.m_count=2;return}if(c>0&&h>0&&E<=0){var T=1/(c+h);this.m_v1.a=c*T,this.m_v3.a=h*T,this.m_count=2,this.m_v2.Set(this.m_v3);return}if(o<=0&&y<=0){this.m_v2.a=1,this.m_count=1,this.m_v1.Set(this.m_v2);return}if(c<=0&&g<=0){this.m_v3.a=1,this.m_count=1,this.m_v1.Set(this.m_v3);return}if(g>0&&y>0&&w<=0){var N=1/(g+y);this.m_v2.a=g*N,this.m_v3.a=y*N,this.m_count=2,this.m_v1.Set(this.m_v3);return}var C=1/(w+E+S);this.m_v1.a=w*C,this.m_v2.a=E*C,this.m_v3.a=S*C,this.m_count=3},U.b2SimplexCache=function(){this.indexA=new r(3),this.indexB=new r(3)},z.b2SimplexVertex=function(){},z.prototype.Set=function(e){this.wA.SetV(e.wA),this.wB.SetV(e.wB),this.w.SetV(e.w),this.a=e.a,this.indexA=e.indexA,this.indexB=e.indexB},W.b2TimeOfImpact=function(){},W.TimeOfImpact=function(t){++W.b2_toiCalls;var n=t.proxyA,r=t.proxyB,i=t.sweepA,s=t.sweepB;h.b2Assert(i.t0==s.t0),h.b2Assert(1-i.t0>e);var o=n.m_radius+r.m_radius,u=t.tolerance,a=0,f=1e3,l=0,c=0;W.s_cache.count=0,W.s_distanceInput.useRadii=!1;for(;;){i.GetTransform(W.s_xfA,a),s.GetTransform(W.s_xfB,a),W.s_distanceInput.proxyA=n,W.s_distanceInput.proxyB=r,W.s_distanceInput.transformA=W.s_xfA,W.s_distanceInput.transformB=W.s_xfB,C.Distance(W.s_distanceOutput,W.s_cache,W.s_distanceInput);if(W.s_distanceOutput.distance<=0){a=1;break}W.s_fcn.Initialize(W.s_cache,n,W.s_xfA,r,W.s_xfB);var p=W.s_fcn.Evaluate(W.s_xfA,W.s_xfB);if(p<=0){a=1;break}l==0&&(p>o?c=v.Max(o-u,.75*o):c=v.Max(p-u,.02*o));if(p-c<.5*u){if(l==0){a=1;break}break}var d=a,m=a,g=1,y=p;i.GetTransform(W.s_xfA,g),s.GetTransform(W.s_xfB,g);var b=W.s_fcn.Evaluate(W.s_xfA,W.s_xfB);if(b>=c){a=1;break}var w=0;for(;;){var E=0;w&1?E=m+(c-y)*(g-m)/(b-y):E=.5*(m+g),i.GetTransform(W.s_xfA,E),s.GetTransform(W.s_xfB,E);var S=W.s_fcn.Evaluate(W.s_xfA,W.s_xfB);if(v.Abs(S-c)<.025*u){d=E;break}S>c?(m=E,y=S):(g=E,b=S),++w,++W.b2_toiRootIters;if(w==50)break}W.b2_toiMaxRootIters=v.Max(W.b2_toiMaxRootIters,w);if(d<(1+100*e)*a)break;a=d,l++,++W.b2_toiIters;if(l==f)break}return W.b2_toiMaxIters=v.Max(W.b2_toiMaxIters,l),a},t.postDefs.push(function(){t.Collision.b2TimeOfImpact.b2_toiCalls=0,t.Collision.b2TimeOfImpact.b2_toiIters=0,t.Collision.b2TimeOfImpact.b2_toiMaxIters=0,t.Collision.b2TimeOfImpact.b2_toiRootIters=0,t.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,t.Collision.b2TimeOfImpact.s_cache=new U,t.Collision.b2TimeOfImpact.s_distanceInput=new k,t.Collision.b2TimeOfImpact.s_xfA=new g,t.Collision.b2TimeOfImpact.s_xfB=new g,t.Collision.b2TimeOfImpact.s_fcn=new q,t.Collision.b2TimeOfImpact.s_distanceOutput=new L}),X.b2TOIInput=function(){this.proxyA=new A,this.proxyB=new A,this.sweepA=new m,this.sweepB=new m},V.b2WorldManifold=function(){this.m_normal=new y},V.prototype.b2WorldManifold=function(){this.m_points=new n(h.b2_maxManifoldPoints);for(var e=0;e<h.b2_maxManifoldPoints;e++)this.m_points[e]=new y},V.prototype.Initialize=function(t,n,r,i,s){r===undefined&&(r=0),s===undefined&&(s=0);if(t.m_pointCount==0)return;var o=0,u,a,f=0,l=0,c=0,h=0,p=0,d=0;switch(t.m_type){case P.e_circles:a=n.R,u=t.m_localPoint;var v=n.position.x+a.col1.x*u.x+a.col2.x*u.y,m=n.position.y+a.col1.y*u.x+a.col2.y*u.y;a=i.R,u=t.m_points[0].m_localPoint;var g=i.position.x+a.col1.x*u.x+a.col2.x*u.y,y=i.position.y+a.col1.y*u.x+a.col2.y*u.y,b=g-v,w=y-m,E=b*b+w*w;if(E>e*e){var S=Math.sqrt(E);this.m_normal.x=b/S,this.m_normal.y=w/S}else this.m_normal.x=1,this.m_normal.y=0;var x=v+r*this.m_normal.x,T=m+r*this.m_normal.y,N=g-s*this.m_normal.x,C=y-s*this.m_normal.y;this.m_points[0].x=.5*(x+N),this.m_points[0].y=.5*(T+C);break;case P.e_faceA:a=n.R,u=t.m_localPlaneNormal,f=a.col1.x*u.x+a.col2.x*u.y,l=a.col1.y*u.x+a.col2.y*u.y,a=n.R,u=t.m_localPoint,c=n.position.x+a.col1.x*u.x+a.col2.x*u.y,h=n.position.y+a.col1.y*u.x+a.col2.y*u.y,this.m_normal.x=f,this.m_normal.y=l;for(o=0;o<t.m_pointCount;o++)a=i.R,u=t.m_points[o].m_localPoint,p=i.position.x+a.col1.x*u.x+a.col2.x*u.y,d=i.position.y+a.col1.y*u.x+a.col2.y*u.y,this.m_points[o].x=p+.5*(r-(p-c)*f-(d-h)*l-s)*f,this.m_points[o].y=d+.5*(r-(p-c)*f-(d-h)*l-s)*l;break;case P.e_faceB:a=i.R,u=t.m_localPlaneNormal,f=a.col1.x*u.x+a.col2.x*u.y,l=a.col1.y*u.x+a.col2.y*u.y,a=i.R,u=t.m_localPoint,c=i.position.x+a.col1.x*u.x+a.col2.x*u.y,h=i.position.y+a.col1.y*u.x+a.col2.y*u.y,this.m_normal.x=-f,this.m_normal.y=-l;for(o=0;o<t.m_pointCount;o++)a=n.R,u=t.m_points[o].m_localPoint,p=n.position.x+a.col1.x*u.x+a.col2.x*u.y,d=n.position.y+a.col1.y*u.x+a.col2.y*u.y,this.m_points[o].x=p+.5*(s-(p-c)*f-(d-h)*l-r)*f,this.m_points[o].y=d+.5*(s-(p-c)*f-(d-h)*l-r)*l}},$.ClipVertex=function(){this.v=new y,this.id=new T},$.prototype.Set=function(e){this.v.SetV(e.v),this.id.Set(e.id)},J.Features=function(){},Object.defineProperty(J.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(J.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._referenceEdge=e,this._m_id._key=this._m_id._key&4294967040|this._referenceEdge&255}}),Object.defineProperty(J.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(J.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._incidentEdge=e,this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280}}),Object.defineProperty(J.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(J.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._incidentVertex=e,this._m_id._key=this._m_id._key&4278255615|this._incidentVertex<<16&16711680}}),Object.defineProperty(J.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(J.prototype,"flip",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._flip=e,this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080}})}(),function(){var i=t.Common.b2Color,s=t.Common.b2internal,o=t.Common.b2Settings,u=t.Collision.Shapes.b2CircleShape,a=t.Collision.Shapes.b2EdgeChainDef,f=t.Collision.Shapes.b2EdgeShape,l=t.Collision.Shapes.b2MassData,c=t.Collision.Shapes.b2PolygonShape,h=t.Collision.Shapes.b2Shape,p=t.Common.Math.b2Mat22,d=t.Common.Math.b2Mat33,v=t.Common.Math.b2Math,m=t.Common.Math.b2Sweep,g=t.Common.Math.b2Transform,y=t.Common.Math.b2Vec2,b=t.Common.Math.b2Vec3,w=t.Dynamics.b2Body,E=t.Dynamics.b2BodyDef,S=t.Dynamics.b2ContactFilter,x=t.Dynamics.b2ContactImpulse,T=t.Dynamics.b2ContactListener,N=t.Dynamics.b2ContactManager,C=t.Dynamics.b2DebugDraw,k=t.Dynamics.b2DestructionListener,L=t.Dynamics.b2FilterData,A=t.Dynamics.b2Fixture,O=t.Dynamics.b2FixtureDef,M=t.Dynamics.b2Island,_=t.Dynamics.b2TimeStep,D=t.Dynamics.b2World,P=t.Collision.b2AABB,H=t.Collision.b2Bound,B=t.Collision.b2BoundValues,j=t.Collision.b2Collision,F=t.Collision.b2ContactID,I=t.Collision.b2ContactPoint,q=t.Collision.b2Distance,R=t.Collision.b2DistanceInput,U=t.Collision.b2DistanceOutput,z=t.Collision.b2DistanceProxy,W=t.Collision.b2DynamicTree,X=t.Collision.b2DynamicTreeBroadPhase,V=t.Collision.b2DynamicTreeNode,$=t.Collision.b2DynamicTreePair,J=t.Collision.b2Manifold,K=t.Collision.b2ManifoldPoint,Q=t.Collision.b2Point,G=t.Collision.b2RayCastInput,Y=t.Collision.b2RayCastOutput,Z=t.Collision.b2Segment,et=t.Collision.b2SeparationFunction,tt=t.Collision.b2Simplex,nt=t.Collision.b2SimplexCache,rt=t.Collision.b2SimplexVertex,it=t.Collision.b2TimeOfImpact,st=t.Collision.b2TOIInput,ot=t.Collision.b2WorldManifold,ut=t.Collision.ClipVertex,at=t.Collision.Features,ft=t.Collision.IBroadPhase;t.inherit(u,t.Collision.Shapes.b2Shape),u.prototype.__super=t.Collision.Shapes.b2Shape.prototype,u.b2CircleShape=function(){t.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new y},u.prototype.Copy=function(){var e=new u;return e.Set(this),e},u.prototype.Set=function(e){this.__super.Set.call(this,e);if(t.is(e,u)){var n=e instanceof u?e:null;this.m_p.SetV(n.m_p)}},u.prototype.TestPoint=function(e,t){var n=e.R,r=e.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),i=e.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);return r=t.x-r,i=t.y-i,r*r+i*i<=this.m_radius*this.m_radius},u.prototype.RayCast=function(t,n,r){var i=r.R,s=r.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y),o=r.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),u=n.p1.x-s,a=n.p1.y-o,f=u*u+a*a-this.m_radius*this.m_radius,l=n.p2.x-n.p1.x,c=n.p2.y-n.p1.y,h=u*l+a*c,p=l*l+c*c,d=h*h-p*f;if(d<0||p<e)return!1;var v=-(h+Math.sqrt(d));return 0<=v&&v<=n.maxFraction*p?(v/=p,t.fraction=v,t.normal.x=u+v*l,t.normal.y=a+v*c,t.normal.Normalize(),!0):!1},u.prototype.ComputeAABB=function(e,t){var n=t.R,r=t.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y),i=t.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y);e.lowerBound.Set(r-this.m_radius,i-this.m_radius),e.upperBound.Set(r+this.m_radius,i+this.m_radius)},u.prototype.ComputeMass=function(e,t){t===undefined&&(t=0),e.mass=t*o.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},u.prototype.ComputeSubmergedArea=function(t,n,r,i){n===undefined&&(n=0);var s=v.MulX(r,this.m_p),o=-(v.Dot(t,s)-n);if(o<-this.m_radius+e)return 0;if(o>this.m_radius)return i.SetV(s),Math.PI*this.m_radius*this.m_radius;var u=this.m_radius*this.m_radius,a=o*o,f=u*(Math.asin(o/this.m_radius)+Math.PI/2)+o*Math.sqrt(u-a),l=-2/3*Math.pow(u-a,1.5)/f;return i.x=s.x+t.x*l,i.y=s.y+t.y*l,f},u.prototype.GetLocalPosition=function(){return this.m_p},u.prototype.SetLocalPosition=function(e){this.m_p.SetV(e)},u.prototype.GetRadius=function(){return this.m_radius},u.prototype.SetRadius=function(e){e===undefined&&(e=0),this.m_radius=e},u.prototype.b2CircleShape=function(e){e===undefined&&(e=0),this.__super.b2Shape.call(this),this.m_type=h.e_circleShape,this.m_radius=e},a.b2EdgeChainDef=function(){},a.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},t.inherit(f,t.Collision.Shapes.b2Shape),f.prototype.__super=t.Collision.Shapes.b2Shape.prototype,f.b2EdgeShape=function(){t.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new y,this.m_v1=new y,this.m_v2=new y,this.m_coreV1=new y,this.m_coreV2=new y,this.m_normal=new y,this.m_direction=new y,this.m_cornerDir1=new y,this.m_cornerDir2=new y},f.prototype.TestPoint=function(e,t){return!1},f.prototype.RayCast=function(t,n,r){var i,s=n.p2.x-n.p1.x,o=n.p2.y-n.p1.y;i=r.R;var u=r.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),a=r.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),f=r.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y)-a,l=-(r.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y)-u),c=100*e,h=-(s*f+o*l);if(h>c){var p=n.p1.x-u,d=n.p1.y-a,v=p*f+d*l;if(0<=v&&v<=n.maxFraction*h){var m=-s*d+o*p;if(-c*h<=m&&m<=h*(1+c)){v/=h,t.fraction=v;var g=Math.sqrt(f*f+l*l);return t.normal.x=f/g,t.normal.y=l/g,!0}}}return!1},f.prototype.ComputeAABB=function(e,t){var n=t.R,r=t.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),i=t.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),s=t.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y),o=t.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y);r<s?(e.lowerBound.x=r,e.upperBound.x=s):(e.lowerBound.x=s,e.upperBound.x=r),i<o?(e.lowerBound.y=i,e.upperBound.y=o):(e.lowerBound.y=o,e.upperBound.y=i)},f.prototype.ComputeMass=function(e,t){t===undefined&&(t=0),e.mass=0,e.center.SetV(this.m_v1),e.I=0},f.prototype.ComputeSubmergedArea=function(e,t,n,r){t===undefined&&(t=0);var i=new y(e.x*t,e.y*t),s=v.MulX(n,this.m_v1),o=v.MulX(n,this.m_v2),u=v.Dot(e,s)-t,a=v.Dot(e,o)-t;if(u>0){if(a>0)return 0;s.x=-a/(u-a)*s.x+u/(u-a)*o.x,s.y=-a/(u-a)*s.y+u/(u-a)*o.y}else a>0&&(o.x=-a/(u-a)*s.x+u/(u-a)*o.x,o.y=-a/(u-a)*s.y+u/(u-a)*o.y);return r.x=(i.x+s.x+o.x)/3,r.y=(i.y+s.y+o.y)/3,.5*((s.x-i.x)*(o.y-i.y)-(s.y-i.y)*(o.x-i.x))},f.prototype.GetLength=function(){return this.m_length},f.prototype.GetVertex1=function(){return this.m_v1},f.prototype.GetVertex2=function(){return this.m_v2},f.prototype.GetCoreVertex1=function(){return this.m_coreV1},f.prototype.GetCoreVertex2=function(){return this.m_coreV2},f.prototype.GetNormalVector=function(){return this.m_normal},f.prototype.GetDirectionVector=function(){return this.m_direction},f.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},f.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},f.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},f.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},f.prototype.GetFirstVertex=function(e){var t=e.R;return new y(e.position.x+(t.col1.x*this.m_coreV1.x+t.col2.x*this.m_coreV1.y),e.position.y+(t.col1.y*this.m_coreV1.x+t.col2.y*this.m_coreV1.y))},f.prototype.GetNextEdge=function(){return this.m_nextEdge},f.prototype.GetPrevEdge=function(){return this.m_prevEdge},f.prototype.Support=function(e,t,n){t===undefined&&(t=0),n===undefined&&(n=0);var r=e.R,i=e.position.x+(r.col1.x*this.m_coreV1.x+r.col2.x*this.m_coreV1.y),s=e.position.y+(r.col1.y*this.m_coreV1.x+r.col2.y*this.m_coreV1.y),o=e.position.x+(r.col1.x*this.m_coreV2.x+r.col2.x*this.m_coreV2.y),u=e.position.y+(r.col1.y*this.m_coreV2.x+r.col2.y*this.m_coreV2.y);return i*t+s*n>o*t+u*n?(this.s_supportVec.x=i,this.s_supportVec.y=s):(this.s_supportVec.x=o,this.s_supportVec.y=u),this.s_supportVec},f.prototype.b2EdgeShape=function(e,t){this.__super.b2Shape.call(this),this.m_type=h.e_edgeShape,this.m_prevEdge=null,this.m_nextEdge=null,this.m_v1=e,this.m_v2=t,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-o.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-o.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-o.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-o.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},f.prototype.SetPrevEdge=function(e,t,n,r){this.m_prevEdge=e,this.m_coreV1=t,this.m_cornerDir1=n,this.m_cornerConvex1=r},f.prototype.SetNextEdge=function(e,t,n,r){this.m_nextEdge=e,this.m_coreV2=t,this.m_cornerDir2=n,this.m_cornerConvex2=r},l.b2MassData=function(){this.mass=0,this.center=new y(0,0),this.I=0},t.inherit(c,t.Collision.Shapes.b2Shape),c.prototype.__super=t.Collision.Shapes.b2Shape.prototype,c.b2PolygonShape=function(){t.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},c.prototype.Copy=function(){var e=new c;return e.Set(this),e},c.prototype.Set=function(e){this.__super.Set.call(this,e);if(t.is(e,c)){var n=e instanceof c?e:null;this.m_centroid.SetV(n.m_centroid),this.m_vertexCount=n.m_vertexCount,this.Reserve(this.m_vertexCount);for(var r=0;r<this.m_vertexCount;r++)this.m_vertices[r].SetV(n.m_vertices[r]),this.m_normals[r].SetV(n.m_normals[r])}},c.prototype.SetAsArray=function(e,t){t===undefined&&(t=0);var r=new n,i=0,s;for(i=0;i<e.length;++i)s=e[i],r.push(s);this.SetAsVector(r,t)},c.AsArray=function(e,t){t===undefined&&(t=0);var n=new c;return n.SetAsArray(e,t),n},c.prototype.SetAsVector=function(t,n){n===undefined&&(n=0),n==0&&(n=t.length),o.b2Assert(2<=n),this.m_vertexCount=n,this.Reserve(n);var r=0;for(r=0;r<this.m_vertexCount;r++)this.m_vertices[r].SetV(t[r]);for(r=0;r<this.m_vertexCount;++r){var i=parseInt(r),s=parseInt(r+1<this.m_vertexCount?r+1:0),u=v.SubtractVV(this.m_vertices[s],this.m_vertices[i]);o.b2Assert(u.LengthSquared()>e),this.m_normals[r].SetV(v.CrossVF(u,1)),this.m_normals[r].Normalize()}this.m_centroid=c.ComputeCentroid(this.m_vertices,this.m_vertexCount)},c.AsVector=function(e,t){t===undefined&&(t=0);var n=new c;return n.SetAsVector(e,t),n},c.prototype.SetAsBox=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-e,-t),this.m_vertices[1].Set(e,-t),this.m_vertices[2].Set(e,t),this.m_vertices[3].Set(-e,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},c.AsBox=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0);var n=new c;return n.SetAsBox(e,t),n},c.prototype.SetAsOrientedBox=function(e,t,n,r){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=null),r===undefined&&(r=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-e,-t),this.m_vertices[1].Set(e,-t),this.m_vertices[2].Set(e,t),this.m_vertices[3].Set(-e,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=n;var i=new g;i.position=n,i.R.Set(r);for(var s=0;s<this.m_vertexCount;++s)this.m_vertices[s]=v.MulX(i,this.m_vertices[s]),this.m_normals[s]=v.MulMV(i.R,this.m_normals[s])},c.AsOrientedBox=function(e,t,n,r){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=null),r===undefined&&(r=0);var i=new c;return i.SetAsOrientedBox(e,t,n,r),i},c.prototype.SetAsEdge=function(e,t){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(e),this.m_vertices[1].SetV(t),this.m_centroid.x=.5*(e.x+t.x),this.m_centroid.y=.5*(e.y+t.y),this.m_normals[0]=v.CrossVF(v.SubtractVV(t,e),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},c.AsEdge=function(e,t){var n=new c;return n.SetAsEdge(e,t),n},c.prototype.TestPoint=function(e,t){var n,r=e.R,i=t.x-e.position.x,s=t.y-e.position.y,o=i*r.col1.x+s*r.col1.y,u=i*r.col2.x+s*r.col2.y;for(var a=0;a<this.m_vertexCount;++a){n=this.m_vertices[a],i=o-n.x,s=u-n.y,n=this.m_normals[a];var f=n.x*i+n.y*s;if(f>0)return!1}return!0},c.prototype.RayCast=function(t,n,r){var i=0,s=n.maxFraction,o=0,u=0,a,f;o=n.p1.x-r.position.x,u=n.p1.y-r.position.y,a=r.R;var l=o*a.col1.x+u*a.col1.y,c=o*a.col2.x+u*a.col2.y;o=n.p2.x-r.position.x,u=n.p2.y-r.position.y,a=r.R;var h=o*a.col1.x+u*a.col1.y,p=o*a.col2.x+u*a.col2.y,d=h-l,v=p-c,m=parseInt(-1);for(var g=0;g<this.m_vertexCount;++g){f=this.m_vertices[g],o=f.x-l,u=f.y-c,f=this.m_normals[g];var y=f.x*o+f.y*u,b=f.x*d+f.y*v;if(b==0){if(y<0)return!1}else b<0&&y<i*b?(i=y/b,m=g):b>0&&y<s*b&&(s=y/b);if(s<i-e)return!1}return m>=0?(t.fraction=i,a=r.R,f=this.m_normals[m],t.normal.x=a.col1.x*f.x+a.col2.x*f.y,t.normal.y=a.col1.y*f.x+a.col2.y*f.y,!0):!1},c.prototype.ComputeAABB=function(e,t){var n=t.R,r=this.m_vertices[0],i=t.position.x+(n.col1.x*r.x+n.col2.x*r.y),s=t.position.y+(n.col1.y*r.x+n.col2.y*r.y),o=i,u=s;for(var a=1;a<this.m_vertexCount;++a){r=this.m_vertices[a];var f=t.position.x+(n.col1.x*r.x+n.col2.x*r.y),l=t.position.y+(n.col1.y*r.x+n.col2.y*r.y);i=i<f?i:f,s=s<l?s:l,o=o>f?o:f,u=u>l?u:l}e.lowerBound.x=i-this.m_radius,e.lowerBound.y=s-this.m_radius,e.upperBound.x=o+this.m_radius,e.upperBound.y=u+this.m_radius},c.prototype.ComputeMass=function(e,t){t===undefined&&(t=0);if(this.m_vertexCount==2){e.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),e.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),e.mass=0,e.I=0;return}var n=0,r=0,i=0,s=0,o=0,u=0,a=1/3;for(var f=0;f<this.m_vertexCount;++f){var l=this.m_vertices[f],c=f+1<this.m_vertexCount?this.m_vertices[parseInt(f+1)]:this.m_vertices[0],h=l.x-o,p=l.y-u,d=c.x-o,v=c.y-u,m=h*v-p*d,g=.5*m;i+=g,n+=g*a*(o+l.x+c.x),r+=g*a*(u+l.y+c.y);var y=o,b=u,w=h,E=p,S=d,x=v,T=a*(.25*(w*w+S*w+S*S)+(y*w+y*S))+.5*y*y,N=a*(.25*(E*E+x*E+x*x)+(b*E+b*x))+.5*b*b;s+=m*(T+N)}e.mass=t*i,n*=1/i,r*=1/i,e.center.Set(n,r),e.I=t*s},c.prototype.ComputeSubmergedArea=function(t,n,i,s){n===undefined&&(n=0);var o=v.MulTMV(i.R,t),u=n-v.Dot(t,i.position),a=new r,f=0,c=parseInt(-1),h=parseInt(-1),p=!1,d=0;for(d=0;d<this.m_vertexCount;++d){a[d]=v.Dot(o,this.m_vertices[d])-u;var m=a[d]<-e;d>0&&(m?p||(c=d-1,f++):p&&(h=d-1,f++)),p=m}switch(f){case 0:if(p){var g=new l;return this.ComputeMass(g,1),s.SetV(v.MulX(i,g.center)),g.mass}return 0;case 1:c==-1?c=this.m_vertexCount-1:h=this.m_vertexCount-1}var b=parseInt((c+1)%this.m_vertexCount),w=parseInt((h+1)%this.m_vertexCount),E=(0-a[c])/(a[b]-a[c]),S=(0-a[h])/(a[w]-a[h]),x=new y(this.m_vertices[c].x*(1-E)+this.m_vertices[b].x*E,this.m_vertices[c].y*(1-E)+this.m_vertices[b].y*E),T=new y(this.m_vertices[h].x*(1-S)+this.m_vertices[w].x*S,this.m_vertices[h].y*(1-S)+this.m_vertices[w].y*S),N=0,C=new y,k=this.m_vertices[b],L;d=b;while(d!=w){d=(d+1)%this.m_vertexCount,d==w?L=T:L=this.m_vertices[d];var A=.5*((k.x-x.x)*(L.y-x.y)-(k.y-x.y)*(L.x-x.x));N+=A,C.x+=A*(x.x+k.x+L.x)/3,C.y+=A*(x.y+k.y+L.y)/3,k=L}return C.Multiply(1/N),s.SetV(v.MulX(i,C)),N},c.prototype.GetVertexCount=function(){return this.m_vertexCount},c.prototype.GetVertices=function(){return this.m_vertices},c.prototype.GetNormals=function(){return this.m_normals},c.prototype.GetSupport=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_vertexCount;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return t},c.prototype.GetSupportVertex=function(e){var t=0,n=this.m_vertices[0].x*e.x+this.m_vertices[0].y*e.y;for(var r=1;r<this.m_vertexCount;++r){var i=this.m_vertices[r].x*e.x+this.m_vertices[r].y*e.y;i>n&&(t=r,n=i)}return this.m_vertices[t]},c.prototype.Validate=function(){return!1},c.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=h.e_polygonShape,this.m_centroid=new y,this.m_vertices=new n,this.m_normals=new n},c.prototype.Reserve=function(e){e===undefined&&(e=0);for(var t=parseInt(this.m_vertices.length);t<e;t++)this.m_vertices[t]=new y,this.m_normals[t]=new y},c.ComputeCentroid=function(e,t){t===undefined&&(t=0);var n=new y,r=0,i=0,s=0,o=1/3;for(var u=0;u<t;++u){var a=e[u],f=u+1<t?e[parseInt(u+1)]:e[0],l=a.x-i,c=a.y-s,h=f.x-i,p=f.y-s,d=l*p-c*h,v=.5*d;r+=v,n.x+=v*o*(i+a.x+f.x),n.y+=v*o*(s+a.y+f.y)}return n.x*=1/r,n.y*=1/r,n},c.ComputeOBB=function(e,t,r){r===undefined&&(r=0);var i=0,s=new n(r+1);for(i=0;i<r;++i)s[i]=t[i];s[r]=s[0];var o=Number.MAX_VALUE;for(i=1;i<=r;++i){var u=s[parseInt(i-1)],a=s[i].x-u.x,f=s[i].y-u.y,l=Math.sqrt(a*a+f*f);a/=l,f/=l;var c=-f,h=a,p=Number.MAX_VALUE,d=Number.MAX_VALUE,v=-Number.MAX_VALUE,m=-Number.MAX_VALUE;for(var g=0;g<r;++g){var y=s[g].x-u.x,b=s[g].y-u.y,w=a*y+f*b,E=c*y+h*b;w<p&&(p=w),E<d&&(d=E),w>v&&(v=w),E>m&&(m=E)}var S=(v-p)*(m-d);if(S<.95*o){o=S,e.R.col1.x=a,e.R.col1.y=f,e.R.col2.x=c,e.R.col2.y=h;var x=.5*(p+v),T=.5*(d+m),N=e.R;e.center.x=u.x+(N.col1.x*x+N.col2.x*T),e.center.y=u.y+(N.col1.y*x+N.col2.y*T),e.extents.x=.5*(v-p),e.extents.y=.5*(m-d)}}},t.postDefs.push(function(){t.Collision.Shapes.b2PolygonShape.s_mat=new p}),h.b2Shape=function(){},h.prototype.Copy=function(){return null},h.prototype.Set=function(e){this.m_radius=e.m_radius},h.prototype.GetType=function(){return this.m_type},h.prototype.TestPoint=function(e,t){return!1},h.prototype.RayCast=function(e,t,n){return!1},h.prototype.ComputeAABB=function(e,t){},h.prototype.ComputeMass=function(e,t){t===undefined&&(t=0)},h.prototype.ComputeSubmergedArea=function(e,t,n,r){return t===undefined&&(t=0),0},h.TestOverlap=function(t,n,r,i){var s=new R;s.proxyA=new z,s.proxyA.Set(t),s.proxyB=new z,s.proxyB.Set(r),s.transformA=n,s.transformB=i,s.useRadii=!0;var o=new nt;o.count=0;var u=new U;return q.Distance(u,o,s),u.distance<10*e},h.prototype.b2Shape=function(){this.m_type=h.e_unknownShape,this.m_radius=o.b2_linearSlop},t.postDefs.push(function(){t.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),t.Collision.Shapes.b2Shape.e_circleShape=0,t.Collision.Shapes.b2Shape.e_polygonShape=1,t.Collision.Shapes.b2Shape.e_edgeShape=2,t.Collision.Shapes.b2Shape.e_shapeTypeCount=3,t.Collision.Shapes.b2Shape.e_hitCollide=1,t.Collision.Shapes.b2Shape.e_missCollide=0,t.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var e=t.Common.b2Color,n=t.Common.b2internal,r=t.Common.b2Settings,i=t.Common.Math.b2Mat22,s=t.Common.Math.b2Mat33,o=t.Common.Math.b2Math,u=t.Common.Math.b2Sweep,a=t.Common.Math.b2Transform,f=t.Common.Math.b2Vec2,l=t.Common.Math.b2Vec3;e.b2Color=function(){this._r=0,this._g=0,this._b=0},e.prototype.b2Color=function(e,n,r){e===undefined&&(e=0),n===undefined&&(n=0),r===undefined&&(r=0),this._r=t.parseUInt(255*o.Clamp(e,0,1)),this._g=t.parseUInt(255*o.Clamp(n,0,1)),this._b=t.parseUInt(255*o.Clamp(r,0,1))},e.prototype.Set=function(e,n,r){e===undefined&&(e=0),n===undefined&&(n=0),r===undefined&&(r=0),this._r=t.parseUInt(255*o.Clamp(e,0,1)),this._g=t.parseUInt(255*o.Clamp(n,0,1)),this._b=t.parseUInt(255*o.Clamp(r,0,1))},Object.defineProperty(e.prototype,"r",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._r=t.parseUInt(255*o.Clamp(e,0,1))}}),Object.defineProperty(e.prototype,"g",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._g=t.parseUInt(255*o.Clamp(e,0,1))}}),Object.defineProperty(e.prototype,"b",{enumerable:!1,configurable:!0,set:function(e){e===undefined&&(e=0),this._b=t.parseUInt(255*o.Clamp(e,0,1))}}),Object.defineProperty(e.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),r.b2Settings=function(){},r.b2MixFriction=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),Math.sqrt(e*t)},r.b2MixRestitution=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),e>t?e:t},r.b2Assert=function(e){if(!e)throw"Assertion Failed"},t.postDefs.push(function(){t.Common.b2Settings.VERSION="2.1alpha",t.Common.b2Settings.USHRT_MAX=65535,t.Common.b2Settings.b2_pi=Math.PI,t.Common.b2Settings.b2_maxManifoldPoints=2,t.Common.b2Settings.b2_aabbExtension=.1,t.Common.b2Settings.b2_aabbMultiplier=2,t.Common.b2Settings.b2_polygonRadius=2*r.b2_linearSlop,t.Common.b2Settings.b2_linearSlop=.005,t.Common.b2Settings.b2_angularSlop=2/180*r.b2_pi,t.Common.b2Settings.b2_toiSlop=8*r.b2_linearSlop,t.Common.b2Settings.b2_maxTOIContactsPerIsland=32,t.Common.b2Settings.b2_maxTOIJointsPerIsland=32,t.Common.b2Settings.b2_velocityThreshold=1,t.Common.b2Settings.b2_maxLinearCorrection=.2,t.Common.b2Settings.b2_maxAngularCorrection=8/180*r.b2_pi,t.Common.b2Settings.b2_maxTranslation=2,t.Common.b2Settings.b2_maxTranslationSquared=r.b2_maxTranslation*r.b2_maxTranslation,t.Common.b2Settings.b2_maxRotation=.5*r.b2_pi,t.Common.b2Settings.b2_maxRotationSquared=r.b2_maxRotation*r.b2_maxRotation,t.Common.b2Settings.b2_contactBaumgarte=.2,t.Common.b2Settings.b2_timeToSleep=.5,t.Common.b2Settings.b2_linearSleepTolerance=.01,t.Common.b2Settings.b2_angularSleepTolerance=2/180*r.b2_pi})}(),function(){var n=t.Collision.b2AABB,r=t.Common.b2Color,i=t.Common.b2internal,s=t.Common.b2Settings,o=t.Common.Math.b2Mat22,u=t.Common.Math.b2Mat33,a=t.Common.Math.b2Math,f=t.Common.Math.b2Sweep,l=t.Common.Math.b2Transform,c=t.Common.Math.b2Vec2,h=t.Common.Math.b2Vec3;o.b2Mat22=function(){this.col1=new c,this.col2=new c},o.prototype.b2Mat22=function(){this.SetIdentity()},o.FromAngle=function(e){e===undefined&&(e=0);var t=new o;return t.Set(e),t},o.FromVV=function(e,t){var n=new o;return n.SetVV(e,t),n},o.prototype.Set=function(e){e===undefined&&(e=0);var t=Math.cos(e),n=Math.sin(e);this.col1.x=t,this.col2.x=-n,this.col1.y=n,this.col2.y=t},o.prototype.SetVV=function(e,t){this.col1.SetV(e),this.col2.SetV(t)},o.prototype.Copy=function(){var e=new o;return e.SetM(this),e},o.prototype.SetM=function(e){this.col1.SetV(e.col1),this.col2.SetV(e.col2)},o.prototype.AddM=function(e){this.col1.x+=e.col1.x,this.col1.y+=e.col1.y,this.col2.x+=e.col2.x,this.col2.y+=e.col2.y},o.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},o.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},o.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},o.prototype.GetInverse=function(e){var t=this.col1.x,n=this.col2.x,r=this.col1.y,i=this.col2.y,s=t*i-n*r;return s!=0&&(s=1/s),e.col1.x=s*i,e.col2.x=-s*n,e.col1.y=-s*r,e.col2.y=s*t,e},o.prototype.Solve=function(e,t,n){t===undefined&&(t=0),n===undefined&&(n=0);var r=this.col1.x,i=this.col2.x,s=this.col1.y,o=this.col2.y,u=r*o-i*s;return u!=0&&(u=1/u),e.x=u*(o*t-i*n),e.y=u*(r*n-s*t),e},o.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},u.b2Mat33=function(){this.col1=new h,this.col2=new h,this.col3=new h},u.prototype.b2Mat33=function(e,t,n){e===undefined&&(e=null),t===undefined&&(t=null),n===undefined&&(n=null),!e&&!t&&!n?(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero()):(this.col1.SetV(e),this.col2.SetV(t),this.col3.SetV(n))},u.prototype.SetVVV=function(e,t,n){this.col1.SetV(e),this.col2.SetV(t),this.col3.SetV(n)},u.prototype.Copy=function(){return new u(this.col1,this.col2,this.col3)},u.prototype.SetM=function(e){this.col1.SetV(e.col1),this.col2.SetV(e.col2),this.col3.SetV(e.col3)},u.prototype.AddM=function(e){this.col1.x+=e.col1.x,this.col1.y+=e.col1.y,this.col1.z+=e.col1.z,this.col2.x+=e.col2.x,this.col2.y+=e.col2.y,this.col2.z+=e.col2.z,this.col3.x+=e.col3.x,this.col3.y+=e.col3.y,this.col3.z+=e.col3.z},u.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},u.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},u.prototype.Solve22=function(e,t,n){t===undefined&&(t=0),n===undefined&&(n=0);var r=this.col1.x,i=this.col2.x,s=this.col1.y,o=this.col2.y,u=r*o-i*s;return u!=0&&(u=1/u),e.x=u*(o*t-i*n),e.y=u*(r*n-s*t),e},u.prototype.Solve33=function(e,t,n,r){t===undefined&&(t=0),n===undefined&&(n=0),r===undefined&&(r=0);var i=this.col1.x,s=this.col1.y,o=this.col1.z,u=this.col2.x,a=this.col2.y,f=this.col2.z,l=this.col3.x,c=this.col3.y,h=this.col3.z,p=i*(a*h-f*c)+s*(f*l-u*h)+o*(u*c-a*l);return p!=0&&(p=1/p),e.x=p*(t*(a*h-f*c)+n*(f*l-u*h)+r*(u*c-a*l)),e.y=p*(i*(n*h-r*c)+s*(r*l-t*h)+o*(t*c-n*l)),e.z=p*(i*(a*r-f*n)+s*(f*t-u*r)+o*(u*n-a*t)),e},a.b2Math=function(){},a.IsValid=function(e){return e===undefined&&(e=0),isFinite(e)},a.Dot=function(e,t){return e.x*t.x+e.y*t.y},a.CrossVV=function(e,t){return e.x*t.y-e.y*t.x},a.CrossVF=function(e,t){t===undefined&&(t=0);var n=new c(t*e.y,-t*e.x);return n},a.CrossFV=function(e,t){e===undefined&&(e=0);var n=new c(-e*t.y,e*t.x);return n},a.MulMV=function(e,t){var n=new c(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y);return n},a.MulTMV=function(e,t){var n=new c(a.Dot(t,e.col1),a.Dot(t,e.col2));return n},a.MulX=function(e,t){var n=a.MulMV(e.R,t);return n.x+=e.position.x,n.y+=e.position.y,n},a.MulXT=function(e,t){var n=a.SubtractVV(t,e.position),r=n.x*e.R.col1.x+n.y*e.R.col1.y;return n.y=n.x*e.R.col2.x+n.y*e.R.col2.y,n.x=r,n},a.AddVV=function(e,t){var n=new c(e.x+t.x,e.y+t.y);return n},a.SubtractVV=function(e,t){var n=new c(e.x-t.x,e.y-t.y);return n},a.Distance=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},a.DistanceSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},a.MulFV=function(e,t){e===undefined&&(e=0);var n=new c(e*t.x,e*t.y);return n},a.AddMM=function(e,t){var n=o.FromVV(a.AddVV(e.col1,t.col1),a.AddVV(e.col2,t.col2));return n},a.MulMM=function(e,t){var n=o.FromVV(a.MulMV(e,t.col1),a.MulMV(e,t.col2));return n},a.MulTMM=function(e,t){var n=new c(a.Dot(e.col1,t.col1),a.Dot(e.col2,t.col1)),r=new c(a.Dot(e.col1,t.col2),a.Dot(e.col2,t.col2)),i=o.FromVV(n,r);return i},a.Abs=function(e){return e===undefined&&(e=0),e>0?e:-e},a.AbsV=function(e){var t=new c(a.Abs(e.x),a.Abs(e.y));return t},a.AbsM=function(e){var t=o.FromVV(a.AbsV(e.col1),a.AbsV(e.col2));return t},a.Min=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),e<t?e:t},a.MinV=function(e,t){var n=new c(a.Min(e.x,t.x),a.Min(e.y,t.y));return n},a.Max=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),e>t?e:t},a.MaxV=function(e,t){var n=new c(a.Max(e.x,t.x),a.Max(e.y,t.y));return n},a.Clamp=function(e,t,n){return e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),e<t?t:e>n?n:e},a.ClampV=function(e,t,n){return a.MaxV(t,a.MinV(e,n))},a.Swap=function(e,t){var n=e[0];e[0]=t[0],t[0]=n},a.Random=function(){return Math.random()*2-1},a.RandomRange=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0);var n=Math.random();return n=(t-e)*n+e,n},a.NextPowerOfTwo=function(e){return e===undefined&&(e=0),e|=e>>1&2147483647,e|=e>>2&1073741823,e|=e>>4&268435455,e|=e>>8&16777215,e|=e>>16&65535,e+1},a.IsPowerOfTwo=function(e){e===undefined&&(e=0);var t=e>0&&(e&e-1)==0;return t},t.postDefs.push(function(){t.Common.Math.b2Math.b2Vec2_zero=new c(0,0),t.Common.Math.b2Math.b2Mat22_identity=o.FromVV(new c(1,0),new c(0,1)),t.Common.Math.b2Math.b2Transform_identity=new l(a.b2Vec2_zero,a.b2Mat22_identity)}),f.b2Sweep=function(){this.localCenter=new c,this.c0=new c,this.c=new c},f.prototype.Set=function(e){this.localCenter.SetV(e.localCenter),this.c0.SetV(e.c0),this.c.SetV(e.c),this.a0=e.a0,this.a=e.a,this.t0=e.t0},f.prototype.Copy=function(){var e=new f;return e.localCenter.SetV(this.localCenter),e.c0.SetV(this.c0),e.c.SetV(this.c),e.a0=this.a0,e.a=this.a,e.t0=this.t0,e},f.prototype.GetTransform=function(e,t){t===undefined&&(t=0),e.position.x=(1-t)*this.c0.x+t*this.c.x,e.position.y=(1-t)*this.c0.y+t*this.c.y;var n=(1-t)*this.a0+t*this.a;e.R.Set(n);var r=e.R;e.position.x-=r.col1.x*this.localCenter.x+r.col2.x*this.localCenter.y,e.position.y-=r.col1.y*this.localCenter.x+r.col2.y*this.localCenter.y},f.prototype.Advance=function(t){t===undefined&&(t=0);if(this.t0<t&&1-this.t0>e){var n=(t-this.t0)/(1-this.t0);this.c0.x=(1-n)*this.c0.x+n*this.c.x,this.c0.y=(1-n)*this.c0.y+n*this.c.y,this.a0=(1-n)*this.a0+n*this.a,this.t0=t}},l.b2Transform=function(){this.position=new c,this.R=new o},l.prototype.b2Transform=function(e,t){e===undefined&&(e=null),t===undefined&&(t=null),e&&(this.position.SetV(e),this.R.SetM(t))},l.prototype.Initialize=function(e,t){this.position.SetV(e),this.R.SetM(t)},l.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},l.prototype.Set=function(e){this.position.SetV(e.position),this.R.SetM(e.R)},l.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},c.b2Vec2=function(){},c.prototype.b2Vec2=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.x=e,this.y=t},c.prototype.SetZero=function(){this.x=0,this.y=0},c.prototype.Set=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.x=e,this.y=t},c.prototype.SetV=function(e){this.x=e.x,this.y=e.y},c.prototype.GetNegative=function(){return new c(-this.x,-this.y)},c.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},c.Make=function(e,t){return e===undefined&&(e=0),t===undefined&&(t=0),new c(e,t)},c.prototype.Copy=function(){return new c(this.x,this.y)},c.prototype.Add=function(e){this.x+=e.x,this.y+=e.y},c.prototype.Subtract=function(e){this.x-=e.x,this.y-=e.y},c.prototype.Multiply=function(e){e===undefined&&(e=0),this.x*=e,this.y*=e},c.prototype.MulM=function(e){var t=this.x;this.x=e.col1.x*t+e.col2.x*this.y,this.y=e.col1.y*t+e.col2.y*this.y},c.prototype.MulTM=function(e){var t=a.Dot(this,e.col1);this.y=a.Dot(this,e.col2),this.x=t},c.prototype.CrossVF=function(e){e===undefined&&(e=0);var t=this.x;this.x=e*this.y,this.y=-e*t},c.prototype.CrossFV=function(e){e===undefined&&(e=0);var t=this.x;this.x=-e*this.y,this.y=e*t},c.prototype.MinV=function(e){this.x=this.x<e.x?this.x:e.x,this.y=this.y<e.y?this.y:e.y},c.prototype.MaxV=function(e){this.x=this.x>e.x?this.x:e.x,this.y=this.y>e.y?this.y:e.y},c.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},c.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},c.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<e)return 0;var n=1/t;return this.x*=n,this.y*=n,t},c.prototype.IsValid=function(){return a.IsValid(this.x)&&a.IsValid(this.y)},h.b2Vec3=function(){},h.prototype.b2Vec3=function(e,t,n){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),this.x=e,this.y=t,this.z=n},h.prototype.SetZero=function(){this.x=this.y=this.z=0},h.prototype.Set=function(e,t,n){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),this.x=e,this.y=t,this.z=n},h.prototype.SetV=function(e){this.x=e.x,this.y=e.y,this.z=e.z},h.prototype.GetNegative=function(){return new h(-this.x,-this.y,-this.z)},h.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},h.prototype.Copy=function(){return new h(this.x,this.y,this.z)},h.prototype.Add=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},h.prototype.Subtract=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},h.prototype.Multiply=function(e){e===undefined&&(e=0),this.x*=e,this.y*=e,this.z*=e}}(),function(){var i=t.Dynamics.Controllers.b2ControllerEdge,s=t.Common.Math.b2Mat22,o=t.Common.Math.b2Mat33,u=t.Common.Math.b2Math,a=t.Common.Math.b2Sweep,f=t.Common.Math.b2Transform,l=t.Common.Math.b2Vec2,c=t.Common.Math.b2Vec3,h=t.Common.b2Color,p=t.Common.b2internal,d=t.Common.b2Settings,v=t.Collision.b2AABB,m=t.Collision.b2Bound,g=t.Collision.b2BoundValues,y=t.Collision.b2Collision,b=t.Collision.b2ContactID,w=t.Collision.b2ContactPoint,E=t.Collision.b2Distance,S=t.Collision.b2DistanceInput,x=t.Collision.b2DistanceOutput,T=t.Collision.b2DistanceProxy,N=t.Collision.b2DynamicTree,C=t.Collision.b2DynamicTreeBroadPhase,k=t.Collision.b2DynamicTreeNode,L=t.Collision.b2DynamicTreePair,A=t.Collision.b2Manifold,O=t.Collision.b2ManifoldPoint,M=t.Collision.b2Point,_=t.Collision.b2RayCastInput,D=t.Collision.b2RayCastOutput,P=t.Collision.b2Segment,H=t.Collision.b2SeparationFunction,B=t.Collision.b2Simplex,j=t.Collision.b2SimplexCache,F=t.Collision.b2SimplexVertex,I=t.Collision.b2TimeOfImpact,q=t.Collision.b2TOIInput,R=t.Collision.b2WorldManifold,U=t.Collision.ClipVertex,z=t.Collision.Features,W=t.Collision.IBroadPhase,X=t.Collision.Shapes.b2CircleShape,V=t.Collision.Shapes.b2EdgeChainDef,$=t.Collision.Shapes.b2EdgeShape,J=t.Collision.Shapes.b2MassData,K=t.Collision.Shapes.b2PolygonShape,Q=t.Collision.Shapes.b2Shape,G=t.Dynamics.b2Body,Y=t.Dynamics.b2BodyDef,Z=t.Dynamics.b2ContactFilter,et=t.Dynamics.b2ContactImpulse,tt=t.Dynamics.b2ContactListener,nt=t.Dynamics.b2ContactManager,rt=t.Dynamics.b2DebugDraw,it=t.Dynamics.b2DestructionListener,st=t.Dynamics.b2FilterData,ot=t.Dynamics.b2Fixture,ut=t.Dynamics.b2FixtureDef,at=t.Dynamics.b2Island,ft=t.Dynamics.b2TimeStep,lt=t.Dynamics.b2World,ct=t.Dynamics.Contacts.b2CircleContact,ht=t.Dynamics.Contacts.b2Contact,pt=t.Dynamics.Contacts.b2ContactConstraint,dt=t.Dynamics.Contacts.b2ContactConstraintPoint,vt=t.Dynamics.Contacts.b2ContactEdge,mt=t.Dynamics.Contacts.b2ContactFactory,gt=t.Dynamics.Contacts.b2ContactRegister,yt=t.Dynamics.Contacts.b2ContactResult,bt=t.Dynamics.Contacts.b2ContactSolver,wt=t.Dynamics.Contacts.b2EdgeAndCircleContact,Et=t.Dynamics.Contacts.b2NullContact,St=t.Dynamics.Contacts.b2PolyAndCircleContact,xt=t.Dynamics.Contacts.b2PolyAndEdgeContact,Tt=t.Dynamics.Contacts.b2PolygonContact,Nt=t.Dynamics.Contacts.b2PositionSolverManifold,Ct=t.Dynamics.Controllers.b2Controller,kt=t.Dynamics.Joints.b2DistanceJoint,Lt=t.Dynamics.Joints.b2DistanceJointDef,At=t.Dynamics.Joints.b2FrictionJoint,Ot=t.Dynamics.Joints.b2FrictionJointDef,Mt=t.Dynamics.Joints.b2GearJoint,_t=t.Dynamics.Joints.b2GearJointDef,Dt=t.Dynamics.Joints.b2Jacobian,Pt=t.Dynamics.Joints.b2Joint,Ht=t.Dynamics.Joints.b2JointDef,Bt=t.Dynamics.Joints.b2JointEdge,jt=t.Dynamics.Joints.b2LineJoint,Ft=t.Dynamics.Joints.b2LineJointDef,It=t.Dynamics.Joints.b2MouseJoint,qt=t.Dynamics.Joints.b2MouseJointDef,Rt=t.Dynamics.Joints.b2PrismaticJoint,Ut=t.Dynamics.Joints.b2PrismaticJointDef,zt=t.Dynamics.Joints.b2PulleyJoint,Wt=t.Dynamics.Joints.b2PulleyJointDef,Xt=t.Dynamics.Joints.b2RevoluteJoint,Vt=t.Dynamics.Joints.b2RevoluteJointDef,$t=t.Dynamics.Joints.b2WeldJoint,Jt=t.Dynamics.Joints.b2WeldJointDef;G.b2Body=function(){this.m_xf=new f,this.m_sweep=new a,this.m_linearVelocity=new l,this.m_force=new l},G.prototype.connectEdges=function(e,t,n){n===undefined&&(n=0);var r=Math.atan2(t.GetDirectionVector().y,t.GetDirectionVector().x),i=Math.tan((r-n)*.5),s=u.MulFV(i,t.GetDirectionVector());s=u.SubtractVV(s,t.GetNormalVector()),s=u.MulFV(d.b2_toiSlop,s),s=u.AddVV(s,t.GetVertex1());var o=u.AddVV(e.GetDirectionVector(),t.GetDirectionVector());o.Normalize();var a=u.Dot(e.GetDirectionVector(),t.GetNormalVector())>0;return e.SetNextEdge(t,s,o,a),t.SetPrevEdge(e,s,o,a),r},G.prototype.CreateFixture=function(e){if(this.m_world.IsLocked()==1)return null;var t=new ot;t.Create(this,this.m_xf,e);if(this.m_flags&G.e_activeFlag){var n=this.m_world.m_contactManager.m_broadPhase;t.CreateProxy(n,this.m_xf)}return t.m_next=this.m_fixtureList,this.m_fixtureList=t,++this.m_fixtureCount,t.m_body=this,t.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=lt.e_newFixture,t},G.prototype.CreateFixture2=function(e,t){t===undefined&&(t=0);var n=new ut;return n.shape=e,n.density=t,this.CreateFixture(n)},G.prototype.DestroyFixture=function(e){if(this.m_world.IsLocked()==1)return;var t=this.m_fixtureList,n=null,r=!1;while(t!=null){if(t==e){n?n.m_next=e.m_next:this.m_fixtureList=e.m_next,r=!0;break}n=t,t=t.m_next}var i=this.m_contactList;while(i){var s=i.contact;i=i.next;var o=s.GetFixtureA(),u=s.GetFixtureB();(e==o||e==u)&&this.m_world.m_contactManager.Destroy(s)}if(this.m_flags&G.e_activeFlag){var a=this.m_world.m_contactManager.m_broadPhase;e.DestroyProxy(a)}e.Destroy(),e.m_body=null,e.m_next=null,--this.m_fixtureCount,this.ResetMassData()},G.prototype.SetPositionAndAngle=function(e,t){t===undefined&&(t=0);var n;if(this.m_world.IsLocked()==1)return;this.m_xf.R.Set(t),this.m_xf.position.SetV(e);var r=this.m_xf.R,i=this.m_sweep.localCenter;this.m_sweep.c.x=r.col1.x*i.x+r.col2.x*i.y,this.m_sweep.c.y=r.col1.y*i.x+r.col2.y*i.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=t;var s=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.Synchronize(s,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()},G.prototype.SetTransform=function(e){this.SetPositionAndAngle(e.position,e.GetAngle())},G.prototype.GetTransform=function(){return this.m_xf},G.prototype.GetPosition=function(){return this.m_xf.position},G.prototype.SetPosition=function(e){this.SetPositionAndAngle(e,this.GetAngle())},G.prototype.GetAngle=function(){return this.m_sweep.a},G.prototype.SetAngle=function(e){e===undefined&&(e=0),this.SetPositionAndAngle(this.GetPosition(),e)},G.prototype.GetWorldCenter=function(){return this.m_sweep.c},G.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},G.prototype.SetLinearVelocity=function(e){if(this.m_type==G.b2_staticBody)return;this.m_linearVelocity.SetV(e)},G.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},G.prototype.SetAngularVelocity=function(e){e===undefined&&(e=0);if(this.m_type==G.b2_staticBody)return;this.m_angularVelocity=e},G.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},G.prototype.GetDefinition=function(){var e=new Y;return e.type=this.GetType(),e.allowSleep=(this.m_flags&G.e_allowSleepFlag)==G.e_allowSleepFlag,e.angle=this.GetAngle(),e.angularDamping=this.m_angularDamping,e.angularVelocity=this.m_angularVelocity,e.fixedRotation=(this.m_flags&G.e_fixedRotationFlag)==G.e_fixedRotationFlag,e.bullet=(this.m_flags&G.e_bulletFlag)==G.e_bulletFlag,e.awake=(this.m_flags&G.e_awakeFlag)==G.e_awakeFlag,e.linearDamping=this.m_linearDamping,e.linearVelocity.SetV(this.GetLinearVelocity()),e.position=this.GetPosition(),e.userData=this.GetUserData(),e},G.prototype.ApplyForce=function(e,t){if(this.m_type!=G.b2_dynamicBody)return;this.IsAwake()==0&&this.SetAwake(!0),this.m_force.x+=e.x,this.m_force.y+=e.y,this.m_torque+=(t.x-this.m_sweep.c.x)*e.y-(t.y-this.m_sweep.c.y)*e.x},G.prototype.ApplyTorque=function(e){e===undefined&&(e=0);if(this.m_type!=G.b2_dynamicBody)return;this.IsAwake()==0&&this.SetAwake(!0),this.m_torque+=e},G.prototype.ApplyImpulse=function(e,t){if(this.m_type!=G.b2_dynamicBody)return;this.IsAwake()==0&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*e.x,this.m_linearVelocity.y+=this.m_invMass*e.y,this.m_angularVelocity+=this.m_invI*((t.x-this.m_sweep.c.x)*e.y-(t.y-this.m_sweep.c.y)*e.x)},G.prototype.Split=function(e){var t=this.GetLinearVelocity().Copy(),n=this.GetAngularVelocity(),r=this.GetWorldCenter(),i=this,s=this.m_world.CreateBody(this.GetDefinition()),o;for(var a=i.m_fixtureList;a;)if(e(a)){var f=a.m_next;o?o.m_next=f:i.m_fixtureList=f,i.m_fixtureCount--,a.m_next=s.m_fixtureList,s.m_fixtureList=a,s.m_fixtureCount++,a.m_body=s,a=f}else o=a,a=a.m_next;i.ResetMassData(),s.ResetMassData();var l=i.GetWorldCenter(),c=s.GetWorldCenter(),h=u.AddVV(t,u.CrossFV(n,u.SubtractVV(l,r))),p=u.AddVV(t,u.CrossFV(n,u.SubtractVV(c,r)));return i.SetLinearVelocity(h),s.SetLinearVelocity(p),i.SetAngularVelocity(n),s.SetAngularVelocity(n),i.SynchronizeFixtures(),s.SynchronizeFixtures(),s},G.prototype.Merge=function(e){var t;for(t=e.m_fixtureList;t;){var n=t.m_next;e.m_fixtureCount--,t.m_next=this.m_fixtureList,this.m_fixtureList=t,this.m_fixtureCount++,t.m_body=i,t=n}r.m_fixtureCount=0;var r=this,i=e,s=r.GetWorldCenter(),o=i.GetWorldCenter(),u=r.GetLinearVelocity().Copy(),a=i.GetLinearVelocity().Copy(),f=r.GetAngularVelocity(),l=i.GetAngularVelocity();r.ResetMassData(),this.SynchronizeFixtures()},G.prototype.GetMass=function(){return this.m_mass},G.prototype.GetInertia=function(){return this.m_I},G.prototype.GetMassData=function(e){e.mass=this.m_mass,e.I=this.m_I,e.center.SetV(this.m_sweep.localCenter)},G.prototype.SetMassData=function(e){d.b2Assert(this.m_world.IsLocked()==0);if(this.m_world.IsLocked()==1)return;if(this.m_type!=G.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&(this.m_flags&G.e_fixedRotationFlag)==0&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var t=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(u.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-t.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-t.x)},G.prototype.ResetMassData=function(){this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero();if(this.m_type==G.b2_staticBody||this.m_type==G.b2_kinematicBody)return;var e=l.Make(0,0);for(var t=this.m_fixtureList;t;t=t.m_next){if(t.m_density==0)continue;var n=t.GetMassData();this.m_mass+=n.mass,e.x+=n.center.x*n.mass,e.y+=n.center.y*n.mass,this.m_I+=n.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&(this.m_flags&G.e_fixedRotationFlag)==0?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,d.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var r=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(u.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-r.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-r.x)},G.prototype.GetWorldPoint=function(e){var t=this.m_xf.R,n=new l(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,n},G.prototype.GetWorldVector=function(e){return u.MulMV(this.m_xf.R,e)},G.prototype.GetLocalPoint=function(e){return u.MulXT(this.m_xf,e)},G.prototype.GetLocalVector=function(e){return u.MulTMV(this.m_xf.R,e)},G.prototype.GetLinearVelocityFromWorldPoint=function(e){return new l(this.m_linearVelocity.x-this.m_angularVelocity*(e.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(e.x-this.m_sweep.c.x))},G.prototype.GetLinearVelocityFromLocalPoint=function(e){var t=this.m_xf.R,n=new l(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y);return n.x+=this.m_xf.position.x,n.y+=this.m_xf.position.y,new l(this.m_linearVelocity.x-this.m_angularVelocity*(n.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(n.x-this.m_sweep.c.x))},G.prototype.GetLinearDamping=function(){return this.m_linearDamping},G.prototype.SetLinearDamping=function(e){e===undefined&&(e=0),this.m_linearDamping=e},G.prototype.GetAngularDamping=function(){return this.m_angularDamping},G.prototype.SetAngularDamping=function(e){e===undefined&&(e=0),this.m_angularDamping=e},G.prototype.SetType=function(e){e===undefined&&(e=0);if(this.m_type==e)return;this.m_type=e,this.ResetMassData(),this.m_type==G.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;for(var t=this.m_contactList;t;t=t.next)t.contact.FlagForFiltering()},G.prototype.GetType=function(){return this.m_type},G.prototype.SetBullet=function(e){e?this.m_flags|=G.e_bulletFlag:this.m_flags&=~G.e_bulletFlag},G.prototype.IsBullet=function(){return(this.m_flags&G.e_bulletFlag)==G.e_bulletFlag},G.prototype.SetSleepingAllowed=function(e){e?this.m_flags|=G.e_allowSleepFlag:(this.m_flags&=~G.e_allowSleepFlag,this.SetAwake(!0))},G.prototype.SetAwake=function(e){e?(this.m_flags|=G.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~G.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},G.prototype.IsAwake=function(){return(this.m_flags&G.e_awakeFlag)==G.e_awakeFlag},G.prototype.SetFixedRotation=function(e){e?this.m_flags|=G.e_fixedRotationFlag:this.m_flags&=~G.e_fixedRotationFlag,this.ResetMassData()},G.prototype.IsFixedRotation=function(){return(this.m_flags&G.e_fixedRotationFlag)==G.e_fixedRotationFlag},G.prototype.SetActive=function(e){if(e==this.IsActive())return;var t,n;if(e){this.m_flags|=G.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.CreateProxy(t,this.m_xf)}else{this.m_flags&=~G.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase;for(n=this.m_fixtureList;n;n=n.m_next)n.DestroyProxy(t);var r=this.m_contactList;while(r){var i=r;r=r.next,this.m_world.m_contactManager.Destroy(i.contact)}this.m_contactList=null}},G.prototype.IsActive=function(){return(this.m_flags&G.e_activeFlag)==G.e_activeFlag},G.prototype.IsSleepingAllowed=function(){return(this.m_flags&G.e_allowSleepFlag)==G.e_allowSleepFlag},G.prototype.GetFixtureList=function(){return this.m_fixtureList},G.prototype.GetJointList=function(){return this.m_jointList},G.prototype.GetControllerList=function(){return this.m_controllerList},G.prototype.GetContactList=function(){return this.m_contactList},G.prototype.GetNext=function(){return this.m_next},G.prototype.GetUserData=function(){return this.m_userData},G.prototype.SetUserData=function(e){this.m_userData=e},G.prototype.GetWorld=function(){return this.m_world},G.prototype.b2Body=function(e,t){this.m_flags=0,e.bullet&&(this.m_flags|=G.e_bulletFlag),e.fixedRotation&&(this.m_flags|=G.e_fixedRotationFlag),e.allowSleep&&(this.m_flags|=G.e_allowSleepFlag),e.awake&&(this.m_flags|=G.e_awakeFlag),e.active&&(this.m_flags|=G.e_activeFlag),this.m_world=t,this.m_xf.position.SetV(e.position),this.m_xf.R.Set(e.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=e.angle;var n=this.m_xf.R,r=this.m_sweep.localCenter;this.m_sweep.c.x=n.col1.x*r.x+n.col2.x*r.y,this.m_sweep.c.y=n.col1.y*r.x+n.col2.y*r.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_jointList=null,this.m_controllerList=null,this.m_contactList=null,this.m_controllerCount=0,this.m_prev=null,this.m_next=null,this.m_linearVelocity.SetV(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_force.Set(0,0),this.m_torque=0,this.m_sleepTime=0,this.m_type=e.type,this.m_type==G.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_inertiaScale=e.inertiaScale,this.m_userData=e.userData,this.m_fixtureList=null,this.m_fixtureCount=0},G.prototype.SynchronizeFixtures=function(){var e=G.s_xf1;e.R.Set(this.m_sweep.a0);var t=e.R,n=this.m_sweep.localCenter;e.position.x=this.m_sweep.c0.x-(t.col1.x*n.x+t.col2.x*n.y),e.position.y=this.m_sweep.c0.y-(t.col1.y*n.x+t.col2.y*n.y);var r,i=this.m_world.m_contactManager.m_broadPhase;for(r=this.m_fixtureList;r;r=r.m_next)r.Synchronize(i,e,this.m_xf)},G.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var e=this.m_xf.R,t=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(e.col1.x*t.x+e.col2.x*t.y),this.m_xf.position.y=this.m_sweep.c.y-(e.col1.y*t.x+e.col2.y*t.y)},G.prototype.ShouldCollide=function(e){if(this.m_type!=G.b2_dynamicBody&&e.m_type!=G.b2_dynamicBody)return!1;for(var t=this.m_jointList;t;t=t.next)if(t.other==e&&t.joint.m_collideConnected==0)return!1;return!0},G.prototype.Advance=function(e){e===undefined&&(e=0),this.m_sweep.Advance(e),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},t.postDefs.push(function(){t.Dynamics.b2Body.s_xf1=new f,t.Dynamics.b2Body.e_islandFlag=1,t.Dynamics.b2Body.e_awakeFlag=2,t.Dynamics.b2Body.e_allowSleepFlag=4,t.Dynamics.b2Body.e_bulletFlag=8,t.Dynamics.b2Body.e_fixedRotationFlag=16,t.Dynamics.b2Body.e_activeFlag=32,t.Dynamics.b2Body.b2_staticBody=0,t.Dynamics.b2Body.b2_kinematicBody=1,t.Dynamics.b2Body.b2_dynamicBody=2}),Y.b2BodyDef=function(){this.position=new l,this.linearVelocity=new l},Y.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.type=G.b2_staticBody,this.active=!0,this.inertiaScale=1},Z.b2ContactFilter=function(){},Z.prototype.ShouldCollide=function(e,t){var n=e.GetFilterData(),r=t.GetFilterData();if(n.groupIndex==r.groupIndex&&n.groupIndex!=0)return n.groupIndex>0;var i=(n.maskBits&r.categoryBits)!=0&&(n.categoryBits&r.maskBits)!=0;return i},Z.prototype.RayCollide=function(e,t){return e?this.ShouldCollide(e instanceof ot?e:null,t):!0},t.postDefs.push(function(){t.Dynamics.b2ContactFilter.b2_defaultFilter=new Z}),et.b2ContactImpulse=function(){this.normalImpulses=new r(d.b2_maxManifoldPoints),this.tangentImpulses=new r(d.b2_maxManifoldPoints)},tt.b2ContactListener=function(){},tt.prototype.BeginContact=function(e){},tt.prototype.EndContact=function(e){},tt.prototype.PreSolve=function(e,t){},tt.prototype.PostSolve=function(e,t){},t.postDefs.push(function(){t.Dynamics.b2ContactListener.b2_defaultListener=new tt}),nt.b2ContactManager=function(){},nt.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=Z.b2_defaultFilter,this.m_contactListener=tt.b2_defaultListener,this.m_contactFactory=new mt(this.m_allocator),this.m_broadPhase=new C},nt.prototype.AddPair=function(e,t){var n=e instanceof ot?e:null,r=t instanceof ot?t:null,i=n.GetBody(),s=r.GetBody();if(i==s)return;var o=s.GetContactList();while(o){if(o.other==i){var u=o.contact.GetFixtureA(),a=o.contact.GetFixtureB();if(u==n&&a==r)return;if(u==r&&a==n)return}o=o.next}if(s.ShouldCollide(i)==0)return;if(this.m_contactFilter.ShouldCollide(n,r)==0)return;var f=this.m_contactFactory.Create(n,r);n=f.GetFixtureA(),r=f.GetFixtureB(),i=n.m_body,s=r.m_body,f.m_prev=null,f.m_next=this.m_world.m_contactList,this.m_world.m_contactList!=null&&(this.m_world.m_contactList.m_prev=f),this.m_world.m_contactList=f,f.m_nodeA.contact=f,f.m_nodeA.other=s,f.m_nodeA.prev=null,f.m_nodeA.next=i.m_contactList,i.m_contactList!=null&&(i.m_contactList.prev=f.m_nodeA),i.m_contactList=f.m_nodeA,f.m_nodeB.contact=f,f.m_nodeB.other=i,f.m_nodeB.prev=null,f.m_nodeB.next=s.m_contactList,s.m_contactList!=null&&(s.m_contactList.prev=f.m_nodeB),s.m_contactList=f.m_nodeB,++this.m_world.m_contactCount;return},nt.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(t.generateCallback(this,this.AddPair))},nt.prototype.Destroy=function(e){var t=e.GetFixtureA(),n=e.GetFixtureB(),r=t.GetBody(),i=n.GetBody();e.IsTouching()&&this.m_contactListener.EndContact(e),e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_world.m_contactList&&(this.m_world.m_contactList=e.m_next),e.m_nodeA.prev&&(e.m_nodeA.prev.next=e.m_nodeA.next),e.m_nodeA.next&&(e.m_nodeA.next.prev=e.m_nodeA.prev),e.m_nodeA==r.m_contactList&&(r.m_contactList=e.m_nodeA.next),e.m_nodeB.prev&&(e.m_nodeB.prev.next=e.m_nodeB.next),e.m_nodeB.next&&(e.m_nodeB.next.prev=e.m_nodeB.prev),e.m_nodeB==i.m_contactList&&(i.m_contactList=e.m_nodeB.next),this.m_contactFactory.Destroy(e),--this.m_contactCount},nt.prototype.Collide=function(){var e=this.m_world.m_contactList;while(e){var t=e.GetFixtureA(),n=e.GetFixtureB(),r=t.GetBody(),i=n.GetBody(),s=r.IsAwake()&&r.m_type!=G.b2_staticBody,o=i.IsAwake()&&i.m_type!=G.b2_staticBody;if(s==0&&o==0){e=e.GetNext();continue}if(e.m_flags&ht.e_filterFlag){if(i.ShouldCollide(r)==0){var u=e;e=u.GetNext(),this.Destroy(u);continue}if(this.m_contactFilter.ShouldCollide(t,n)==0){u=e,e=u.GetNext(),this.Destroy(u);continue}e.m_flags&=~ht.e_filterFlag}var a=t.m_proxy,f=n.m_proxy,l=this.m_broadPhase.TestOverlap(a,f);if(l==0){u=e,e=u.GetNext(),this.Destroy(u);continue}e.Update(this.m_contactListener),e=e.GetNext()}},t.postDefs.push(function(){t.Dynamics.b2ContactManager.s_evalCP=new w}),rt.b2DebugDraw=function(){},rt.prototype.b2DebugDraw=function(){},rt.prototype.SetFlags=function(e){e===undefined&&(e=0)},rt.prototype.GetFlags=function(){},rt.prototype.AppendFlags=function(e){e===undefined&&(e=0)},rt.prototype.ClearFlags=function(e){e===undefined&&(e=0)},rt.prototype.SetSprite=function(e){},rt.prototype.GetSprite=function(){},rt.prototype.SetDrawScale=function(e){e===undefined&&(e=0)},rt.prototype.GetDrawScale=function(){},rt.prototype.SetLineThickness=function(e){e===undefined&&(e=0)},rt.prototype.GetLineThickness=function(){},rt.prototype.SetAlpha=function(e){e===undefined&&(e=0)},rt.prototype.GetAlpha=function(){},rt.prototype.SetFillAlpha=function(e){e===undefined&&(e=0)},rt.prototype.GetFillAlpha=function(){},rt.prototype.SetXFormScale=function(e){e===undefined&&(e=0)},rt.prototype.GetXFormScale=function(){},rt.prototype.DrawPolygon=function(e,t,n){t===undefined&&(t=0)},rt.prototype.DrawSolidPolygon=function(e,t,n){t===undefined&&(t=0)},rt.prototype.DrawCircle=function(e,t,n){t===undefined&&(t=0)},rt.prototype.DrawSolidCircle=function(e,t,n,r){t===undefined&&(t=0)},rt.prototype.DrawSegment=function(e,t,n){},rt.prototype.DrawTransform=function(e){},t.postDefs.push(function(){t.Dynamics.b2DebugDraw.e_shapeBit=1,t.Dynamics.b2DebugDraw.e_jointBit=2,t.Dynamics.b2DebugDraw.e_aabbBit=4,t.Dynamics.b2DebugDraw.e_pairBit=8,t.Dynamics.b2DebugDraw.e_centerOfMassBit=16,t.Dynamics.b2DebugDraw.e_controllerBit=32}),it.b2DestructionListener=function(){},it.prototype.SayGoodbyeJoint=function(e){},it.prototype.SayGoodbyeFixture=function(e){},st.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},st.prototype.Copy=function(){var e=new st;return e.categoryBits=this.categoryBits,e.maskBits=this.maskBits,e.groupIndex=this.groupIndex,e},ot.b2Fixture=function(){this.m_filter=new st},ot.prototype.GetType=function(){return this.m_shape.GetType()},ot.prototype.GetShape=function(){return this.m_shape},ot.prototype.SetSensor=function(e){if(this.m_isSensor==e)return;this.m_isSensor=e;if(this.m_body==null)return;var t=this.m_body.GetContactList();while(t){var n=t.contact,r=n.GetFixtureA(),i=n.GetFixtureB();(r==this||i==this)&&n.SetSensor(r.IsSensor()||i.IsSensor()),t=t.next}},ot.prototype.IsSensor=function(){return this.m_isSensor},ot.prototype.SetFilterData=function(e){this.m_filter=e.Copy();if(this.m_body)return;var t=this.m_body.GetContactList();while(t){var n=t.contact,r=n.GetFixtureA(),i=n.GetFixtureB();(r==this||i==this)&&n.FlagForFiltering(),t=t.next}},ot.prototype.GetFilterData=function(){return this.m_filter.Copy()},ot.prototype.GetBody=function(){return this.m_body},ot.prototype.GetNext=function(){return this.m_next},ot.prototype.GetUserData=function(){return this.m_userData},ot.prototype.SetUserData=function(e){this.m_userData=e},ot.prototype.TestPoint=function(e){return this.m_shape.TestPoint(this.m_body.GetTransform(),e)},ot.prototype.RayCast=function(e,t){return this.m_shape.RayCast(e,t,this.m_body.GetTransform())},ot.prototype.GetMassData=function(e){return e===undefined&&(e=null),e==null&&(e=new J),this.m_shape.ComputeMass(e,this.m_density),e},ot.prototype.SetDensity=function(e){e===undefined&&(e=0),this.m_density=e},ot.prototype.GetDensity=function(){return this.m_density},ot.prototype.GetFriction=function(){return this.m_friction},ot.prototype.SetFriction=function(e){e===undefined&&(e=0),this.m_friction=e},ot.prototype.GetRestitution=function(){return this.m_restitution},ot.prototype.SetRestitution=function(e){e===undefined&&(e=0),this.m_restitution=e},ot.prototype.GetAABB=function(){return this.m_aabb},ot.prototype.b2Fixture=function(){this.m_aabb=new v,this.m_userData=null,this.m_body=null,this.m_next=null,this.m_shape=null,this.m_density=0,this.m_friction=0,this.m_restitution=0},ot.prototype.Create=function(e,t,n){this.m_userData=n.userData,this.m_friction=n.friction,this.m_restitution=n.restitution,this.m_body=e,this.m_next=null,this.m_filter=n.filter.Copy(),this.m_isSensor=n.isSensor,this.m_shape=n.shape.Copy(),this.m_density=n.density},ot.prototype.Destroy=function(){this.m_shape=null},ot.prototype.CreateProxy=function(e,t){this.m_shape.ComputeAABB(this.m_aabb,t),this.m_proxy=e.CreateProxy(this.m_aabb,this)},ot.prototype.DestroyProxy=function(e){if(this.m_proxy==null)return;e.DestroyProxy(this.m_proxy),this.m_proxy=null},ot.prototype.Synchronize=function(e,t,n){if(!this.m_proxy)return;var r=new v,i=new v;this.m_shape.ComputeAABB(r,t),this.m_shape.ComputeAABB(i,n),this.m_aabb.Combine(r,i);var s=u.SubtractVV(n.position,t.position);e.MoveProxy(this.m_proxy,this.m_aabb,s)},ut.b2FixtureDef=function(){this.filter=new st},ut.prototype.b2FixtureDef=function(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},at.b2Island=function(){},at.prototype.b2Island=function(){this.m_bodies=new n,this.m_contacts=new n,this.m_joints=new n},at.prototype.Initialize=function(e,t,n,r,i,s){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0);var o=0;this.m_bodyCapacity=e,this.m_contactCapacity=t,this.m_jointCapacity=n,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=r,this.m_listener=i,this.m_contactSolver=s;for(o=this.m_bodies.length;o<e;o++)this.m_bodies[o]=null;for(o=this.m_contacts.length;o<t;o++)this.m_contacts[o]=null;for(o=this.m_joints.length;o<n;o++)this.m_joints[o]=null},at.prototype.Clear=function(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0},at.prototype.Solve=function(e,t,n){var r=0,i=0,s,o;for(r=0;r<this.m_bodyCount;++r){s=this.m_bodies[r];if(s.GetType()!=G.b2_dynamicBody)continue;s.m_linearVelocity.x+=e.dt*(t.x+s.m_invMass*s.m_force.x),s.m_linearVelocity.y+=e.dt*(t.y+s.m_invMass*s.m_force.y),s.m_angularVelocity+=e.dt*s.m_invI*s.m_torque,s.m_linearVelocity.Multiply(u.Clamp(1-e.dt*s.m_linearDamping,0,1)),s.m_angularVelocity*=u.Clamp(1-e.dt*s.m_angularDamping,0,1)}this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var a=this.m_contactSolver;a.InitVelocityConstraints(e);for(r=0;r<this.m_jointCount;++r)o=this.m_joints[r],o.InitVelocityConstraints(e);for(r=0;r<e.velocityIterations;++r){for(i=0;i<this.m_jointCount;++i)o=this.m_joints[i],o.SolveVelocityConstraints(e);a.SolveVelocityConstraints()}for(r=0;r<this.m_jointCount;++r)o=this.m_joints[r],o.FinalizeVelocityConstraints();a.FinalizeVelocityConstraints();for(r=0;r<this.m_bodyCount;++r){s=this.m_bodies[r];if(s.GetType()==G.b2_staticBody)continue;var f=e.dt*s.m_linearVelocity.x,l=e.dt*s.m_linearVelocity.y;f*f+l*l>d.b2_maxTranslationSquared&&(s.m_linearVelocity.Normalize(),s.m_linearVelocity.x*=d.b2_maxTranslation*e.inv_dt,s.m_linearVelocity.y*=d.b2_maxTranslation*e.inv_dt);var c=e.dt*s.m_angularVelocity;c*c>d.b2_maxRotationSquared&&(s.m_angularVelocity<0?s.m_angularVelocity=-d.b2_maxRotation*e.inv_dt:s.m_angularVelocity=d.b2_maxRotation*e.inv_dt),s.m_sweep.c0.SetV(s.m_sweep.c),s.m_sweep.a0=s.m_sweep.a,s.m_sweep.c.x+=e.dt*s.m_linearVelocity.x,s.m_sweep.c.y+=e.dt*s.m_linearVelocity.y,s.m_sweep.a+=e.dt*s.m_angularVelocity,s.SynchronizeTransform()}for(r=0;r<e.positionIterations;++r){var h=a.SolvePositionConstraints(d.b2_contactBaumgarte),p=!0;for(i=0;i<this.m_jointCount;++i){o=this.m_joints[i];var v=o.SolvePositionConstraints(d.b2_contactBaumgarte);p=p&&v}if(h&&p)break}this.Report(a.m_constraints);if(n){var m=Number.MAX_VALUE,g=d.b2_linearSleepTolerance*d.b2_linearSleepTolerance,y=d.b2_angularSleepTolerance*d.b2_angularSleepTolerance;for(r=0;r<this.m_bodyCount;++r){s=this.m_bodies[r];if(s.m_type==G.b2_staticBody)continue;(s.m_flags&G.e_allowSleepFlag)==0||s.m_angularVelocity*s.m_angularVelocity>y||u.Dot(s.m_linearVelocity,s.m_linearVelocity)>g?(s.m_sleepTime=0,m=0):(s.m_sleepTime+=e.dt,m=u.Min(m,s.m_sleepTime))}if(m>=d.b2_timeToSleep)for(r=0;r<this.m_bodyCount;++r)s=this.m_bodies[r],s.SetAwake(!1)}},at.prototype.SolveTOI=function(e){var t=0,n=0;this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator);var r=this.m_contactSolver;for(t=0;t<this.m_jointCount;++t)this.m_joints[t].InitVelocityConstraints(e);for(t=0;t<e.velocityIterations;++t){r.SolveVelocityConstraints();for(n=0;n<this.m_jointCount;++n)this.m_joints[n].SolveVelocityConstraints(e)}for(t=0;t<this.m_bodyCount;++t){var i=this.m_bodies[t];if(i.GetType()==G.b2_staticBody)continue;var s=e.dt*i.m_linearVelocity.x,o=e.dt*i.m_linearVelocity.y;s*s+o*o>d.b2_maxTranslationSquared&&(i.m_linearVelocity.Normalize(),i.m_linearVelocity.x*=d.b2_maxTranslation*e.inv_dt,i.m_linearVelocity.y*=d.b2_maxTranslation*e.inv_dt);var u=e.dt*i.m_angularVelocity;u*u>d.b2_maxRotationSquared&&(i.m_angularVelocity<0?i.m_angularVelocity=-d.b2_maxRotation*e.inv_dt:i.m_angularVelocity=d.b2_maxRotation*e.inv_dt),i.m_sweep.c0.SetV(i.m_sweep.c),i.m_sweep.a0=i.m_sweep.a,i.m_sweep.c.x+=e.dt*i.m_linearVelocity.x,i.m_sweep.c.y+=e.dt*i.m_linearVelocity.y,i.m_sweep.a+=e.dt*i.m_angularVelocity,i.SynchronizeTransform()}var a=.75;for(t=0;t<e.positionIterations;++t){var f=r.SolvePositionConstraints(a),l=!0;for(n=0;n<this.m_jointCount;++n){var c=this.m_joints[n].SolvePositionConstraints(d.b2_contactBaumgarte);l=l&&c}if(f&&l)break}this.Report(r.m_constraints)},at.prototype.Report=function(e){if(this.m_listener==null)return;for(var t=0;t<this.m_contactCount;++t){var n=this.m_contacts[t],r=e[t];for(var i=0;i<r.pointCount;++i)at.s_impulse.normalImpulses[i]=r.points[i].normalImpulse,at.s_impulse.tangentImpulses[i]=r.points[i].tangentImpulse;this.m_listener.PostSolve(n,at.s_impulse)}},at.prototype.AddBody=function(e){e.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=e},at.prototype.AddContact=function(e){this.m_contacts[this.m_contactCount++]=e},at.prototype.AddJoint=function(e){this.m_joints[this.m_jointCount++]=e},t.postDefs.push(function(){t.Dynamics.b2Island.s_impulse=new et}),ft.b2TimeStep=function(){},ft.prototype.Set=function(e){this.dt=e.dt,this.inv_dt=e.inv_dt,this.positionIterations=e.positionIterations,this.velocityIterations=e.velocityIterations,this.warmStarting=e.warmStarting},lt.b2World=function(){this.s_stack=new n,this.m_contactManager=new nt,this.m_contactSolver=new bt,this.m_island=new at},lt.prototype.b2World=function(e,t){this.m_destructionListener=null,this.m_debugDraw=null,this.m_bodyList=null,this.m_contactList=null,this.m_jointList=null,this.m_controllerList=null,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_controllerCount=0,lt.m_warmStarting=!0,lt.m_continuousPhysics=!0,this.m_allowSleep=t,this.m_gravity=e,this.m_inv_dt0=0,this.m_contactManager.m_world=this;var n=new Y;this.m_groundBody=this.CreateBody(n)},lt.prototype.SetDestructionListener=function(e){this.m_destructionListener=e},lt.prototype.SetContactFilter=function(e){this.m_contactManager.m_contactFilter=e},lt.prototype.SetContactListener=function(e){this.m_contactManager.m_contactListener=e},lt.prototype.SetDebugDraw=function(e){this.m_debugDraw=e},lt.prototype.SetBroadPhase=function(e){var t=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=e;for(var n=this.m_bodyList;n;n=n.m_next)for(var r=n.m_fixtureList;r;r=r.m_next)r.m_proxy=e.CreateProxy(t.GetFatAABB(r.m_proxy),r)},lt.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},lt.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},lt.prototype.CreateBody=function(e){if(this.IsLocked()==1)return null;var t=new G(e,this);return t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t},lt.prototype.DestroyBody=function(e){if(this.IsLocked()==1)return;var t=e.m_jointList;while(t){var n=t;t=t.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(n.joint),this.DestroyJoint(n.joint)}var r=e.m_controllerList;while(r){var i=r;r=r.nextController,i.controller.RemoveBody(e)}var s=e.m_contactList;while(s){var o=s;s=s.next,this.m_contactManager.Destroy(o.contact)}e.m_contactList=null;var u=e.m_fixtureList;while(u){var a=u;u=u.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(a),a.DestroyProxy(this.m_contactManager.m_broadPhase),a.Destroy()}e.m_fixtureList=null,e.m_fixtureCount=0,e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_bodyList&&(this.m_bodyList=e.m_next),--this.m_bodyCount},lt.prototype.CreateJoint=function(e){var t=Pt.Create(e,null);t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB;var n=e.bodyA,r=e.bodyB;if(e.collideConnected==0){var i=r.GetContactList();while(i)i.other==n&&i.contact.FlagForFiltering(),i=i.next}return t},lt.prototype.DestroyJoint=function(e){var t=e.m_collideConnected;e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),e==this.m_jointList&&(this.m_jointList=e.m_next);var n=e.m_bodyA,r=e.m_bodyB;n.SetAwake(!0),r.SetAwake(!0),e.m_edgeA.prev&&(e.m_edgeA.prev.next=e.m_edgeA.next),e.m_edgeA.next&&(e.m_edgeA.next.prev=e.m_edgeA.prev),e.m_edgeA==n.m_jointList&&(n.m_jointList=e.m_edgeA.next),e.m_edgeA.prev=null,e.m_edgeA.next=null,e.m_edgeB.prev&&(e.m_edgeB.prev.next=e.m_edgeB.next),e.m_edgeB.next&&(e.m_edgeB.next.prev=e.m_edgeB.prev),e.m_edgeB==r.m_jointList&&(r.m_jointList=e.m_edgeB.next),e.m_edgeB.prev=null,e.m_edgeB.next=null,Pt.Destroy(e,null),--this.m_jointCount;if(t==0){var i=r.GetContactList();while(i)i.other==n&&i.contact.FlagForFiltering(),i=i.next}},lt.prototype.AddController=function(e){return e.m_next=this.m_controllerList,e.m_prev=null,this.m_controllerList=e,e.m_world=this,this.m_controllerCount++,e},lt.prototype.RemoveController=function(e){e.m_prev&&(e.m_prev.m_next=e.m_next),e.m_next&&(e.m_next.m_prev=e.m_prev),this.m_controllerList==e&&(this.m_controllerList=e.m_next),this.m_controllerCount--},lt.prototype.CreateController=function(e){if(e.m_world!=this)throw new Error("Controller can only be a member of one world");return e.m_next=this.m_controllerList,e.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=e),this.m_controllerList=e,++this.m_controllerCount,e.m_world=this,e},lt.prototype.DestroyController=function(e){e.Clear(),e.m_next&&(e.m_next.m_prev=e.m_prev),e.m_prev&&(e.m_prev.m_next=e.m_next),e==this.m_controllerList&&(this.m_controllerList=e.m_next),--this.m_controllerCount},lt.prototype.SetWarmStarting=function(e){lt.m_warmStarting=e},lt.prototype.SetContinuousPhysics=function(e){lt.m_continuousPhysics=e},lt.prototype.GetBodyCount=function(){return this.m_bodyCount},lt.prototype.GetJointCount=function(){return this.m_jointCount},lt.prototype.GetContactCount=function(){return this.m_contactCount},lt.prototype.SetGravity=function(e){this.m_gravity=e},lt.prototype.GetGravity=function(){return this.m_gravity},lt.prototype.GetGroundBody=function(){return this.m_groundBody},lt.prototype.Step=function(e,t,n){e===undefined&&(e=0),t===undefined&&(t=0),n===undefined&&(n=0),this.m_flags&lt.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~lt.e_newFixture),this.m_flags|=lt.e_locked;var r=lt.s_timestep2;r.dt=e,r.velocityIterations=t,r.positionIterations=n,e>0?r.inv_dt=1/e:r.inv_dt=0,r.dtRatio=this.m_inv_dt0*e,r.warmStarting=lt.m_warmStarting,this.m_contactManager.Collide(),r.dt>0&&this.Solve(r),lt.m_continuousPhysics&&r.dt>0&&this.SolveTOI(r),r.dt>0&&(this.m_inv_dt0=r.inv_dt),this.m_flags&=~lt.e_locked},lt.prototype.ClearForces=function(){for(var e=this.m_bodyList;e;e=e.m_next)e.m_force.SetZero(),e.m_torque=0},lt.prototype.DrawDebugData=function(){if(this.m_debugDraw==null)return;this.m_debugDraw.m_sprite.graphics.clear();var e=this.m_debugDraw.GetFlags(),t=0,n,r,i,s,o,u=new l,a=new l,f=new l,c,p=new v,d=new v,m=[new l,new l,new l,new l],g=new h(0,0,0);if(e&rt.e_shapeBit)for(n=this.m_bodyList;n;n=n.m_next){c=n.m_xf;for(r=n.GetFixtureList();r;r=r.m_next)i=r.GetShape(),n.IsActive()==0?(g.Set(.5,.5,.3),this.DrawShape(i,c,g)):n.GetType()==G.b2_staticBody?(g.Set(.5,.9,.5),this.DrawShape(i,c,g)):n.GetType()==G.b2_kinematicBody?(g.Set(.5,.5,.9),this.DrawShape(i,c,g)):n.IsAwake()==0?(g.Set(.6,.6,.6),this.DrawShape(i,c,g)):(g.Set(.9,.7,.7),this.DrawShape(i,c,g))}if(e&rt.e_jointBit)for(s=this.m_jointList;s;s=s.m_next)this.DrawJoint(s);if(e&rt.e_controllerBit)for(var y=this.m_controllerList;y;y=y.m_next)y.Draw(this.m_debugDraw);if(e&rt.e_pairBit){g.Set(.3,.9,.9);for(var b=this.m_contactManager.m_contactList;b;b=b.GetNext()){var w=b.GetFixtureA(),E=b.GetFixtureB(),S=w.GetAABB().GetCenter(),x=E.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(S,x,g)}}if(e&rt.e_aabbBit){o=this.m_contactManager.m_broadPhase,m=[new l,new l,new l,new l];for(n=this.m_bodyList;n;n=n.GetNext()){if(n.IsActive()==0)continue;for(r=n.GetFixtureList();r;r=r.GetNext()){var T=o.GetFatAABB(r.m_proxy);m[0].Set(T.lowerBound.x,T.lowerBound.y),m[1].Set(T.upperBound.x,T.lowerBound.y),m[2].Set(T.upperBound.x,T.upperBound.y),m[3].Set(T.lowerBound.x,T.upperBound.y),this.m_debugDraw.DrawPolygon(m,4,g)}}}if(e&rt.e_centerOfMassBit)for(n=this.m_bodyList;n;n=n.m_next)c=lt.s_xf,c.R=n.m_xf.R,c.position=n.GetWorldCenter(),this.m_debugDraw.DrawTransform(c)},lt.prototype.QueryAABB=function(e,t){function i(t){return e(r.GetUserData(t))}var n=this,r=n.m_contactManager.m_broadPhase;r.Query(i,t)},lt.prototype.QueryShape=function(e,t,n){function s(r){var s=i.GetUserData(r)instanceof ot?i.GetUserData(r):null;return Q.TestOverlap(t,n,s.GetShape(),s.GetBody().GetTransform())?e(s):!0}var r=this;n===undefined&&(n=null),n==null&&(n=new f,n.SetIdentity());var i=r.m_contactManager.m_broadPhase,o=new v;t.ComputeAABB(o,n),i.Query(s,o)},lt.prototype.QueryPoint=function(e,t){function i(n){var i=r.GetUserData(n)instanceof ot?r.GetUserData(n):null;return i.TestPoint(t)?e(i):!0}var n=this,r=n.m_contactManager.m_broadPhase,s=new v;s.lowerBound.Set(t.x-d.b2_linearSlop,t.y-d.b2_linearSlop),s.upperBound.Set(t.x+d.b2_linearSlop,t.y+d.b2_linearSlop),r.Query(i,s)},lt.prototype.RayCast=function(e,t,n){function o(r,o){var u=i.GetUserData(o),a=u instanceof ot?u:null,f=a.RayCast(s,r);if(f){var c=s.fraction,h=new l((1-c)*t.x+c*n.x,(1-c)*t.y+c*n.y);return e(a,h,s.normal,c)}return r.maxFraction}var r=this,i=r.m_contactManager.m_broadPhase,s=new D,u=new _(t,n);i.RayCast(o,u)},lt.prototype.RayCastOne=function(e,t){function i(e,t,n,i){return i===undefined&&(i=0),r=e,i}var n=this,r;return n.RayCast(i,e,t),r},lt.prototype.RayCastAll=function(e,t){function s(e,t,n,r){return r===undefined&&(r=0),i[i.length]=e,1}var r=this,i=new n;return r.RayCast(s,e,t),i},lt.prototype.GetBodyList=function(){return this.m_bodyList},lt.prototype.GetJointList=function(){return this.m_jointList},lt.prototype.GetContactList=function(){return this.m_contactList},lt.prototype.IsLocked=function(){return(this.m_flags&lt.e_locked)>0},lt.prototype.Solve=function(e){var t;for(var n=this.m_controllerList;n;n=n.m_next)n.Step(e);var r=this.m_island;r.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver);for(t=this.m_bodyList;t;t=t.m_next)t.m_flags&=~G.e_islandFlag;for(var i=this.m_contactList;i;i=i.m_next)i.m_flags&=~ht.e_islandFlag;for(var s=this.m_jointList;s;s=s.m_next)s.m_islandFlag=!1;var o=parseInt(this.m_bodyCount),u=this.s_stack;for(var a=this.m_bodyList;a;a=a.m_next){if(a.m_flags&G.e_islandFlag)continue;if(a.IsAwake()==0||a.IsActive()==0)continue;if(a.GetType()==G.b2_staticBody)continue;r.Clear();var f=0;u[f++]=a,a.m_flags|=G.e_islandFlag;while(f>0){t=u[--f],r.AddBody(t),t.IsAwake()==0&&t.SetAwake(!0);if(t.GetType()==G.b2_staticBody)continue;var l;for(var c=t.m_contactList;c;c=c.next){if(c.contact.m_flags&ht.e_islandFlag)continue;if(c.contact.IsSensor()==1||c.contact.IsEnabled()==0||c.contact.IsTouching()==0)continue;r.AddContact(c.contact),c.contact.m_flags|=ht.e_islandFlag,l=c.other;if(l.m_flags&G.e_islandFlag)continue;u[f++]=l,l.m_flags|=G.e_islandFlag}for(var h=t.m_jointList;h;h=h.next){if(h.joint.m_islandFlag==1)continue;l=h.other;if(l.IsActive()==0)continue;r.AddJoint(h.joint),h.joint.m_islandFlag=!0;if(l.m_flags&G.e_islandFlag)continue;u[f++]=l,l.m_flags|=G.e_islandFlag}}r.Solve(e,this.m_gravity,this.m_allowSleep);for(var p=0;p<r.m_bodyCount;++p)t=r.m_bodies[p],t.GetType()==G.b2_staticBody&&(t.m_flags&=~G.e_islandFlag)}for(p=0;p<u.length;++p){if(!u[p])break;u[p]=null}for(t=this.m_bodyList;t;t=t.m_next){if(t.IsAwake()==0||t.IsActive()==0)continue;if(t.GetType()==G.b2_staticBody)continue;t.SynchronizeFixtures()}this.m_contactManager.FindNewContacts()},lt.prototype.SolveTOI=function(t){var n,r,i,s,o,u,a,f=this.m_island;f.Initialize(this.m_bodyCount,d.b2_maxTOIContactsPerIsland,d.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var l=lt.s_queue;for(n=this.m_bodyList;n;n=n.m_next)n.m_flags&=~G.e_islandFlag,n.m_sweep.t0=0;var c;for(c=this.m_contactList;c;c=c.m_next)c.m_flags&=~(ht.e_toiFlag|ht.e_islandFlag);for(a=this.m_jointList;a;a=a.m_next)a.m_islandFlag=!1;for(;;){var h=null,p=1;for(c=this.m_contactList;c;c=c.m_next){if(c.IsSensor()==1||c.IsEnabled()==0||c.IsContinuous()==0)continue;var v=1;if(c.m_flags&ht.e_toiFlag)v=c.m_toi;else{r=c.m_fixtureA,i=c.m_fixtureB,s=r.m_body,o=i.m_body;var m=s.IsAwake()&&s.m_type!=G.b2_staticBody,g=o.IsAwake()&&o.m_type!=G.b2_staticBody;if(m==0&&g==0)continue;var y=s.m_sweep.t0;s.m_sweep.t0<o.m_sweep.t0?(y=o.m_sweep.t0,s.m_sweep.Advance(y)):o.m_sweep.t0<s.m_sweep.t0&&(y=s.m_sweep.t0,o.m_sweep.Advance(y)),v=c.ComputeTOI(s.m_sweep,o.m_sweep),d.b2Assert(0<=v&&v<=1),v>0&&v<1&&(v=(1-v)*y+v,v>1&&(v=1)),c.m_toi=v,c.m_flags|=ht.e_toiFlag}e<v&&v<p&&(h=c,p=v)}if(h==null||1-100*e<p)break;r=h.m_fixtureA,i=h.m_fixtureB,s=r.m_body,o=i.m_body,lt.s_backupA.Set(s.m_sweep),lt.s_backupB.Set(o.m_sweep),s.Advance(p),o.Advance(p),h.Update(this.m_contactManager.m_contactListener),h.m_flags&=~ht.e_toiFlag;if(h.IsSensor()==1||h.IsEnabled()==0){s.m_sweep.Set(lt.s_backupA),o.m_sweep.Set(lt.s_backupB),s.SynchronizeTransform(),o.SynchronizeTransform();continue}if(h.IsTouching()==0)continue;var b=s;b.GetType()!=G.b2_dynamicBody&&(b=o),f.Clear();var w=0,E=0;l[w+E++]=b,b.m_flags|=G.e_islandFlag;while(E>0){n=l[w++],--E,f.AddBody(n),n.IsAwake()==0&&n.SetAwake(!0);if(n.GetType()!=G.b2_dynamicBody)continue;for(u=n.m_contactList;u;u=u.next){if(f.m_contactCount==f.m_contactCapacity)break;if(u.contact.m_flags&ht.e_islandFlag)continue;if(u.contact.IsSensor()==1||u.contact.IsEnabled()==0||u.contact.IsTouching()==0)continue;f.AddContact(u.contact),u.contact.m_flags|=ht.e_islandFlag;var S=u.other;if(S.m_flags&G.e_islandFlag)continue;S.GetType()!=G.b2_staticBody&&(S.Advance(p),S.SetAwake(!0)),l[w+E]=S,++E,S.m_flags|=G.e_islandFlag}for(var x=n.m_jointList;x;x=x.next){if(f.m_jointCount==f.m_jointCapacity)continue;if(x.joint.m_islandFlag==1)continue;S=x.other;if(S.IsActive()==0)continue;f.AddJoint(x.joint),x.joint.m_islandFlag=!0;if(S.m_flags&G.e_islandFlag)continue;S.GetType()!=G.b2_staticBody&&(S.Advance(p),S.SetAwake(!0)),l[w+E]=S,++E,S.m_flags|=G.e_islandFlag}}var T=lt.s_timestep;T.warmStarting=!1,T.dt=(1-p)*t.dt,T.inv_dt=1/T.dt,T.dtRatio=0,T.velocityIterations=t.velocityIterations,T.positionIterations=t.positionIterations,f.SolveTOI(T);var N=0;for(N=0;N<f.m_bodyCount;++N){n=f.m_bodies[N],n.m_flags&=~G.e_islandFlag;if(n.IsAwake()==0)continue;if(n.GetType()!=G.b2_dynamicBody)continue;n.SynchronizeFixtures();for(u=n.m_contactList;u;u=u.next)u.contact.m_flags&=~ht.e_toiFlag}for(N=0;N<f.m_contactCount;++N)c=f.m_contacts[N],c.m_flags&=~(ht.e_toiFlag|ht.e_islandFlag);for(N=0;N<f.m_jointCount;++N)a=f.m_joints[N],a.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}},lt.prototype.DrawJoint=function(e){var t=e.GetBodyA(),n=e.GetBodyB(),r=t.m_xf,i=n.m_xf,s=r.position,o=i.position,u=e.GetAnchorA(),a=e.GetAnchorB(),f=lt.s_jointColor;switch(e.m_type){case Pt.e_distanceJoint:this.m_debugDraw.DrawSegment(u,a,f);break;case Pt.e_pulleyJoint:var l=e instanceof zt?e:null,c=l.GetGroundAnchorA(),h=l.GetGroundAnchorB();this.m_debugDraw.DrawSegment(c,u,f),this.m_debugDraw.DrawSegment(h,a,f),this.m_debugDraw.DrawSegment(c,h,f);break;case Pt.e_mouseJoint:this.m_debugDraw.DrawSegment(u,a,f);break;default:t!=this.m_groundBody&&this.m_debugDraw.DrawSegment(s,u,f),this.m_debugDraw.DrawSegment(u,a,f),n!=this.m_groundBody&&this.m_debugDraw.DrawSegment(o,a,f)}},lt.prototype.DrawShape=function(e,t,r){switch(e.m_type){case Q.e_circleShape:var i=e instanceof X?e:null,s=u.MulX(t,i.m_p),o=i.m_radius,a=t.R.col1;this.m_debugDraw.DrawSolidCircle(s,o,a,r);break;case Q.e_polygonShape:var f=0,l=e instanceof K?e:null,c=parseInt(l.GetVertexCount()),h=l.GetVertices(),p=new n(c);for(f=0;f<c;++f)p[f]=u.MulX(t,h[f]);this.m_debugDraw.DrawSolidPolygon(p,c,r);break;case Q.e_edgeShape:var d=e instanceof $?e:null;this.m_debugDraw.DrawSegment(u.MulX(t,d.GetVertex1()),u.MulX(t,d.GetVertex2()),r)}},t.postDefs.push(function(){t.Dynamics.b2World.s_timestep2=new ft,t.Dynamics.b2World.s_xf=new f,t.Dynamics.b2World.s_backupA=new a,t.Dynamics.b2World.s_backupB=new a,t.Dynamics.b2World.s_timestep=new ft,t.Dynamics.b2World.s_queue=new n,t.Dynamics.b2World.s_jointColor=new h(.5,.8,.8),t.Dynamics.b2World.e_newFixture=1,t.Dynamics.b2World.e_locked=2})}(),function(){var i=t.Collision.Shapes.b2CircleShape,s=t.Collision.Shapes.b2EdgeChainDef,o=t.Collision.Shapes.b2EdgeShape,u=t.Collision.Shapes.b2MassData,a=t.Collision.Shapes.b2PolygonShape,f=t.Collision.Shapes.b2Shape,l=t.Dynamics.Contacts.b2CircleContact,c=t.Dynamics.Contacts.b2Contact,h=t.Dynamics.Contacts.b2ContactConstraint,p=t.Dynamics.Contacts.b2ContactConstraintPoint,d=t.Dynamics.Contacts.b2ContactEdge,v=t.Dynamics.Contacts.b2ContactFactory,m=t.Dynamics.Contacts.b2ContactRegister,g=t.Dynamics.Contacts.b2ContactResult,y=t.Dynamics.Contacts.b2ContactSolver,b=t.Dynamics.Contacts.b2EdgeAndCircleContact,w=t.Dynamics.Contacts.b2NullContact,E=t.Dynamics.Contacts.b2PolyAndCircleContact,S=t.Dynamics.Contacts.b2PolyAndEdgeContact,x=t.Dynamics.Contacts.b2PolygonContact,T=t.Dynamics.Contacts.b2PositionSolverManifold,N=t.Dynamics.b2Body,C=t.Dynamics.b2BodyDef,k=t.Dynamics.b2ContactFilter,L=t.Dynamics.b2ContactImpulse,A=t.Dynamics.b2ContactListener,O=t.Dynamics.b2ContactManager,M=t.Dynamics.b2DebugDraw,_=t.Dynamics.b2DestructionListener,D=t.Dynamics.b2FilterData,P=t.Dynamics.b2Fixture,H=t.Dynamics.b2FixtureDef,B=t.Dynamics.b2Island,j=t.Dynamics.b2TimeStep,F=t.Dynamics.b2World,I=t.Common.b2Color,q=t.Common.b2internal,R=t.Common.b2Settings,U=t.Common.Math.b2Mat22,z=t.Common.Math.b2Mat33,W=t.Common.Math.b2Math,X=t.Common.Math.b2Sweep,V=t.Common.Math.b2Transform,$=t.Common.Math.b2Vec2,J=t.Common.Math.b2Vec3,K=t.Collision.b2AABB,Q=t.Collision.b2Bound,G=t.Collision.b2BoundValues,Y=t.Collision.b2Collision,Z=t.Collision.b2ContactID,et=t.Collision.b2ContactPoint,tt=t.Collision.b2Distance,nt=t.Collision.b2DistanceInput,rt=t.Collision.b2DistanceOutput,it=t.Collision.b2DistanceProxy,st=t.Collision.b2DynamicTree,ot=t.Collision.b2DynamicTreeBroadPhase,ut=t.Collision.b2DynamicTreeNode,at=t.Collision.b2DynamicTreePair,ft=t.Collision.b2Manifold,lt=t.Collision.b2ManifoldPoint,ct=t.Collision.b2Point,ht=t.Collision.b2RayCastInput,pt=t.Collision.b2RayCastOutput,dt=t.Collision.b2Segment,vt=t.Collision.b2SeparationFunction,mt=t.Collision.b2Simplex,gt=t.Collision.b2SimplexCache,yt=t.Collision.b2SimplexVertex,bt=t.Collision.b2TimeOfImpact,wt=t.Collision.b2TOIInput,Et=t.Collision.b2WorldManifold,St=t.Collision.ClipVertex,xt=t.Collision.Features,Tt=t.Collision.IBroadPhase;t.inherit(l,t.Dynamics.Contacts.b2Contact),l.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,l.b2CircleContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},l.Create=function(e){return new l},l.Destroy=function(e,t){},l.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t)},l.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();Y.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,t.m_xf)},c.b2Contact=function(){this.m_nodeA=new d,this.m_nodeB=new d,this.m_manifold=new ft,this.m_oldManifold=new ft},c.prototype.GetManifold=function(){return this.m_manifold},c.prototype.GetWorldManifold=function(e){var t=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody(),r=this.m_fixtureA.GetShape(),i=this.m_fixtureB.GetShape();e.Initialize(this.m_manifold,t.GetTransform(),r.m_radius,n.GetTransform(),i.m_radius)},c.prototype.IsTouching=function(){return(this.m_flags&c.e_touchingFlag)==c.e_touchingFlag},c.prototype.IsContinuous=function(){return(this.m_flags&c.e_continuousFlag)==c.e_continuousFlag},c.prototype.SetSensor=function(e){e?this.m_flags|=c.e_sensorFlag:this.m_flags&=~c.e_sensorFlag},c.prototype.IsSensor=function(){return(this.m_flags&c.e_sensorFlag)==c.e_sensorFlag},c.prototype.SetEnabled=function(e){e?this.m_flags|=c.e_enabledFlag:this.m_flags&=~c.e_enabledFlag},c.prototype.IsEnabled=function(){return(this.m_flags&c.e_enabledFlag)==c.e_enabledFlag},c.prototype.GetNext=function(){return this.m_next},c.prototype.GetFixtureA=function(){return this.m_fixtureA},c.prototype.GetFixtureB=function(){return this.m_fixtureB},c.prototype.FlagForFiltering=function(){this.m_flags|=c.e_filterFlag},c.prototype.b2Contact=function(){},c.prototype.Reset=function(e,t){e===undefined&&(e=null),t===undefined&&(t=null),this.m_flags=c.e_enabledFlag;if(!e||!t){this.m_fixtureA=null,this.m_fixtureB=null;return}if(e.IsSensor()||t.IsSensor())this.m_flags|=c.e_sensorFlag;var n=e.GetBody(),r=t.GetBody();if(n.GetType()!=N.b2_dynamicBody||n.IsBullet()||r.GetType()!=N.b2_dynamicBody||r.IsBullet())this.m_flags|=c.e_continuousFlag;this.m_fixtureA=e,this.m_fixtureB=t,this.m_manifold.m_pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null},c.prototype.Update=function(e){var t=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=t,this.m_flags|=c.e_enabledFlag;var n=!1,r=(this.m_flags&c.e_touchingFlag)==c.e_touchingFlag,i=this.m_fixtureA.m_body,s=this.m_fixtureB.m_body,o=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&c.e_sensorFlag){if(o){var u=this.m_fixtureA.GetShape(),a=this.m_fixtureB.GetShape(),l=i.GetTransform(),h=s.GetTransform();n=f.TestOverlap(u,l,a,h)}this.m_manifold.m_pointCount=0}else{i.GetType()!=N.b2_dynamicBody||i.IsBullet()||s.GetType()!=N.b2_dynamicBody||s.IsBullet()?this.m_flags|=c.e_continuousFlag:this.m_flags&=~c.e_continuousFlag;if(o){this.Evaluate(),n=this.m_manifold.m_pointCount>0;for(var p=0;p<this.m_manifold.m_pointCount;++p){var d=this.m_manifold.m_points[p];d.m_normalImpulse=0,d.m_tangentImpulse=0;var v=d.m_id;for(var m=0;m<this.m_oldManifold.m_pointCount;++m){var g=this.m_oldManifold.m_points[m];if(g.m_id.key==v.key){d.m_normalImpulse=g.m_normalImpulse,d.m_tangentImpulse=g.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;n!=r&&(i.SetAwake(!0),s.SetAwake(!0))}n?this.m_flags|=c.e_touchingFlag:this.m_flags&=~c.e_touchingFlag,r==0&&n==1&&e.BeginContact(this),r==1&&n==0&&e.EndContact(this),(this.m_flags&c.e_sensorFlag)==0&&e.PreSolve(this,this.m_oldManifold)},c.prototype.Evaluate=function(){},c.prototype.ComputeTOI=function(e,t){return c.s_input.proxyA.Set(this.m_fixtureA.GetShape()),c.s_input.proxyB.Set(this.m_fixtureB.GetShape()),c.s_input.sweepA=e,c.s_input.sweepB=t,c.s_input.tolerance=R.b2_linearSlop,bt.TimeOfImpact(c.s_input)},t.postDefs.push(function(){t.Dynamics.Contacts.b2Contact.e_sensorFlag=1,t.Dynamics.Contacts.b2Contact.e_continuousFlag=2,t.Dynamics.Contacts.b2Contact.e_islandFlag=4,t.Dynamics.Contacts.b2Contact.e_toiFlag=8,t.Dynamics.Contacts.b2Contact.e_touchingFlag=16,t.Dynamics.Contacts.b2Contact.e_enabledFlag=32,t.Dynamics.Contacts.b2Contact.e_filterFlag=64,t.Dynamics.Contacts.b2Contact.s_input=new wt}),h.b2ContactConstraint=function(){this.localPlaneNormal=new $,this.localPoint=new $,this.normal=new $,this.normalMass=new U,this.K=new U},h.prototype.b2ContactConstraint=function(){this.points=new n(R.b2_maxManifoldPoints);for(var e=0;e<R.b2_maxManifoldPoints;e++)this.points[e]=new p},p.b2ContactConstraintPoint=function(){this.localPoint=new $,this.rA=new $,this.rB=new $},d.b2ContactEdge=function(){},v.b2ContactFactory=function(){},v.prototype.b2ContactFactory=function(e){this.m_allocator=e,this.InitializeRegisters()},v.prototype.AddType=function(e,t,n,r){n===undefined&&(n=0),r===undefined&&(r=0),this.m_registers[n][r].createFcn=e,this.m_registers[n][r].destroyFcn=t,this.m_registers[n][r].primary=!0,n!=r&&(this.m_registers[r][n].createFcn=e,this.m_registers[r][n].destroyFcn=t,this.m_registers[r][n].primary=!1)},v.prototype.InitializeRegisters=function(){this.m_registers=new n(f.e_shapeTypeCount);for(var e=0;e<f.e_shapeTypeCount;e++){this.m_registers[e]=new n(f.e_shapeTypeCount);for(var t=0;t<f.e_shapeTypeCount;t++)this.m_registers[e][t]=new m}this.AddType(l.Create,l.Destroy,f.e_circleShape,f.e_circleShape),this.AddType(E.Create,E.Destroy,f.e_polygonShape,f.e_circleShape),this.AddType(x.Create,x.Destroy,f.e_polygonShape,f.e_polygonShape),this.AddType(b.Create,b.Destroy,f.e_edgeShape,f.e_circleShape),this.AddType(S.Create,S.Destroy,f.e_polygonShape,f.e_edgeShape)},v.prototype.Create=function(e,t){var n=parseInt(e.GetType()),r=parseInt(t.GetType()),i=this.m_registers[n][r],s;if(i.pool)return s=i.pool,i.pool=s.m_next,i.poolCount--,s.Reset(e,t),s;var o=i.createFcn;return o!=null?i.primary?(s=o(this.m_allocator),s.Reset(e,t),s):(s=o(this.m_allocator),s.Reset(t,e),s):null},v.prototype.Destroy=function(e){e.m_manifold.m_pointCount>0&&(e.m_fixtureA.m_body.SetAwake(!0),e.m_fixtureB.m_body.SetAwake(!0));var t=parseInt(e.m_fixtureA.GetType()),n=parseInt(e.m_fixtureB.GetType()),r=this.m_registers[t][n];r.poolCount++,e.m_next=r.pool,r.pool=e;var i=r.destroyFcn;i(e,this.m_allocator)},m.b2ContactRegister=function(){},g.b2ContactResult=function(){this.position=new $,this.normal=new $,this.id=new Z},y.b2ContactSolver=function(){this.m_step=new j,this.m_constraints=new n},y.prototype.b2ContactSolver=function(){},y.prototype.Initialize=function(e,t,n,r){n===undefined&&(n=0);var i;this.m_step.Set(e),this.m_allocator=r;var s=0,o,u;this.m_constraintCount=n;while(this.m_constraints.length<this.m_constraintCount)this.m_constraints[this.m_constraints.length]=new h;for(s=0;s<n;++s){i=t[s];var a=i.m_fixtureA,f=i.m_fixtureB,l=a.m_shape,c=f.m_shape,p=l.m_radius,d=c.m_radius,v=a.m_body,m=f.m_body,g=i.GetManifold(),b=R.b2MixFriction(a.GetFriction(),f.GetFriction()),w=R.b2MixRestitution(a.GetRestitution(),f.GetRestitution()),E=v.m_linearVelocity.x,S=v.m_linearVelocity.y,x=m.m_linearVelocity.x,T=m.m_linearVelocity.y,N=v.m_angularVelocity,C=m.m_angularVelocity;R.b2Assert(g.m_pointCount>0),y.s_worldManifold.Initialize(g,v.m_xf,p,m.m_xf,d);var k=y.s_worldManifold.m_normal.x,L=y.s_worldManifold.m_normal.y,A=this.m_constraints[s];A.bodyA=v,A.bodyB=m,A.manifold=g,A.normal.x=k,A.normal.y=L,A.pointCount=g.m_pointCount,A.friction=b,A.restitution=w,A.localPlaneNormal.x=g.m_localPlaneNormal.x,A.localPlaneNormal.y=g.m_localPlaneNormal.y,A.localPoint.x=g.m_localPoint.x,A.localPoint.y=g.m_localPoint.y,A.radius=p+d,A.type=g.m_type;for(var O=0;O<A.pointCount;++O){var M=g.m_points[O],_=A.points[O];_.normalImpulse=M.m_normalImpulse,_.tangentImpulse=M.m_tangentImpulse,_.localPoint.SetV(M.m_localPoint);var D=_.rA.x=y.s_worldManifold.m_points[O].x-v.m_sweep.c.x,P=_.rA.y=y.s_worldManifold.m_points[O].y-v.m_sweep.c.y,H=_.rB.x=y.s_worldManifold.m_points[O].x-m.m_sweep.c.x,B=_.rB.y=y.s_worldManifold.m_points[O].y-m.m_sweep.c.y,j=D*L-P*k,F=H*L-B*k;j*=j,F*=F;var I=v.m_invMass+m.m_invMass+v.m_invI*j+m.m_invI*F;_.normalMass=1/I;var q=v.m_mass*v.m_invMass+m.m_mass*m.m_invMass;q+=v.m_mass*v.m_invI*j+m.m_mass*m.m_invI*F,_.equalizedMass=1/q;var U=L,z=-k,W=D*z-P*U,X=H*z-B*U;W*=W,X*=X;var V=v.m_invMass+m.m_invMass+v.m_invI*W+m.m_invI*X;_.tangentMass=1/V,_.velocityBias=0;var $=x+ -C*B-E- -N*P,J=T+C*H-S-N*D,K=A.normal.x*$+A.normal.y*J;K<-R.b2_velocityThreshold&&(_.velocityBias+=-A.restitution*K)}if(A.pointCount==2){var Q=A.points[0],G=A.points[1],Y=v.m_invMass,Z=v.m_invI,et=m.m_invMass,tt=m.m_invI,nt=Q.rA.x*L-Q.rA.y*k,rt=Q.rB.x*L-Q.rB.y*k,it=G.rA.x*L-G.rA.y*k,st=G.rB.x*L-G.rB.y*k,ot=Y+et+Z*nt*nt+tt*rt*rt,ut=Y+et+Z*it*it+tt*st*st,at=Y+et+Z*nt*it+tt*rt*st,ft=100;ot*ot<ft*(ot*ut-at*at)?(A.K.col1.Set(ot,at),A.K.col2.Set(at,ut),A.K.GetInverse(A.normalMass)):A.pointCount=1}}},y.prototype.InitVelocityConstraints=function(e){var t,n,r;for(var i=0;i<this.m_constraintCount;++i){var s=this.m_constraints[i],o=s.bodyA,u=s.bodyB,a=o.m_invMass,f=o.m_invI,l=u.m_invMass,c=u.m_invI,h=s.normal.x,p=s.normal.y,d=p,v=-h,m=0,g=0,y=0;if(e.warmStarting){y=s.pointCount;for(g=0;g<y;++g){var b=s.points[g];b.normalImpulse*=e.dtRatio,b.tangentImpulse*=e.dtRatio;var w=b.normalImpulse*h+b.tangentImpulse*d,E=b.normalImpulse*p+b.tangentImpulse*v;o.m_angularVelocity-=f*(b.rA.x*E-b.rA.y*w),o.m_linearVelocity.x-=a*w,o.m_linearVelocity.y-=a*E,u.m_angularVelocity+=c*(b.rB.x*E-b.rB.y*w),u.m_linearVelocity.x+=l*w,u.m_linearVelocity.y+=l*E}}else{y=s.pointCount;for(g=0;g<y;++g){var S=s.points[g];S.normalImpulse=0,S.tangentImpulse=0}}}},y.prototype.SolveVelocityConstraints=function(){var e=0,t,n=0,r=0,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E,S;for(var x=0;x<this.m_constraintCount;++x){var T=this.m_constraints[x],N=T.bodyA,C=T.bodyB,k=N.m_angularVelocity,L=C.m_angularVelocity,A=N.m_linearVelocity,O=C.m_linearVelocity,M=N.m_invMass,_=N.m_invI,D=C.m_invMass,P=C.m_invI,H=T.normal.x,B=T.normal.y,j=B,F=-H,I=T.friction,q=0;for(e=0;e<T.pointCount;e++)t=T.points[e],o=O.x-L*t.rB.y-A.x+k*t.rA.y,u=O.y+L*t.rB.x-A.y-k*t.rA.x,f=o*j+u*F,l=t.tangentMass*-f,c=I*t.normalImpulse,h=W.Clamp(t.tangentImpulse+l,-c,c),l=h-t.tangentImpulse,p=l*j,d=l*F,A.x-=M*p,A.y-=M*d,k-=_*(t.rA.x*d-t.rA.y*p),O.x+=D*p,O.y+=D*d,L+=P*(t.rB.x*d-t.rB.y*p),t.tangentImpulse=h;var R=parseInt(T.pointCount);if(T.pointCount==1)t=T.points[0],o=O.x+ -L*t.rB.y-A.x- -k*t.rA.y,u=O.y+L*t.rB.x-A.y-k*t.rA.x,a=o*H+u*B,l=-t.normalMass*(a-t.velocityBias),h=t.normalImpulse+l,h=h>0?h:0,l=h-t.normalImpulse,p=l*H,d=l*B,A.x-=M*p,A.y-=M*d,k-=_*(t.rA.x*d-t.rA.y*p),O.x+=D*p,O.y+=D*d,L+=P*(t.rB.x*d-t.rB.y*p),t.normalImpulse=h;else{var U=T.points[0],z=T.points[1],X=U.normalImpulse,V=z.normalImpulse,$=O.x-L*U.rB.y-A.x+k*U.rA.y,J=O.y+L*U.rB.x-A.y-k*U.rA.x,K=O.x-L*z.rB.y-A.x+k*z.rA.y,Q=O.y+L*z.rB.x-A.y-k*z.rA.x,G=$*H+J*B,Y=K*H+Q*B,Z=G-U.velocityBias,et=Y-z.velocityBias;E=T.K,Z-=E.col1.x*X+E.col2.x*V,et-=E.col1.y*X+E.col2.y*V;var tt=.001;for(;;){E=T.normalMass;var nt=-(E.col1.x*Z+E.col2.x*et),rt=-(E.col1.y*Z+E.col2.y*et);if(nt>=0&&rt>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+z.rA.x*w-z.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+z.rB.x*w-z.rB.y*b),U.normalImpulse=nt,z.normalImpulse=rt;break}nt=-U.normalMass*Z,rt=0,G=0,Y=T.K.col1.y*nt+et;if(nt>=0&&Y>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+z.rA.x*w-z.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+z.rB.x*w-z.rB.y*b),U.normalImpulse=nt,z.normalImpulse=rt;break}nt=0,rt=-z.normalMass*et,G=T.K.col2.x*rt+Z,Y=0;if(rt>=0&&G>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+z.rA.x*w-z.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+z.rB.x*w-z.rB.y*b),U.normalImpulse=nt,z.normalImpulse=rt;break}nt=0,rt=0,G=Z,Y=et;if(G>=0&&Y>=0){v=nt-X,m=rt-V,g=v*H,y=v*B,b=m*H,w=m*B,A.x-=M*(g+b),A.y-=M*(y+w),k-=_*(U.rA.x*y-U.rA.y*g+z.rA.x*w-z.rA.y*b),O.x+=D*(g+b),O.y+=D*(y+w),L+=P*(U.rB.x*y-U.rB.y*g+z.rB.x*w-z.rB.y*b),U.normalImpulse=nt,z.normalImpulse=rt;break}break}}N.m_angularVelocity=k,C.m_angularVelocity=L}},y.prototype.FinalizeVelocityConstraints=function(){for(var e=0;e<this.m_constraintCount;++e){var t=this.m_constraints[e],n=t.manifold;for(var r=0;r<t.pointCount;++r){var i=n.m_points[r],s=t.points[r];i.m_normalImpulse=s.normalImpulse,i.m_tangentImpulse=s.tangentImpulse}}},y.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0;for(var n=0;n<this.m_constraintCount;n++){var r=this.m_constraints[n],i=r.bodyA,s=r.bodyB,o=i.m_mass*i.m_invMass,u=i.m_mass*i.m_invI,a=s.m_mass*s.m_invMass,f=s.m_mass*s.m_invI;y.s_psm.Initialize(r);var l=y.s_psm.m_normal;for(var c=0;c<r.pointCount;c++){var h=r.points[c],p=y.s_psm.m_points[c],d=y.s_psm.m_separations[c],v=p.x-i.m_sweep.c.x,m=p.y-i.m_sweep.c.y,g=p.x-s.m_sweep.c.x,b=p.y-s.m_sweep.c.y;t=t<d?t:d;var w=W.Clamp(e*(d+R.b2_linearSlop),-R.b2_maxLinearCorrection,0),E=-h.equalizedMass*w,S=E*l.x,x=E*l.y;i.m_sweep.c.x-=o*S,i.m_sweep.c.y-=o*x,i.m_sweep.a-=u*(v*x-m*S),i.SynchronizeTransform(),s.m_sweep.c.x+=a*S,s.m_sweep.c.y+=a*x,s.m_sweep.a+=f*(g*x-b*S),s.SynchronizeTransform()}}return t>-1.5*R.b2_linearSlop},t.postDefs.push(function(){t.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new Et,t.Dynamics.Contacts.b2ContactSolver.s_psm=new T}),t.inherit(b,t.Dynamics.Contacts.b2Contact),b.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,b.b2EdgeAndCircleContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},b.Create=function(e){return new b},b.Destroy=function(e,t){},b.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t)},b.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,t.m_xf)},b.prototype.b2CollideEdgeAndCircle=function(e,t,n,r,i){},t.inherit(w,t.Dynamics.Contacts.b2Contact),w.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,w.b2NullContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},w.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},w.prototype.Evaluate=function(){},t.inherit(E,t.Dynamics.Contacts.b2Contact),E.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,E.b2PolyAndCircleContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},E.Create=function(e){return new E},E.Destroy=function(e,t){},E.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t),R.b2Assert(e.GetType()==f.e_polygonShape),R.b2Assert(t.GetType()==f.e_circleShape)},E.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,t=this.m_fixtureB.m_body;Y.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof a?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,t.m_xf)},t.inherit(S,t.Dynamics.Contacts.b2Contact),S.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,S.b2PolyAndEdgeContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},S.Create=function(e){return new S},S.Destroy=function(e,t){},S.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t),R.b2Assert(e.GetType()==f.e_polygonShape),R.b2Assert(t.GetType()==f.e_edgeShape)},S.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof a?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof o?this.m_fixtureB.GetShape():null,t.m_xf)},S.prototype.b2CollidePolyAndEdge=function(e,t,n,r,i){},t.inherit(x,t.Dynamics.Contacts.b2Contact),x.prototype.__super=t.Dynamics.Contacts.b2Contact.prototype,x.b2PolygonContact=function(){t.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},x.Create=function(e){return new x},x.Destroy=function(e,t){},x.prototype.Reset=function(e,t){this.__super.Reset.call(this,e,t)},x.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),t=this.m_fixtureB.GetBody();Y.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof a?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof a?this.m_fixtureB.GetShape():null,t.m_xf)},T.b2PositionSolverManifold=function(){},T.prototype.b2PositionSolverManifold=function(){this.m_normal=new $,this.m_separations=new r(R.b2_maxManifoldPoints),this.m_points=new n(R.b2_maxManifoldPoints);for(var e=0;e<R.b2_maxManifoldPoints;e++)this.m_points[e]=new $},T.prototype.Initialize=function(t){R.b2Assert(t.pointCount>0);var n=0,r=0,i=0,s,o,u=0,a=0;switch(t.type){case ft.e_circles:s=t.bodyA.m_xf.R,o=t.localPoint;var f=t.bodyA.m_xf.position.x+(s.col1.x*o.x+s.col2.x*o.y),l=t.bodyA.m_xf.position.y+(s.col1.y*o.x+s.col2.y*o.y);s=t.bodyB.m_xf.R,o=t.points[0].localPoint;var c=t.bodyB.m_xf.position.x+(s.col1.x*o.x+s.col2.x*o.y),h=t.bodyB.m_xf.position.y+(s.col1.y*o.x+s.col2.y*o.y),p=c-f,d=h-l,v=p*p+d*d;if(v>e*e){var m=Math.sqrt(v);this.m_normal.x=p/m,this.m_normal.y=d/m}else this.m_normal.x=1,this.m_normal.y=0;this.m_points[0].x=.5*(f+c),this.m_points[0].y=.5*(l+h),this.m_separations[0]=p*this.m_normal.x+d*this.m_normal.y-t.radius;break;case ft.e_faceA:s=t.bodyA.m_xf.R,o=t.localPlaneNormal,this.m_normal.x=s.col1.x*o.x+s.col2.x*o.y,this.m_normal.y=s.col1.y*o.x+s.col2.y*o.y,s=t.bodyA.m_xf.R,o=t.localPoint,u=t.bodyA.m_xf.position.x+(s.col1.x*o.x+s.col2.x*o.y),a=t.bodyA.m_xf.position.y+(s.col1.y*o.x+s.col2.y*o.y),s=t.bodyB.m_xf.R;for(n=0;n<t.pointCount;++n)o=t.points[n].localPoint,r=t.bodyB.m_xf.position.x+(s.col1.x*o.x+s.col2.x*o.y),i=t.bodyB.m_xf.position.y+(s.col1.y*o.x+s.col2.y*o.y),this.m_separations[n]=(r-u)*this.m_normal.x+(i-a)*this.m_normal.y-t.radius,this.m_points[n].x=r,this.m_points[n].y=i;break;case ft.e_faceB:s=t.bodyB.m_xf.R,o=t.localPlaneNormal,this.m_normal.x=s.col1.x*o.x+s.col2.x*o.y,this.m_normal.y=s.col1.y*o.x+s.col2.y*o.y,s=t.bodyB.m_xf.R,o=t.localPoint,u=t.bodyB.m_xf.position.x+(s.col1.x*o.x+s.col2.x*o.y),a=t.bodyB.m_xf.position.y+(s.col1.y*o.x+s.col2.y*o.y),s=t.bodyA.m_xf.R;for(n=0;n<t.pointCount;++n)o=t.points[n].localPoint,r=t.bodyA.m_xf.position.x+(s.col1.x*o.x+s.col2.x*o.y),i=t.bodyA.m_xf.position.y+(s.col1.y*o.x+s.col2.y*o.y),this.m_separations[n]=(r-u)*this.m_normal.x+(i-a)*this.m_normal.y-t.radius,this.m_points[n].Set(r,i);this.m_normal.x*=-1,this.m_normal.y*=-1}},t.postDefs.push(function(){t.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new $,t.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new $})}(),function(){var n=t.Dynamics.b2Body,r=t.Dynamics.b2BodyDef,i=t.Dynamics.b2ContactFilter,s=t.Dynamics.b2ContactImpulse,o=t.Dynamics.b2ContactListener,u=t.Dynamics.b2ContactManager,a=t.Dynamics.b2DebugDraw,f=t.Dynamics.b2DestructionListener,l=t.Dynamics.b2FilterData,c=t.Dynamics.b2Fixture,h=t.Dynamics.b2FixtureDef,p=t.Dynamics.b2Island,d=t.Dynamics.b2TimeStep,v=t.Dynamics.b2World,m=t.Common.Math.b2Mat22,g=t.Common.Math.b2Mat33,y=t.Common.Math.b2Math,b=t.Common.Math.b2Sweep,w=t.Common.Math.b2Transform,E=t.Common.Math.b2Vec2,S=t.Common.Math.b2Vec3,x=t.Common.b2Color,T=t.Common.b2internal,N=t.Common.b2Settings,C=t.Collision.Shapes.b2CircleShape,k=t.Collision.Shapes.b2EdgeChainDef,L=t.Collision.Shapes.b2EdgeShape,A=t.Collision.Shapes.b2MassData,O=t.Collision.Shapes.b2PolygonShape,M=t.Collision.Shapes.b2Shape,_=t.Dynamics.Controllers.b2BuoyancyController,D=t.Dynamics.Controllers.b2ConstantAccelController,P=t.Dynamics.Controllers.b2ConstantForceController,H=t.Dynamics.Controllers.b2Controller,B=t.Dynamics.Controllers.b2ControllerEdge,j=t.Dynamics.Controllers.b2GravityController,F=t.Dynamics.Controllers.b2TensorDampingController;t.inherit(_,t.Dynamics.Controllers.b2Controller),_.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,_.b2BuoyancyController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new E(0,-1),this.offset=0,this.density=0,this.velocity=new E(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},_.prototype.Step=function(t){if(!this.m_bodyList)return;this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var n=this.m_bodyList;n;n=n.nextBody){var r=n.body;if(r.IsAwake()==0)continue;var i=new E,s=new E,o=0,u=0;for(var a=r.GetFixtureList();a;a=a.GetNext()){var f=new E,l=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,r.GetTransform(),f);o+=l,i.x+=l*f.x,i.y+=l*f.y;var c=0;this.useDensity?c=1:c=1,u+=l*c,s.x+=l*f.x*c,s.y+=l*f.y*c}i.x/=o,i.y/=o,s.x/=u,s.y/=u;if(o<e)continue;var h=this.gravity.GetNegative();h.Multiply(this.density*o),r.ApplyForce(h,s);var p=r.GetLinearVelocityFromWorldPoint(i);p.Subtract(this.velocity),p.Multiply(-this.linearDrag*o),r.ApplyForce(p,i),r.ApplyTorque(-r.GetInertia()/r.GetMass()*o*r.GetAngularVelocity()*this.angularDrag)}},_.prototype.Draw=function(e){var t=1e3,n=new E,r=new E;n.x=this.normal.x*this.offset+this.normal.y*t,n.y=this.normal.y*this.offset-this.normal.x*t,r.x=this.normal.x*this.offset-this.normal.y*t,r.y=this.normal.y*this.offset+this.normal.x*t;var i=new x(0,0,1);e.DrawSegment(n,r,i)},t.inherit(D,t.Dynamics.Controllers.b2Controller),D.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,D.b2ConstantAccelController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new E(0,0)},D.prototype.Step=function(e){var t=new E(this.A.x*e.dt,this.A.y*e.dt);for(var n=this.m_bodyList;n;n=n.nextBody){var r=n.body;if(!r.IsAwake())continue;r.SetLinearVelocity(new E(r.GetLinearVelocity().x+t.x,r.GetLinearVelocity().y+t.y))}},t.inherit(P,t.Dynamics.Controllers.b2Controller),P.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,P.b2ConstantForceController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new E(0,0)},P.prototype.Step=function(e){for(var t=this.m_bodyList;t;t=t.nextBody){var n=t.body;if(!n.IsAwake())continue;n.ApplyForce(this.F,n.GetWorldCenter())}},H.b2Controller=function(){},H.prototype.Step=function(e){},H.prototype.Draw=function(e){},H.prototype.AddBody=function(e){var t=new B;t.controller=this,t.body=e,t.nextBody=this.m_bodyList,t.prevBody=null,this.m_bodyList=t,t.nextBody&&(t.nextBody.prevBody=t),this.m_bodyCount++,t.nextController=e.m_controllerList,t.prevController=null,e.m_controllerList=t,t.nextController&&(t.nextController.prevController=t),e.m_controllerCount++},H.prototype.RemoveBody=function(e){var t=e.m_controllerList;while(t&&t.controller!=this)t=t.nextController;t.prevBody&&(t.prevBody.nextBody=t.nextBody),t.nextBody&&(t.nextBody.prevBody=t.prevBody),t.nextController&&(t.nextController.prevController=t.prevController),t.prevController&&(t.prevController.nextController=t.nextController),this.m_bodyList==t&&(this.m_bodyList=t.nextBody),e.m_controllerList==t&&(e.m_controllerList=t.nextController),e.m_controllerCount--,this.m_bodyCount--},H.prototype.Clear=function(){while(this.m_bodyList)this.RemoveBody(this.m_bodyList.body)},H.prototype.GetNext=function(){return this.m_next},H.prototype.GetWorld=function(){return this.m_world},H.prototype.GetBodyList=function(){return this.m_bodyList},B.b2ControllerEdge=function(){},t.inherit(j,t.Dynamics.Controllers.b2Controller),j.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,j.b2GravityController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},j.prototype.Step=function(t){var n=null,r=null,i=null,s=0,o=null,u=null,a=null,f=0,l=0,c=0,h=null;if(this.invSqr)for(n=this.m_bodyList;n;n=n.nextBody){r=n.body,i=r.GetWorldCenter(),s=r.GetMass();for(o=this.m_bodyList;o!=n;o=o.nextBody){u=o.body,a=u.GetWorldCenter(),f=a.x-i.x,l=a.y-i.y,c=f*f+l*l;if(c<e)continue;h=new E(f,l),h.Multiply(this.G/c/Math.sqrt(c)*s*u.GetMass()),r.IsAwake()&&r.ApplyForce(h,i),h.Multiply(-1),u.IsAwake()&&u.ApplyForce(h,a)}}else for(n=this.m_bodyList;n;n=n.nextBody){r=n.body,i=r.GetWorldCenter(),s=r.GetMass();for(o=this.m_bodyList;o!=n;o=o.nextBody){u=o.body,a=u.GetWorldCenter(),f=a.x-i.x,l=a.y-i.y,c=f*f+l*l;if(c<e)continue;h=new E(f,l),h.Multiply(this.G/c*s*u.GetMass()),r.IsAwake()&&r.ApplyForce(h,i),h.Multiply(-1),u.IsAwake()&&u.ApplyForce(h,a)}}},t.inherit(F,t.Dynamics.Controllers.b2Controller),F.prototype.__super=t.Dynamics.Controllers.b2Controller.prototype,F.b2TensorDampingController=function(){t.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new m,this.maxTimestep=0},F.prototype.SetAxisAligned=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.T.col1.x=-e,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-t,e>0||t>0?this.maxTimestep=1/Math.max(e,t):this.maxTimestep=0},F.prototype.Step=function(t){var n=t.dt;if(n<=e)return;n>this.maxTimestep&&this.maxTimestep>0&&(n=this.maxTimestep);for(var r=this.m_bodyList;r;r=r.nextBody){var i=r.body;if(!i.IsAwake())continue;var s=i.GetWorldVector(y.MulMV(this.T,i.GetLocalVector(i.GetLinearVelocity())));i.SetLinearVelocity(new E(i.GetLinearVelocity().x+s.x*n,i.GetLinearVelocity().y+s.y*n))}}}(),function(){var n=t.Common.b2Color,r=t.Common.b2internal,i=t.Common.b2Settings,s=t.Common.Math.b2Mat22,o=t.Common.Math.b2Mat33,u=t.Common.Math.b2Math,a=t.Common.Math.b2Sweep,f=t.Common.Math.b2Transform,l=t.Common.Math.b2Vec2,c=t.Common.Math.b2Vec3,h=t.Dynamics.Joints.b2DistanceJoint,p=t.Dynamics.Joints.b2DistanceJointDef,d=t.Dynamics.Joints.b2FrictionJoint,v=t.Dynamics.Joints.b2FrictionJointDef,m=t.Dynamics.Joints.b2GearJoint,g=t.Dynamics.Joints.b2GearJointDef,y=t.Dynamics.Joints.b2Jacobian,b=t.Dynamics.Joints.b2Joint,w=t.Dynamics.Joints.b2JointDef,E=t.Dynamics.Joints.b2JointEdge,S=t.Dynamics.Joints.b2LineJoint,x=t.Dynamics.Joints.b2LineJointDef,T=t.Dynamics.Joints.b2MouseJoint,N=t.Dynamics.Joints.b2MouseJointDef,C=t.Dynamics.Joints.b2PrismaticJoint,k=t.Dynamics.Joints.b2PrismaticJointDef,L=t.Dynamics.Joints.b2PulleyJoint,A=t.Dynamics.Joints.b2PulleyJointDef,O=t.Dynamics.Joints.b2RevoluteJoint,M=t.Dynamics.Joints.b2RevoluteJointDef,_=t.Dynamics.Joints.b2WeldJoint,D=t.Dynamics.Joints.b2WeldJointDef,P=t.Dynamics.b2Body,H=t.Dynamics.b2BodyDef,B=t.Dynamics.b2ContactFilter,j=t.Dynamics.b2ContactImpulse,F=t.Dynamics.b2ContactListener,I=t.Dynamics.b2ContactManager,q=t.Dynamics.b2DebugDraw,R=t.Dynamics.b2DestructionListener,U=t.Dynamics.b2FilterData,z=t.Dynamics.b2Fixture,W=t.Dynamics.b2FixtureDef,X=t.Dynamics.b2Island,V=t.Dynamics.b2TimeStep,$=t.Dynamics.b2World;t.inherit(h,t.Dynamics.Joints.b2Joint),h.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,h.b2DistanceJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new l,this.m_localAnchor2=new l,this.m_u=new l},h.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},h.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},h.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_impulse*this.m_u.x,e*this.m_impulse*this.m_u.y)},h.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},h.prototype.GetLength=function(){return this.m_length},h.prototype.SetLength=function(e){e===undefined&&(e=0),this.m_length=e},h.prototype.GetFrequency=function(){return this.m_frequencyHz},h.prototype.SetFrequency=function(e){e===undefined&&(e=0),this.m_frequencyHz=e},h.prototype.GetDampingRatio=function(){return this.m_dampingRatio},h.prototype.SetDampingRatio=function(e){e===undefined&&(e=0),this.m_dampingRatio=e},h.prototype.b2DistanceJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_length=e.length,this.m_frequencyHz=e.frequencyHz,this.m_dampingRatio=e.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0},h.prototype.InitVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,s=this.m_bodyB;t=r.m_xf.R;var o=this.m_localAnchor1.x-r.m_sweep.localCenter.x,u=this.m_localAnchor1.y-r.m_sweep.localCenter.y;n=t.col1.x*o+t.col2.x*u,u=t.col1.y*o+t.col2.y*u,o=n,t=s.m_xf.R;var a=this.m_localAnchor2.x-s.m_sweep.localCenter.x,f=this.m_localAnchor2.y-s.m_sweep.localCenter.y;n=t.col1.x*a+t.col2.x*f,f=t.col1.y*a+t.col2.y*f,a=n,this.m_u.x=s.m_sweep.c.x+a-r.m_sweep.c.x-o,this.m_u.y=s.m_sweep.c.y+f-r.m_sweep.c.y-u;var l=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);l>i.b2_linearSlop?this.m_u.Multiply(1/l):this.m_u.SetZero();var c=o*this.m_u.y-u*this.m_u.x,h=a*this.m_u.y-f*this.m_u.x,p=r.m_invMass+r.m_invI*c*c+s.m_invMass+s.m_invI*h*h;this.m_mass=p!=0?1/p:0;if(this.m_frequencyHz>0){var d=l-this.m_length,v=2*Math.PI*this.m_frequencyHz,m=2*this.m_mass*this.m_dampingRatio*v,g=this.m_mass*v*v;this.m_gamma=e.dt*(m+e.dt*g),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_bias=d*e.dt*g*this.m_gamma,this.m_mass=p+this.m_gamma,this.m_mass=this.m_mass!=0?1/this.m_mass:0}if(e.warmStarting){this.m_impulse*=e.dtRatio;var y=this.m_impulse*this.m_u.x,b=this.m_impulse*this.m_u.y;r.m_linearVelocity.x-=r.m_invMass*y,r.m_linearVelocity.y-=r.m_invMass*b,r.m_angularVelocity-=r.m_invI*(o*b-u*y),s.m_linearVelocity.x+=s.m_invMass*y,s.m_linearVelocity.y+=s.m_invMass*b,s.m_angularVelocity+=s.m_invI*(a*b-f*y)}else this.m_impulse=0},h.prototype.SolveVelocityConstraints=function(e){var t,n=this.m_bodyA,r=this.m_bodyB;t=n.m_xf.R;var i=this.m_localAnchor1.x-n.m_sweep.localCenter.x,s=this.m_localAnchor1.y-n.m_sweep.localCenter.y,o=t.col1.x*i+t.col2.x*s;s=t.col1.y*i+t.col2.y*s,i=o,t=r.m_xf.R;var u=this.m_localAnchor2.x-r.m_sweep.localCenter.x,a=this.m_localAnchor2.y-r.m_sweep.localCenter.y;o=t.col1.x*u+t.col2.x*a,a=t.col1.y*u+t.col2.y*a,u=o;var f=n.m_linearVelocity.x+ -n.m_angularVelocity*s,l=n.m_linearVelocity.y+n.m_angularVelocity*i,c=r.m_linearVelocity.x+ -r.m_angularVelocity*a,h=r.m_linearVelocity.y+r.m_angularVelocity*u,p=this.m_u.x*(c-f)+this.m_u.y*(h-l),d=-this.m_mass*(p+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=d;var v=d*this.m_u.x,m=d*this.m_u.y;n.m_linearVelocity.x-=n.m_invMass*v,n.m_linearVelocity.y-=n.m_invMass*m,n.m_angularVelocity-=n.m_invI*(i*m-s*v),r.m_linearVelocity.x+=r.m_invMass*v,r.m_linearVelocity.y+=r.m_invMass*m,r.m_angularVelocity+=r.m_invI*(u*m-a*v)},h.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t;if(this.m_frequencyHz>0)return!0;var n=this.m_bodyA,r=this.m_bodyB;t=n.m_xf.R;var s=this.m_localAnchor1.x-n.m_sweep.localCenter.x,o=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=t.col1.x*s+t.col2.x*o;o=t.col1.y*s+t.col2.y*o,s=a,t=r.m_xf.R;var f=this.m_localAnchor2.x-r.m_sweep.localCenter.x,l=this.m_localAnchor2.y-r.m_sweep.localCenter.y;a=t.col1.x*f+t.col2.x*l,l=t.col1.y*f+t.col2.y*l,f=a;var c=r.m_sweep.c.x+f-n.m_sweep.c.x-s,h=r.m_sweep.c.y+l-n.m_sweep.c.y-o,p=Math.sqrt(c*c+h*h);c/=p,h/=p;var d=p-this.m_length;d=u.Clamp(d,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection);var v=-this.m_mass*d;this.m_u.Set(c,h);var m=v*this.m_u.x,g=v*this.m_u.y;return n.m_sweep.c.x-=n.m_invMass*m,n.m_sweep.c.y-=n.m_invMass*g,n.m_sweep.a-=n.m_invI*(s*g-o*m),r.m_sweep.c.x+=r.m_invMass*m,r.m_sweep.c.y+=r.m_invMass*g,r.m_sweep.a+=r.m_invI*(f*g-l*m),n.SynchronizeTransform(),r.SynchronizeTransform(),u.Abs(d)<i.b2_linearSlop},t.inherit(p,t.Dynamics.Joints.b2JointDef),p.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,p.b2DistanceJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new l,this.localAnchorB=new l},p.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_distanceJoint,this.length=1,this.frequencyHz=0,this.dampingRatio=0},p.prototype.Initialize=function(e,t,n,r){this.bodyA=e,this.bodyB=t,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(r));var i=r.x-n.x,s=r.y-n.y;this.length=Math.sqrt(i*i+s*s),this.frequencyHz=0,this.dampingRatio=0},t.inherit(d,t.Dynamics.Joints.b2Joint),d.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,d.b2FrictionJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_linearMass=new s,this.m_linearImpulse=new l},d.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},d.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},d.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_linearImpulse.x,e*this.m_linearImpulse.y)},d.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_angularImpulse},d.prototype.SetMaxForce=function(e){e===undefined&&(e=0),this.m_maxForce=e},d.prototype.GetMaxForce=function(){return this.m_maxForce},d.prototype.SetMaxTorque=function(e){e===undefined&&(e=0),this.m_maxTorque=e},d.prototype.GetMaxTorque=function(){return this.m_maxTorque},d.prototype.b2FrictionJoint=function(e){this.__super.b2Joint.call(this,e),this.m_localAnchorA.SetV(e.localAnchorA),this.m_localAnchorB.SetV(e.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=e.maxForce,this.m_maxTorque=e.maxTorque},d.prototype.InitVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB;t=r.m_xf.R;var o=this.m_localAnchorA.x-r.m_sweep.localCenter.x,u=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*o+t.col2.x*u,u=t.col1.y*o+t.col2.y*u,o=n,t=i.m_xf.R;var a=this.m_localAnchorB.x-i.m_sweep.localCenter.x,f=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*a+t.col2.x*f,f=t.col1.y*a+t.col2.y*f,a=n;var l=r.m_invMass,c=i.m_invMass,h=r.m_invI,p=i.m_invI,d=new s;d.col1.x=l+c,d.col2.x=0,d.col1.y=0,d.col2.y=l+c,d.col1.x+=h*u*u,d.col2.x+=-h*o*u,d.col1.y+=-h*o*u,d.col2.y+=h*o*o,d.col1.x+=p*f*f,d.col2.x+=-p*a*f,d.col1.y+=-p*a*f,d.col2.y+=p*a*a,d.GetInverse(this.m_linearMass),this.m_angularMass=h+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass);if(e.warmStarting){this.m_linearImpulse.x*=e.dtRatio,this.m_linearImpulse.y*=e.dtRatio,this.m_angularImpulse*=e.dtRatio;var v=this.m_linearImpulse;r.m_linearVelocity.x-=l*v.x,r.m_linearVelocity.y-=l*v.y,r.m_angularVelocity-=h*(o*v.y-u*v.x+this.m_angularImpulse),i.m_linearVelocity.x+=c*v.x,i.m_linearVelocity.y+=c*v.y,i.m_angularVelocity+=p*(a*v.y-f*v.x+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0},d.prototype.SolveVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB,s=r.m_linearVelocity,o=r.m_angularVelocity,a=i.m_linearVelocity,f=i.m_angularVelocity,c=r.m_invMass,h=i.m_invMass,p=r.m_invI,d=i.m_invI;t=r.m_xf.R;var v=this.m_localAnchorA.x-r.m_sweep.localCenter.x,m=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*v+t.col2.x*m,m=t.col1.y*v+t.col2.y*m,v=n,t=i.m_xf.R;var g=this.m_localAnchorB.x-i.m_sweep.localCenter.x,y=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*g+t.col2.x*y,y=t.col1.y*g+t.col2.y*y,g=n;var b=0,w=f-o,E=-this.m_angularMass*w,S=this.m_angularImpulse;b=e.dt*this.m_maxTorque,this.m_angularImpulse=u.Clamp(this.m_angularImpulse+E,-b,b),E=this.m_angularImpulse-S,o-=p*E,f+=d*E;var x=a.x-f*y-s.x+o*m,T=a.y+f*g-s.y-o*v,N=u.MulMV(this.m_linearMass,new l(-x,-T)),C=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(N),b=e.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>b*b&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(b)),N=u.SubtractVV(this.m_linearImpulse,C),s.x-=c*N.x,s.y-=c*N.y,o-=p*(v*N.y-m*N.x),a.x+=h*N.x,a.y+=h*N.y,f+=d*(g*N.y-y*N.x),r.m_angularVelocity=o,i.m_angularVelocity=f},d.prototype.SolvePositionConstraints=function(e){return e===undefined&&(e=0),!0},t.inherit(v,t.Dynamics.Joints.b2JointDef),v.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,v.b2FrictionJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new l,this.localAnchorB=new l},v.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_frictionJoint,this.maxForce=0,this.maxTorque=0},v.prototype.Initialize=function(e,t,n){this.bodyA=e,this.bodyB=t,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n))},t.inherit(m,t.Dynamics.Joints.b2Joint),m.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,m.b2GearJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new l,this.m_groundAnchor2=new l,this.m_localAnchor1=new l,this.m_localAnchor2=new l,this.m_J=new y},m.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},m.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},m.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_impulse*this.m_J.linearB.x,e*this.m_impulse*this.m_J.linearB.y)},m.prototype.GetReactionTorque=function(e){e===undefined&&(e=0);var t=this.m_bodyB.m_xf.R,n=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,r=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,i=t.col1.x*n+t.col2.x*r;r=t.col1.y*n+t.col2.y*r,n=i;var s=this.m_impulse*this.m_J.linearB.x,o=this.m_impulse*this.m_J.linearB.y;return e*(this.m_impulse*this.m_J.angularB-n*o+r*s)},m.prototype.GetRatio=function(){return this.m_ratio},m.prototype.SetRatio=function(e){e===undefined&&(e=0),this.m_ratio=e},m.prototype.b2GearJoint=function(e){this.__super.b2Joint.call(this,e);var t=parseInt(e.joint1.m_type),n=parseInt(e.joint2.m_type);this.m_revolute1=null,this.m_prismatic1=null,this.m_revolute2=null,this.m_prismatic2=null;var r=0,i=0;this.m_ground1=e.joint1.GetBodyA(),this.m_bodyA=e.joint1.GetBodyB(),t==b.e_revoluteJoint?(this.m_revolute1=e.joint1 instanceof O?e.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),r=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=e.joint1 instanceof C?e.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),r=this.m_prismatic1.GetJointTranslation()),this.m_ground2=e.joint2.GetBodyA(),this.m_bodyB=e.joint2.GetBodyB(),n==b.e_revoluteJoint?(this.m_revolute2=e.joint2 instanceof O?e.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),i=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=e.joint2 instanceof C?e.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),i=this.m_prismatic2.GetJointTranslation()),this.m_ratio=e.ratio,this.m_constant=r+this.m_ratio*i,this.m_impulse=0},m.prototype.InitVelocityConstraints=function(e){var t=this.m_ground1,n=this.m_ground2,r=this.m_bodyA,i=this.m_bodyB,s=0,o=0,u=0,a=0,f,l,c=0,h=0,p=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,p+=r.m_invI):(f=t.m_xf.R,l=this.m_prismatic1.m_localXAxis1,s=f.col1.x*l.x+f.col2.x*l.y,o=f.col1.y*l.x+f.col2.y*l.y,f=r.m_xf.R,u=this.m_localAnchor1.x-r.m_sweep.localCenter.x,a=this.m_localAnchor1.y-r.m_sweep.localCenter.y,h=f.col1.x*u+f.col2.x*a,a=f.col1.y*u+f.col2.y*a,u=h,c=u*o-a*s,this.m_J.linearA.Set(-s,-o),this.m_J.angularA=-c,p+=r.m_invMass+r.m_invI*c*c),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,p+=this.m_ratio*this.m_ratio*i.m_invI):(f=n.m_xf.R,l=this.m_prismatic2.m_localXAxis1,s=f.col1.x*l.x+f.col2.x*l.y,o=f.col1.y*l.x+f.col2.y*l.y,f=i.m_xf.R,u=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y,h=f.col1.x*u+f.col2.x*a,a=f.col1.y*u+f.col2.y*a,u=h,c=u*o-a*s,this.m_J.linearB.Set(-this.m_ratio*s,-this.m_ratio*o),this.m_J.angularB=-this.m_ratio*c,p+=this.m_ratio*this.m_ratio*(i.m_invMass+i.m_invI*c*c)),this.m_mass=p>0?1/p:0,e.warmStarting?(r.m_linearVelocity.x+=r.m_invMass*this.m_impulse*this.m_J.linearA.x,r.m_linearVelocity.y+=r.m_invMass*this.m_impulse*this.m_J.linearA.y,r.m_angularVelocity+=r.m_invI*this.m_impulse*this.m_J.angularA,i.m_linearVelocity.x+=i.m_invMass*this.m_impulse*this.m_J.linearB.x,i.m_linearVelocity.y+=i.m_invMass*this.m_impulse*this.m_J.linearB.y,i.m_angularVelocity+=i.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},m.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r=this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,n.m_linearVelocity,n.m_angularVelocity),i=-this.m_mass*r;this.m_impulse+=i,t.m_linearVelocity.x+=t.m_invMass*i*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*i*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*i*this.m_J.angularA,n.m_linearVelocity.x+=n.m_invMass*i*this.m_J.linearB.x,n.m_linearVelocity.y+=n.m_invMass*i*this.m_J.linearB.y,n.m_angularVelocity+=n.m_invI*i*this.m_J.angularB},m.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=this.m_bodyA,r=this.m_bodyB,s=0,o=0;this.m_revolute1?s=this.m_revolute1.GetJointAngle():s=this.m_prismatic1.GetJointTranslation(),this.m_revolute2?o=this.m_revolute2.GetJointAngle():o=this.m_prismatic2.GetJointTranslation();var u=this.m_constant-(s+this.m_ratio*o),a=-this.m_mass*u;return n.m_sweep.c.x+=n.m_invMass*a*this.m_J.linearA.x,n.m_sweep.c.y+=n.m_invMass*a*this.m_J.linearA.y,n.m_sweep.a+=n.m_invI*a*this.m_J.angularA,r.m_sweep.c.x+=r.m_invMass*a*this.m_J.linearB.x,r.m_sweep.c.y+=r.m_invMass*a*this.m_J.linearB.y,r.m_sweep.a+=r.m_invI*a*this.m_J.angularB,n.SynchronizeTransform(),r.SynchronizeTransform(),t<i.b2_linearSlop},t.inherit(g,t.Dynamics.Joints.b2JointDef),g.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,g.b2GearJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},g.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_gearJoint,this.joint1=null,this.joint2=null,this.ratio=1},y.b2Jacobian=function(){this.linearA=new l,this.linearB=new l},y.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},y.prototype.Set=function(e,t,n,r){t===undefined&&(t=0),r===undefined&&(r=0),this.linearA.SetV(e),this.angularA=t,this.linearB.SetV(n),this.angularB=r},y.prototype.Compute=function(e,t,n,r){return t===undefined&&(t=0),r===undefined&&(r=0),this.linearA.x*e.x+this.linearA.y*e.y+this.angularA*t+(this.linearB.x*n.x+this.linearB.y*n.y)+this.angularB*r},b.b2Joint=function(){this.m_edgeA=new E,this.m_edgeB=new E,this.m_localCenterA=new l,this.m_localCenterB=new l},b.prototype.GetType=function(){return this.m_type},b.prototype.GetAnchorA=function(){return null},b.prototype.GetAnchorB=function(){return null},b.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),null},b.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},b.prototype.GetBodyA=function(){return this.m_bodyA},b.prototype.GetBodyB=function(){return this.m_bodyB},b.prototype.GetNext=function(){return this.m_next},b.prototype.GetUserData=function(){return this.m_userData},b.prototype.SetUserData=function(e){this.m_userData=e},b.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},b.Create=function(e,t){var n=null;switch(e.type){case b.e_distanceJoint:n=new h(e instanceof p?e:null);break;case b.e_mouseJoint:n=new T(e instanceof N?e:null);break;case b.e_prismaticJoint:n=new C(e instanceof k?e:null);break;case b.e_revoluteJoint:n=new O(e instanceof M?e:null);break;case b.e_pulleyJoint:n=new L(e instanceof A?e:null);break;case b.e_gearJoint:n=new m(e instanceof g?e:null);break;case b.e_lineJoint:n=new S(e instanceof x?e:null);break;case b.e_weldJoint:n=new _(e instanceof D?e:null);break;case b.e_frictionJoint:n=new d(e instanceof v?e:null);break;default:}return n},b.Destroy=function(e,t){},b.prototype.b2Joint=function(e){i.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_prev=null,this.m_next=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},b.prototype.InitVelocityConstraints=function(e){},b.prototype.SolveVelocityConstraints=function(e){},b.prototype.FinalizeVelocityConstraints=function(){},b.prototype.SolvePositionConstraints=function(e){return e===undefined&&(e=0),!1},t.postDefs.push(function(){t.Dynamics.Joints.b2Joint.e_unknownJoint=0,t.Dynamics.Joints.b2Joint.e_revoluteJoint=1,t.Dynamics.Joints.b2Joint.e_prismaticJoint=2,t.Dynamics.Joints.b2Joint.e_distanceJoint=3,t.Dynamics.Joints.b2Joint.e_pulleyJoint=4,t.Dynamics.Joints.b2Joint.e_mouseJoint=5,t.Dynamics.Joints.b2Joint.e_gearJoint=6,t.Dynamics.Joints.b2Joint.e_lineJoint=7,t.Dynamics.Joints.b2Joint.e_weldJoint=8,t.Dynamics.Joints.b2Joint.e_frictionJoint=9,t.Dynamics.Joints.b2Joint.e_inactiveLimit=0,t.Dynamics.Joints.b2Joint.e_atLowerLimit=1,t.Dynamics.Joints.b2Joint.e_atUpperLimit=2,t.Dynamics.Joints.b2Joint.e_equalLimits=3}),w.b2JointDef=function(){},w.prototype.b2JointDef=function(){this.type=b.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1},E.b2JointEdge=function(){},t.inherit(S,t.Dynamics.Joints.b2Joint),S.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,S.b2LineJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new l,this.m_localAnchor2=new l,this.m_localXAxis1=new l,this.m_localYAxis1=new l,this.m_axis=new l,this.m_perp=new l,this.m_K=new s,this.m_impulse=new l},S.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},S.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},S.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},S.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.y},S.prototype.GetJointTranslation=function(){var e=this.m_bodyA,t=this.m_bodyB,n,r=e.GetWorldPoint(this.m_localAnchor1),i=t.GetWorldPoint(this.m_localAnchor2),s=i.x-r.x,o=i.y-r.y,u=e.GetWorldVector(this.m_localXAxis1),a=u.x*s+u.y*o;return a},S.prototype.GetJointSpeed=function(){var e=this.m_bodyA,t=this.m_bodyB,n;n=e.m_xf.R;var r=this.m_localAnchor1.x-e.m_sweep.localCenter.x,i=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=n.col1.x*r+n.col2.x*i;i=n.col1.y*r+n.col2.y*i,r=s,n=t.m_xf.R;var o=this.m_localAnchor2.x-t.m_sweep.localCenter.x,u=this.m_localAnchor2.y-t.m_sweep.localCenter.y;s=n.col1.x*o+n.col2.x*u,u=n.col1.y*o+n.col2.y*u,o=s;var a=e.m_sweep.c.x+r,f=e.m_sweep.c.y+i,l=t.m_sweep.c.x+o,c=t.m_sweep.c.y+u,h=l-a,p=c-f,d=e.GetWorldVector(this.m_localXAxis1),v=e.m_linearVelocity,m=t.m_linearVelocity,g=e.m_angularVelocity,y=t.m_angularVelocity,b=h*-g*d.y+p*g*d.x+(d.x*(m.x+ -y*u-v.x- -g*i)+d.y*(m.y+y*o-v.y-g*r));return b},S.prototype.IsLimitEnabled=function(){return this.m_enableLimit},S.prototype.EnableLimit=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e},S.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},S.prototype.GetUpperLimit=function(){return this.m_upperTranslation},S.prototype.SetLimits=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=t},S.prototype.IsMotorEnabled=function(){return this.m_enableMotor},S.prototype.EnableMotor=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e},S.prototype.SetMotorSpeed=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e},S.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},S.prototype.SetMaxMotorForce=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=e},S.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},S.prototype.GetMotorForce=function(){return this.m_motorImpulse},S.prototype.b2LineJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_localXAxis1.SetV(e.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=e.lowerTranslation,this.m_upperTranslation=e.upperTranslation,this.m_maxMotorForce=e.maxMotorForce,this.m_motorSpeed=e.motorSpeed,this.m_enableLimit=e.enableLimit,this.m_enableMotor=e.enableMotor,this.m_limitState=b.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},S.prototype.InitVelocityConstraints=function(t){var n=this.m_bodyA,r=this.m_bodyB,s,o=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(r.GetLocalCenter());var a=n.GetTransform(),f=r.GetTransform();s=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;o=s.col1.x*l+s.col2.x*c,c=s.col1.y*l+s.col2.y*c,l=o,s=r.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,p=this.m_localAnchor2.y-this.m_localCenterB.y;o=s.col1.x*h+s.col2.x*p,p=s.col1.y*h+s.col2.y*p,h=o;var d=r.m_sweep.c.x+h-n.m_sweep.c.x-l,v=r.m_sweep.c.y+p-n.m_sweep.c.y-c;this.m_invMassA=n.m_invMass,this.m_invMassB=r.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=r.m_invI,this.m_axis.SetV(u.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(d+l)*this.m_axis.y-(v+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-p*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>e?1/this.m_motorMass:0,this.m_perp.SetV(u.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(d+l)*this.m_perp.y-(v+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-p*this.m_perp.x;var m=this.m_invMassA,g=this.m_invMassB,y=this.m_invIA,w=this.m_invIB;this.m_K.col1.x=m+g+y*this.m_s1*this.m_s1+w*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1*this.m_a1+w*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=m+g+y*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2;if(this.m_enableLimit){var E=this.m_axis.x*d+this.m_axis.y*v;u.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?this.m_limitState=b.e_equalLimits:E<=this.m_lowerTranslation?this.m_limitState!=b.e_atLowerLimit&&(this.m_limitState=b.e_atLowerLimit,this.m_impulse.y=0):E>=this.m_upperTranslation?this.m_limitState!=b.e_atUpperLimit&&(this.m_limitState=b.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=b.e_inactiveLimit,this.m_impulse.y=0)}else this.m_limitState=b.e_inactiveLimit;this.m_enableMotor==0&&(this.m_motorImpulse=0);if(t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var S=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,x=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,T=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,N=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*S,n.m_linearVelocity.y-=this.m_invMassA*x,n.m_angularVelocity-=this.m_invIA*T,r.m_linearVelocity.x+=this.m_invMassB*S,r.m_linearVelocity.y+=this.m_invMassB*x,r.m_angularVelocity+=this.m_invIB*N}else this.m_impulse.SetZero(),this.m_motorImpulse=0},S.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r=t.m_linearVelocity,i=t.m_angularVelocity,s=n.m_linearVelocity,o=n.m_angularVelocity,a=0,f=0,c=0,h=0;if(this.m_enableMotor&&this.m_limitState!=b.e_equalLimits){var p=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*o-this.m_a1*i,d=this.m_motorMass*(this.m_motorSpeed-p),v=this.m_motorImpulse,m=e.dt*this.m_maxMotorForce;this.m_motorImpulse=u.Clamp(this.m_motorImpulse+d,-m,m),d=this.m_motorImpulse-v,a=d*this.m_axis.x,f=d*this.m_axis.y,c=d*this.m_a1,h=d*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*f,i-=this.m_invIA*c,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*f,o+=this.m_invIB*h}var g=this.m_perp.x*(s.x-r.x)+this.m_perp.y*(s.y-r.y)+this.m_s2*o-this.m_s1*i;if(this.m_enableLimit&&this.m_limitState!=b.e_inactiveLimit){var y=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*o-this.m_a1*i,w=this.m_impulse.Copy(),E=this.m_K.Solve(new l,-g,-y);this.m_impulse.Add(E),this.m_limitState==b.e_atLowerLimit?this.m_impulse.y=u.Max(this.m_impulse.y,0):this.m_limitState==b.e_atUpperLimit&&(this.m_impulse.y=u.Min(this.m_impulse.y,0));var S=-g-(this.m_impulse.y-w.y)*this.m_K.col2.x,x=0;this.m_K.col1.x!=0?x=S/this.m_K.col1.x+w.x:x=w.x,this.m_impulse.x=x,E.x=this.m_impulse.x-w.x,E.y=this.m_impulse.y-w.y,a=E.x*this.m_perp.x+E.y*this.m_axis.x,f=E.x*this.m_perp.y+E.y*this.m_axis.y,c=E.x*this.m_s1+E.y*this.m_a1,h=E.x*this.m_s2+E.y*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*f,i-=this.m_invIA*c,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*f,o+=this.m_invIB*h}else{var T=0;this.m_K.col1.x!=0?T=-g/this.m_K.col1.x:T=0,this.m_impulse.x+=T,a=T*this.m_perp.x,f=T*this.m_perp.y,c=T*this.m_s1,h=T*this.m_s2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*f,i-=this.m_invIA*c,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*f,o+=this.m_invIB*h}t.m_linearVelocity.SetV(r),t.m_angularVelocity=i,n.m_linearVelocity.SetV(s),n.m_angularVelocity=o},S.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=0,r=this.m_bodyA,o=this.m_bodyB,a=r.m_sweep.c,f=r.m_sweep.a,c=o.m_sweep.c,h=o.m_sweep.a,p,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=!1,S=0,x=s.FromAngle(f),T=s.FromAngle(h);p=x;var N=this.m_localAnchor1.x-this.m_localCenterA.x,C=this.m_localAnchor1.y-this.m_localCenterA.y;d=p.col1.x*N+p.col2.x*C,C=p.col1.y*N+p.col2.y*C,N=d,p=T;var k=this.m_localAnchor2.x-this.m_localCenterB.x,L=this.m_localAnchor2.y-this.m_localCenterB.y;d=p.col1.x*k+p.col2.x*L,L=p.col1.y*k+p.col2.y*L,k=d;var A=c.x+k-a.x-N,O=c.y+L-a.y-C;if(this.m_enableLimit){this.m_axis=u.MulMV(x,this.m_localXAxis1),this.m_a1=(A+N)*this.m_axis.y-(O+C)*this.m_axis.x,this.m_a2=k*this.m_axis.y-L*this.m_axis.x;var M=this.m_axis.x*A+this.m_axis.y*O;u.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?(S=u.Clamp(M,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection),b=u.Abs(M),E=!0):M<=this.m_lowerTranslation?(S=u.Clamp(M-this.m_lowerTranslation+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),b=this.m_lowerTranslation-M,E=!0):M>=this.m_upperTranslation&&(S=u.Clamp(M-this.m_upperTranslation+i.b2_linearSlop,0,i.b2_maxLinearCorrection),b=M-this.m_upperTranslation,E=!0)}this.m_perp=u.MulMV(x,this.m_localYAxis1),this.m_s1=(A+N)*this.m_perp.y-(O+C)*this.m_perp.x,this.m_s2=k*this.m_perp.y-L*this.m_perp.x;var _=new l,D=this.m_perp.x*A+this.m_perp.y*O;b=u.Max(b,u.Abs(D)),w=0;if(E)v=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB,this.m_K.col1.x=v+m+g*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,this.m_K.col1.y=g*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=v+m+g*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_K.Solve(_,-D,-S);else{v=this.m_invMassA,m=this.m_invMassB,g=this.m_invIA,y=this.m_invIB;var P=v+m+g*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,H=0;P!=0?H=-D/P:H=0,_.x=H,_.y=0}var B=_.x*this.m_perp.x+_.y*this.m_axis.x,j=_.x*this.m_perp.y+_.y*this.m_axis.y,F=_.x*this.m_s1+_.y*this.m_a1,I=_.x*this.m_s2+_.y*this.m_a2;return a.x-=this.m_invMassA*B,a.y-=this.m_invMassA*j,f-=this.m_invIA*F,c.x+=this.m_invMassB*B,c.y+=this.m_invMassB*j,h+=this.m_invIB*I,r.m_sweep.a=f,o.m_sweep.a=h,r.SynchronizeTransform(),o.SynchronizeTransform(),b<=i.b2_linearSlop&&w<=i.b2_angularSlop},t.inherit(x,t.Dynamics.Joints.b2JointDef),x.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,x.b2LineJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new l,this.localAnchorB=new l,this.localAxisA=new l},x.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},x.prototype.Initialize=function(e,t,n,r){this.bodyA=e,this.bodyB=t,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(r)},t.inherit(T,t.Dynamics.Joints.b2Joint),T.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,T.b2MouseJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new s,this.K1=new s,this.K2=new s,this.m_localAnchor=new l,this.m_target=new l,this.m_impulse=new l,this.m_mass=new s,this.m_C=new l},T.prototype.GetAnchorA=function(){return this.m_target},T.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},T.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_impulse.x,e*this.m_impulse.y)},T.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},T.prototype.GetTarget=function(){return this.m_target},T.prototype.SetTarget=function(e){this.m_bodyB.IsAwake()==0&&this.m_bodyB.SetAwake(!0),this.m_target=e},T.prototype.GetMaxForce=function(){return this.m_maxForce},T.prototype.SetMaxForce=function(e){e===undefined&&(e=0),this.m_maxForce=e},T.prototype.GetFrequency=function(){return this.m_frequencyHz},T.prototype.SetFrequency=function(e){e===undefined&&(e=0),this.m_frequencyHz=e},T.prototype.GetDampingRatio=function(){return this.m_dampingRatio},T.prototype.SetDampingRatio=function(e){e===undefined&&(e=0),this.m_dampingRatio=e},T.prototype.b2MouseJoint=function(e){this.__super.b2Joint.call(this,e),this.m_target.SetV(e.target);var t=this.m_target.x-this.m_bodyB.m_xf.position.x,n=this.m_target.y-this.m_bodyB.m_xf.position.y,r=this.m_bodyB.m_xf.R;this.m_localAnchor.x=t*r.col1.x+n*r.col1.y,this.m_localAnchor.y=t*r.col2.x+n*r.col2.y,this.m_maxForce=e.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=e.frequencyHz,this.m_dampingRatio=e.dampingRatio,this.m_beta=0,this.m_gamma=0},T.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyB,n=t.GetMass(),r=2*Math.PI*this.m_frequencyHz,i=2*n*this.m_dampingRatio*r,s=n*r*r;this.m_gamma=e.dt*(i+e.dt*s),this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0,this.m_beta=e.dt*s*this.m_gamma;var o;o=t.m_xf.R;var u=this.m_localAnchor.x-t.m_sweep.localCenter.x,a=this.m_localAnchor.y-t.m_sweep.localCenter.y,f=o.col1.x*u+o.col2.x*a;a=o.col1.y*u+o.col2.y*a,u=f;var l=t.m_invMass,c=t.m_invI;this.K1.col1.x=l,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=l,this.K2.col1.x=c*a*a,this.K2.col2.x=-c*u*a,this.K2.col1.y=-c*u*a,this.K2.col2.y=c*u*u,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=t.m_sweep.c.x+u-this.m_target.x,this.m_C.y=t.m_sweep.c.y+a-this.m_target.y,t.m_angularVelocity*=.98,this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,t.m_linearVelocity.x+=l*this.m_impulse.x,t.m_linearVelocity.y+=l*this.m_impulse.y,t.m_angularVelocity+=c*(u*this.m_impulse.y-a*this.m_impulse.x)},T.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyB,n,r=0,i=0;n=t.m_xf.R;var s=this.m_localAnchor.x-t.m_sweep.localCenter.x,o=this.m_localAnchor.y-t.m_sweep.localCenter.y;r=n.col1.x*s+n.col2.x*o,o=n.col1.y*s+n.col2.y*o,s=r;var u=t.m_linearVelocity.x+ -t.m_angularVelocity*o,a=t.m_linearVelocity.y+t.m_angularVelocity*s;n=this.m_mass,r=u+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,i=a+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var f=-(n.col1.x*r+n.col2.x*i),l=-(n.col1.y*r+n.col2.y*i),c=this.m_impulse.x,h=this.m_impulse.y;this.m_impulse.x+=f,this.m_impulse.y+=l;var p=e.dt*this.m_maxForce;this.m_impulse.LengthSquared()>p*p&&this.m_impulse.Multiply(p/this.m_impulse.Length()),f=this.m_impulse.x-c,l=this.m_impulse.y-h,t.m_linearVelocity.x+=t.m_invMass*f,t.m_linearVelocity.y+=t.m_invMass*l,t.m_angularVelocity+=t.m_invI*(s*l-o*f)},T.prototype.SolvePositionConstraints=function(e){return e===undefined&&(e=0),!0},t.inherit(N,t.Dynamics.Joints.b2JointDef),N.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,N.b2MouseJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new l},N.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},t.inherit(C,t.Dynamics.Joints.b2Joint),C.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,C.b2PrismaticJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new l,this.m_localAnchor2=new l,this.m_localXAxis1=new l,this.m_localYAxis1=new l,this.m_axis=new l,this.m_perp=new l,this.m_K=new o,this.m_impulse=new c},C.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},C.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},C.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),e*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},C.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.y},C.prototype.GetJointTranslation=function(){var e=this.m_bodyA,t=this.m_bodyB,n,r=e.GetWorldPoint(this.m_localAnchor1),i=t.GetWorldPoint(this.m_localAnchor2),s=i.x-r.x,o=i.y-r.y,u=e.GetWorldVector(this.m_localXAxis1),a=u.x*s+u.y*o;return a},C.prototype.GetJointSpeed=function(){var e=this.m_bodyA,t=this.m_bodyB,n;n=e.m_xf.R;var r=this.m_localAnchor1.x-e.m_sweep.localCenter.x,i=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=n.col1.x*r+n.col2.x*i;i=n.col1.y*r+n.col2.y*i,r=s,n=t.m_xf.R;var o=this.m_localAnchor2.x-t.m_sweep.localCenter.x,u=this.m_localAnchor2.y-t.m_sweep.localCenter.y;s=n.col1.x*o+n.col2.x*u,u=n.col1.y*o+n.col2.y*u,o=s;var a=e.m_sweep.c.x+r,f=e.m_sweep.c.y+i,l=t.m_sweep.c.x+o,c=t.m_sweep.c.y+u,h=l-a,p=c-f,d=e.GetWorldVector(this.m_localXAxis1),v=e.m_linearVelocity,m=t.m_linearVelocity,g=e.m_angularVelocity,y=t.m_angularVelocity,b=h*-g*d.y+p*g*d.x+(d.x*(m.x+ -y*u-v.x- -g*i)+d.y*(m.y+y*o-v.y-g*r));return b},C.prototype.IsLimitEnabled=function(){return this.m_enableLimit},C.prototype.EnableLimit=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=e},C.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},C.prototype.GetUpperLimit=function(){return this.m_upperTranslation},C.prototype.SetLimits=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=e,this.m_upperTranslation=t},C.prototype.IsMotorEnabled=function(){return this.m_enableMotor},C.prototype.EnableMotor=function(e){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=e},C.prototype.SetMotorSpeed=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e},C.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},C.prototype.SetMaxMotorForce=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=e},C.prototype.GetMotorForce=function(){return this.m_motorImpulse},C.prototype.b2PrismaticJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_localXAxis1.SetV(e.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=e.referenceAngle,this.m_impulse.SetZero(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=e.lowerTranslation,this.m_upperTranslation=e.upperTranslation,this.m_maxMotorForce=e.maxMotorForce,this.m_motorSpeed=e.motorSpeed,this.m_enableLimit=e.enableLimit,this.m_enableMotor=e.enableMotor,this.m_limitState=b.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},C.prototype.InitVelocityConstraints=function(t){var n=this.m_bodyA,r=this.m_bodyB,s,o=0;this.m_localCenterA.SetV(n.GetLocalCenter()),this.m_localCenterB.SetV(r.GetLocalCenter());var a=n.GetTransform(),f=r.GetTransform();s=n.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;o=s.col1.x*l+s.col2.x*c,c=s.col1.y*l+s.col2.y*c,l=o,s=r.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,p=this.m_localAnchor2.y-this.m_localCenterB.y;o=s.col1.x*h+s.col2.x*p,p=s.col1.y*h+s.col2.y*p,h=o;var d=r.m_sweep.c.x+h-n.m_sweep.c.x-l,v=r.m_sweep.c.y+p-n.m_sweep.c.y-c;this.m_invMassA=n.m_invMass,this.m_invMassB=r.m_invMass,this.m_invIA=n.m_invI,this.m_invIB=r.m_invI,this.m_axis.SetV(u.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(d+l)*this.m_axis.y-(v+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-p*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>e&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(u.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(d+l)*this.m_perp.y-(v+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-p*this.m_perp.x;var m=this.m_invMassA,g=this.m_invMassB,y=this.m_invIA,w=this.m_invIB;this.m_K.col1.x=m+g+y*this.m_s1*this.m_s1+w*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+w*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+w*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+w,this.m_K.col2.z=y*this.m_a1+w*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=m+g+y*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2;if(this.m_enableLimit){var E=this.m_axis.x*d+this.m_axis.y*v;u.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?this.m_limitState=b.e_equalLimits:E<=this.m_lowerTranslation?this.m_limitState!=b.e_atLowerLimit&&(this.m_limitState=b.e_atLowerLimit,this.m_impulse.z=0):E>=this.m_upperTranslation?this.m_limitState!=b.e_atUpperLimit&&(this.m_limitState=b.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=b.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=b.e_inactiveLimit;this.m_enableMotor==0&&(this.m_motorImpulse=0);if(t.warmStarting){this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var S=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,x=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,T=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,N=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.m_linearVelocity.x-=this.m_invMassA*S,n.m_linearVelocity.y-=this.m_invMassA*x,n.m_angularVelocity-=this.m_invIA*T,r.m_linearVelocity.x+=this.m_invMassB*S,r.m_linearVelocity.y+=this.m_invMassB*x,r.m_angularVelocity+=this.m_invIB*N}else this.m_impulse.SetZero(),this.m_motorImpulse=0},C.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r=t.m_linearVelocity,i=t.m_angularVelocity,s=n.m_linearVelocity,o=n.m_angularVelocity,a=0,f=0,h=0,p=0;if(this.m_enableMotor&&this.m_limitState!=b.e_equalLimits){var d=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*o-this.m_a1*i,v=this.m_motorMass*(this.m_motorSpeed-d),m=this.m_motorImpulse,g=e.dt*this.m_maxMotorForce;this.m_motorImpulse=u.Clamp(this.m_motorImpulse+v,-g,g),v=this.m_motorImpulse-m,a=v*this.m_axis.x,f=v*this.m_axis.y,h=v*this.m_a1,p=v*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*f,i-=this.m_invIA*h,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*f,o+=this.m_invIB*p}var y=this.m_perp.x*(s.x-r.x)+this.m_perp.y*(s.y-r.y)+this.m_s2*o-this.m_s1*i,w=o-i;if(this.m_enableLimit&&this.m_limitState!=b.e_inactiveLimit){var E=this.m_axis.x*(s.x-r.x)+this.m_axis.y*(s.y-r.y)+this.m_a2*o-this.m_a1*i,S=this.m_impulse.Copy(),x=this.m_K.Solve33(new c,-y,-w,-E);this.m_impulse.Add(x),this.m_limitState==b.e_atLowerLimit?this.m_impulse.z=u.Max(this.m_impulse.z,0):this.m_limitState==b.e_atUpperLimit&&(this.m_impulse.z=u.Min(this.m_impulse.z,0));var T=-y-(this.m_impulse.z-S.z)*this.m_K.col3.x,N=-w-(this.m_impulse.z-S.z)*this.m_K.col3.y,C=this.m_K.Solve22(new l,T,N);C.x+=S.x,C.y+=S.y,this.m_impulse.x=C.x,this.m_impulse.y=C.y,x.x=this.m_impulse.x-S.x,x.y=this.m_impulse.y-S.y,x.z=this.m_impulse.z-S.z,a=x.x*this.m_perp.x+x.z*this.m_axis.x,f=x.x*this.m_perp.y+x.z*this.m_axis.y,h=x.x*this.m_s1+x.y+x.z*this.m_a1,p=x.x*this.m_s2+x.y+x.z*this.m_a2,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*f,i-=this.m_invIA*h,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*f,o+=this.m_invIB*p}else{var k=this.m_K.Solve22(new l,-y,-w);this.m_impulse.x+=k.x,this.m_impulse.y+=k.y,a=k.x*this.m_perp.x,f=k.x*this.m_perp.y,h=k.x*this.m_s1+k.y,p=k.x*this.m_s2+k.y,r.x-=this.m_invMassA*a,r.y-=this.m_invMassA*f,i-=this.m_invIA*h,s.x+=this.m_invMassB*a,s.y+=this.m_invMassB*f,o+=this.m_invIB*p}t.m_linearVelocity.SetV(r),t.m_angularVelocity=i,n.m_linearVelocity.SetV(s),n.m_angularVelocity=o},C.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=0,r=this.m_bodyA,o=this.m_bodyB,a=r.m_sweep.c,f=r.m_sweep.a,h=o.m_sweep.c,p=o.m_sweep.a,d,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=!1,x=0,T=s.FromAngle(f),N=s.FromAngle(p);d=T;var C=this.m_localAnchor1.x-this.m_localCenterA.x,k=this.m_localAnchor1.y-this.m_localCenterA.y;v=d.col1.x*C+d.col2.x*k,k=d.col1.y*C+d.col2.y*k,C=v,d=N;var L=this.m_localAnchor2.x-this.m_localCenterB.x,A=this.m_localAnchor2.y-this.m_localCenterB.y;v=d.col1.x*L+d.col2.x*A,A=d.col1.y*L+d.col2.y*A,L=v;var O=h.x+L-a.x-C,M=h.y+A-a.y-k;if(this.m_enableLimit){this.m_axis=u.MulMV(T,this.m_localXAxis1),this.m_a1=(O+C)*this.m_axis.y-(M+k)*this.m_axis.x,this.m_a2=L*this.m_axis.y-A*this.m_axis.x;var _=this.m_axis.x*O+this.m_axis.y*M;u.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*i.b2_linearSlop?(x=u.Clamp(_,-i.b2_maxLinearCorrection,i.b2_maxLinearCorrection),w=u.Abs(_),S=!0):_<=this.m_lowerTranslation?(x=u.Clamp(_-this.m_lowerTranslation+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),w=this.m_lowerTranslation-_,S=!0):_>=this.m_upperTranslation&&(x=u.Clamp(_-this.m_upperTranslation+i.b2_linearSlop,0,i.b2_maxLinearCorrection),w=_-this.m_upperTranslation,S=!0)}this.m_perp=u.MulMV(T,this.m_localYAxis1),this.m_s1=(O+C)*this.m_perp.y-(M+k)*this.m_perp.x,this.m_s2=L*this.m_perp.y-A*this.m_perp.x;var D=new c,P=this.m_perp.x*O+this.m_perp.y*M,H=p-f-this.m_refAngle;w=u.Max(w,u.Abs(P)),E=u.Abs(H);if(S)m=this.m_invMassA,g=this.m_invMassB,y=this.m_invIA,b=this.m_invIB,this.m_K.col1.x=m+g+y*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,this.m_K.col1.y=y*this.m_s1+b*this.m_s2,this.m_K.col1.z=y*this.m_s1*this.m_a1+b*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=y+b,this.m_K.col2.z=y*this.m_a1+b*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=m+g+y*this.m_a1*this.m_a1+b*this.m_a2*this.m_a2,this.m_K.Solve33(D,-P,-H,-x);else{m=this.m_invMassA,g=this.m_invMassB,y=this.m_invIA,b=this.m_invIB;var B=m+g+y*this.m_s1*this.m_s1+b*this.m_s2*this.m_s2,j=y*this.m_s1+b*this.m_s2,F=y+b;this.m_K.col1.Set(B,j,0),this.m_K.col2.Set(j,F,0);var I=this.m_K.Solve22(new l,-P,-H);D.x=I.x,D.y=I.y,D.z=0}var q=D.x*this.m_perp.x+D.z*this.m_axis.x,R=D.x*this.m_perp.y+D.z*this.m_axis.y,U=D.x*this.m_s1+D.y+D.z*this.m_a1,z=D.x*this.m_s2+D.y+D.z*this.m_a2;return a.x-=this.m_invMassA*q,a.y-=this.m_invMassA*R,f-=this.m_invIA*U,h.x+=this.m_invMassB*q,h.y+=this.m_invMassB*R,p+=this.m_invIB*z,r.m_sweep.a=f,o.m_sweep.a=p,r.SynchronizeTransform(),o.SynchronizeTransform(),w<=i.b2_linearSlop&&E<=i.b2_angularSlop},t.inherit(k,t.Dynamics.Joints.b2JointDef),k.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,k.b2PrismaticJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new l,this.localAnchorB=new l,this.localAxisA=new l},k.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0},k.prototype.Initialize=function(e,t,n,r){this.bodyA=e,this.bodyB=t,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.localAxisA=this.bodyA.GetLocalVector(r),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},t.inherit(L,t.Dynamics.Joints.b2Joint),L.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,L.b2PulleyJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new l,this.m_groundAnchor2=new l,this.m_localAnchor1=new l,this.m_localAnchor2=new l,this.m_u1=new l,this.m_u2=new l},L.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},L.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},L.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_impulse*this.m_u2.x,e*this.m_impulse*this.m_u2.y)},L.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),0},L.prototype.GetGroundAnchorA=function(){var e=this.m_ground.m_xf.position.Copy();return e.Add(this.m_groundAnchor1),e},L.prototype.GetGroundAnchorB=function(){var e=this.m_ground.m_xf.position.Copy();return e.Add(this.m_groundAnchor2),e},L.prototype.GetLength1=function(){var e=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),t=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,r=e.x-t,i=e.y-n;return Math.sqrt(r*r+i*i)},L.prototype.GetLength2=function(){var e=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),t=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,n=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,r=e.x-t,i=e.y-n;return Math.sqrt(r*r+i*i)},L.prototype.GetRatio=function(){return this.m_ratio},L.prototype.b2PulleyJoint=function(e){this.__super.b2Joint.call(this,e);var t,n=0,r=0;this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=e.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=e.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=e.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=e.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_ratio=e.ratio,this.m_constant=e.lengthA+this.m_ratio*e.lengthB,this.m_maxLength1=u.Min(e.maxLengthA,this.m_constant-this.m_ratio*L.b2_minPulleyLength),this.m_maxLength2=u.Min(e.maxLengthB,(this.m_constant-L.b2_minPulleyLength)/this.m_ratio),this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},L.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r;r=t.m_xf.R;var s=this.m_localAnchor1.x-t.m_sweep.localCenter.x,o=this.m_localAnchor1.y-t.m_sweep.localCenter.y,u=r.col1.x*s+r.col2.x*o;o=r.col1.y*s+r.col2.y*o,s=u,r=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,f=this.m_localAnchor2.y-n.m_sweep.localCenter.y;u=r.col1.x*a+r.col2.x*f,f=r.col1.y*a+r.col2.y*f,a=u;var l=t.m_sweep.c.x+s,c=t.m_sweep.c.y+o,h=n.m_sweep.c.x+a,p=n.m_sweep.c.y+f,d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,v=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,m=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,g=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(l-d,c-v),this.m_u2.Set(h-m,p-g);var y=this.m_u1.Length(),w=this.m_u2.Length();y>i.b2_linearSlop?this.m_u1.Multiply(1/y):this.m_u1.SetZero(),w>i.b2_linearSlop?this.m_u2.Multiply(1/w):this.m_u2.SetZero();var E=this.m_constant-y-this.m_ratio*w;E>0?(this.m_state=b.e_inactiveLimit,this.m_impulse=0):this.m_state=b.e_atUpperLimit,y<this.m_maxLength1?(this.m_limitState1=b.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=b.e_atUpperLimit,w<this.m_maxLength2?(this.m_limitState2=b.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=b.e_atUpperLimit;var S=s*this.m_u1.y-o*this.m_u1.x,x=a*this.m_u2.y-f*this.m_u2.x;this.m_limitMass1=t.m_invMass+t.m_invI*S*S,this.m_limitMass2=n.m_invMass+n.m_invI*x*x,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass;if(e.warmStarting){this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio;var T=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,N=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,C=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,k=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;t.m_linearVelocity.x+=t.m_invMass*T,t.m_linearVelocity.y+=t.m_invMass*N,t.m_angularVelocity+=t.m_invI*(s*N-o*T),n.m_linearVelocity.x+=n.m_invMass*C,n.m_linearVelocity.y+=n.m_invMass*k,n.m_angularVelocity+=n.m_invI*(a*k-f*C)}else this.m_impulse=0,this.m_limitImpulse1=0,this.m_limitImpulse2=0},L.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r;r=t.m_xf.R;var i=this.m_localAnchor1.x-t.m_sweep.localCenter.x,s=this.m_localAnchor1.y-t.m_sweep.localCenter.y,o=r.col1.x*i+r.col2.x*s;s=r.col1.y*i+r.col2.y*s,i=o,r=n.m_xf.R;var a=this.m_localAnchor2.x-n.m_sweep.localCenter.x,f=this.m_localAnchor2.y-n.m_sweep.localCenter.y;o=r.col1.x*a+r.col2.x*f,f=r.col1.y*a+r.col2.y*f,a=o;var l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,w=0,E=0;this.m_state==b.e_atUpperLimit&&(l=t.m_linearVelocity.x+ -t.m_angularVelocity*s,c=t.m_linearVelocity.y+t.m_angularVelocity*i,h=n.m_linearVelocity.x+ -n.m_angularVelocity*f,p=n.m_linearVelocity.y+n.m_angularVelocity*a,y=-(this.m_u1.x*l+this.m_u1.y*c)-this.m_ratio*(this.m_u2.x*h+this.m_u2.y*p),w=this.m_pulleyMass*-y,E=this.m_impulse,this.m_impulse=u.Max(0,this.m_impulse+w),w=this.m_impulse-E,d=-w*this.m_u1.x,v=-w*this.m_u1.y,m=-this.m_ratio*w*this.m_u2.x,g=-this.m_ratio*w*this.m_u2.y,t.m_linearVelocity.x+=t.m_invMass*d,t.m_linearVelocity.y+=t.m_invMass*v,t.m_angularVelocity+=t.m_invI*(i*v-s*d),n.m_linearVelocity.x+=n.m_invMass*m,n.m_linearVelocity.y+=n.m_invMass*g,n.m_angularVelocity+=n.m_invI*(a*g-f*m)),this.m_limitState1==b.e_atUpperLimit&&(l=t.m_linearVelocity.x+ -t.m_angularVelocity*s,c=t.m_linearVelocity.y+t.m_angularVelocity*i,y=-(this.m_u1.x*l+this.m_u1.y*c),w=-this.m_limitMass1*y,E=this.m_limitImpulse1,this.m_limitImpulse1=u.Max(0,this.m_limitImpulse1+w),w=this.m_limitImpulse1-E,d=-w*this.m_u1.x,v=-w*this.m_u1.y,t.m_linearVelocity.x+=t.m_invMass*d,t.m_linearVelocity.y+=t.m_invMass*v,t.m_angularVelocity+=t.m_invI*(i*v-s*d)),this.m_limitState2==b.e_atUpperLimit&&(h=n.m_linearVelocity.x+ -n.m_angularVelocity*f,p=n.m_linearVelocity.y+n.m_angularVelocity*a,y=-(this.m_u2.x*h+this.m_u2.y*p),w=-this.m_limitMass2*y,E=this.m_limitImpulse2,this.m_limitImpulse2=u.Max(0,this.m_limitImpulse2+w),w=this.m_limitImpulse2-E,m=-w*this.m_u2.x,g=-w*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*m,n.m_linearVelocity.y+=n.m_invMass*g,n.m_angularVelocity+=n.m_invI*(a*g-f*m))},L.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=this.m_bodyA,n=this.m_bodyB,r,s=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,o=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,a=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,f=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0;return this.m_state==b.e_atUpperLimit&&(r=t.m_xf.R,l=this.m_localAnchor1.x-t.m_sweep.localCenter.x,c=this.m_localAnchor1.y-t.m_sweep.localCenter.y,N=r.col1.x*l+r.col2.x*c,c=r.col1.y*l+r.col2.y*c,l=N,r=n.m_xf.R,h=this.m_localAnchor2.x-n.m_sweep.localCenter.x,p=this.m_localAnchor2.y-n.m_sweep.localCenter.y,N=r.col1.x*h+r.col2.x*p,p=r.col1.y*h+r.col2.y*p,h=N,d=t.m_sweep.c.x+l,v=t.m_sweep.c.y+c,m=n.m_sweep.c.x+h,g=n.m_sweep.c.y+p,this.m_u1.Set(d-s,v-o),this.m_u2.Set(m-a,g-f),y=this.m_u1.Length(),w=this.m_u2.Length(),y>i.b2_linearSlop?this.m_u1.Multiply(1/y):this.m_u1.SetZero(),w>i.b2_linearSlop?this.m_u2.Multiply(1/w):this.m_u2.SetZero(),E=this.m_constant-y-this.m_ratio*w,C=u.Max(C,-E),E=u.Clamp(E+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),S=-this.m_pulleyMass*E,d=-S*this.m_u1.x,v=-S*this.m_u1.y,m=-this.m_ratio*S*this.m_u2.x,g=-this.m_ratio*S*this.m_u2.y,t.m_sweep.c.x+=t.m_invMass*d,t.m_sweep.c.y+=t.m_invMass*v,t.m_sweep.a+=t.m_invI*(l*v-c*d),n.m_sweep.c.x+=n.m_invMass*m,n.m_sweep.c.y+=n.m_invMass*g,n.m_sweep.a+=n.m_invI*(h*g-p*m),t.SynchronizeTransform(),n.SynchronizeTransform()),this.m_limitState1==b.e_atUpperLimit&&(r=t.m_xf.R,l=this.m_localAnchor1.x-t.m_sweep.localCenter.x,c=this.m_localAnchor1.y-t.m_sweep.localCenter.y,N=r.col1.x*l+r.col2.x*c,c=r.col1.y*l+r.col2.y*c,l=N,d=t.m_sweep.c.x+l,v=t.m_sweep.c.y+c,this.m_u1.Set(d-s,v-o),y=this.m_u1.Length(),y>i.b2_linearSlop?(this.m_u1.x*=1/y,this.m_u1.y*=1/y):this.m_u1.SetZero(),E=this.m_maxLength1-y,C=u.Max(C,-E),E=u.Clamp(E+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),S=-this.m_limitMass1*E,d=-S*this.m_u1.x,v=-S*this.m_u1.y,t.m_sweep.c.x+=t.m_invMass*d,t.m_sweep.c.y+=t.m_invMass*v,t.m_sweep.a+=t.m_invI*(l*v-c*d),t.SynchronizeTransform()),this.m_limitState2==b.e_atUpperLimit&&(r=n.m_xf.R,h=this.m_localAnchor2.x-n.m_sweep.localCenter.x,p=this.m_localAnchor2.y-n.m_sweep.localCenter.y,N=r.col1.x*h+r.col2.x*p,p=r.col1.y*h+r.col2.y*p,h=N,m=n.m_sweep.c.x+h,g=n.m_sweep.c.y+p,this.m_u2.Set(m-a,g-f),w=this.m_u2.Length(),w>i.b2_linearSlop?(this.m_u2.x*=1/w,this.m_u2.y*=1/w):this.m_u2.SetZero(),E=this.m_maxLength2-w,C=u.Max(C,-E),E=u.Clamp(E+i.b2_linearSlop,-i.b2_maxLinearCorrection,0),S=-this.m_limitMass2*E,m=-S*this.m_u2.x,g=-S*this.m_u2.y,n.m_sweep.c.x+=n.m_invMass*m,n.m_sweep.c.y+=n.m_invMass*g,n.m_sweep.a+=n.m_invI*(h*g-p*m),n.SynchronizeTransform()),C<i.b2_linearSlop},t.postDefs.push(function(){t.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),t.inherit(A,t.Dynamics.Joints.b2JointDef),A.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,A.b2PulleyJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new l,this.groundAnchorB=new l,this.localAnchorA=new l,this.localAnchorB=new l},A.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.lengthA=0,this.maxLengthA=0,this.lengthB=0,this.maxLengthB=0,this.ratio=1,this.collideConnected=!0},A.prototype.Initialize=function(e,t,n,r,i,s,o){o===undefined&&(o=0),this.bodyA=e,this.bodyB=t,this.groundAnchorA.SetV(n),this.groundAnchorB.SetV(r),this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(s);var u=i.x-n.x,a=i.y-n.y;this.lengthA=Math.sqrt(u*u+a*a);var f=s.x-r.x,l=s.y-r.y;this.lengthB=Math.sqrt(f*f+l*l),this.ratio=o;var c=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=c-this.ratio*L.b2_minPulleyLength,this.maxLengthB=(c-L.b2_minPulleyLength)/this.ratio},t.inherit(O,t.Dynamics.Joints.b2Joint),O.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,O.b2RevoluteJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new s,this.K1=new s,this.K2=new s,this.K3=new s,this.impulse3=new c,this.impulse2=new l,this.reduced=new l,this.m_localAnchor1=new l,this.m_localAnchor2=new l,this.m_impulse=new c,this.m_mass=new o},O.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},O.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},O.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_impulse.x,e*this.m_impulse.y)},O.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.z},O.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},O.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},O.prototype.IsLimitEnabled=function(){return this.m_enableLimit},O.prototype.EnableLimit=function(e){this.m_enableLimit=e},O.prototype.GetLowerLimit=function(){return this.m_lowerAngle},O.prototype.GetUpperLimit=function(){return this.m_upperAngle},O.prototype.SetLimits=function(e,t){e===undefined&&(e=0),t===undefined&&(t=0),this.m_lowerAngle=e,this.m_upperAngle=t},O.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},O.prototype.EnableMotor=function(e){this.m_enableMotor=e},O.prototype.SetMotorSpeed=function(e){e===undefined&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=e},O.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},O.prototype.SetMaxMotorTorque=function(e){e===undefined&&(e=0),this.m_maxMotorTorque=e},O.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},O.prototype.b2RevoluteJoint=function(e){this.__super.b2Joint.call(this,e),this.m_localAnchor1.SetV(e.localAnchorA),this.m_localAnchor2.SetV(e.localAnchorB),this.m_referenceAngle=e.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=e.lowerAngle,this.m_upperAngle=e.upperAngle,this.m_maxMotorTorque=e.maxMotorTorque,this.m_motorSpeed=e.motorSpeed,this.m_enableLimit=e.enableLimit,this.m_enableMotor=e.enableMotor,this.m_limitState=b.e_inactiveLimit},O.prototype.InitVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r,s=0;this.m_enableMotor||this.m_enableLimit,r=t.m_xf.R;var o=this.m_localAnchor1.x-t.m_sweep.localCenter.x,a=this.m_localAnchor1.y-t.m_sweep.localCenter.y;s=r.col1.x*o+r.col2.x*a,a=r.col1.y*o+r.col2.y*a,o=s,r=n.m_xf.R;var f=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;s=r.col1.x*f+r.col2.x*l,l=r.col1.y*f+r.col2.y*l,f=s;var c=t.m_invMass,h=n.m_invMass,p=t.m_invI,d=n.m_invI;this.m_mass.col1.x=c+h+a*a*p+l*l*d,this.m_mass.col2.x=-a*o*p-l*f*d,this.m_mass.col3.x=-a*p-l*d,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=c+h+o*o*p+f*f*d,this.m_mass.col3.y=o*p+f*d,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=p+d,this.m_motorMass=1/(p+d),this.m_enableMotor==0&&(this.m_motorImpulse=0);if(this.m_enableLimit){var v=n.m_sweep.a-t.m_sweep.a-this.m_referenceAngle;u.Abs(this.m_upperAngle-this.m_lowerAngle)<2*i.b2_angularSlop?this.m_limitState=b.e_equalLimits:v<=this.m_lowerAngle?(this.m_limitState!=b.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=b.e_atLowerLimit):v>=this.m_upperAngle?(this.m_limitState!=b.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=b.e_atUpperLimit):(this.m_limitState=b.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=b.e_inactiveLimit;if(e.warmStarting){this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio;var m=this.m_impulse.x,g=this.m_impulse.y;t.m_linearVelocity.x-=c*m,t.m_linearVelocity.y-=c*g,t.m_angularVelocity-=p*(o*g-a*m+this.m_motorImpulse+this.m_impulse.z),n.m_linearVelocity.x+=h*m,n.m_linearVelocity.y+=h*g,n.m_angularVelocity+=d*(f*g-l*m+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0},O.prototype.SolveVelocityConstraints=function(e){var t=this.m_bodyA,n=this.m_bodyB,r,i=0,s=0,o=0,a=0,f=0,l=0,c=t.m_linearVelocity,h=t.m_angularVelocity,p=n.m_linearVelocity,d=n.m_angularVelocity,v=t.m_invMass,m=n.m_invMass,g=t.m_invI,y=n.m_invI;if(this.m_enableMotor&&this.m_limitState!=b.e_equalLimits){var w=d-h-this.m_motorSpeed,E=this.m_motorMass*-w,S=this.m_motorImpulse,x=e.dt*this.m_maxMotorTorque;this.m_motorImpulse=u.Clamp(this.m_motorImpulse+E,-x,x),E=this.m_motorImpulse-S,h-=g*E,d+=y*E}if(this.m_enableLimit&&this.m_limitState!=b.e_inactiveLimit){r=t.m_xf.R,o=this.m_localAnchor1.x-t.m_sweep.localCenter.x,a=this.m_localAnchor1.y-t.m_sweep.localCenter.y,i=r.col1.x*o+r.col2.x*a,a=r.col1.y*o+r.col2.y*a,o=i,r=n.m_xf.R,f=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y,i=r.col1.x*f+r.col2.x*l,l=r.col1.y*f+r.col2.y*l,f=i;var T=p.x+ -d*l-c.x- -h*a,N=p.y+d*f-c.y-h*o,C=d-h;this.m_mass.Solve33(this.impulse3,-T,-N,-C),this.m_limitState==b.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==b.e_atLowerLimit?(s=this.m_impulse.z+this.impulse3.z,s<0&&(this.m_mass.Solve22(this.reduced,-T,-N),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState==b.e_atUpperLimit&&(s=this.m_impulse.z+this.impulse3.z,s>0&&(this.m_mass.Solve22(this.reduced,-T,-N),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),c.x-=v*this.impulse3.x,c.y-=v*this.impulse3.y,h-=g*(o*this.impulse3.y-a*this.impulse3.x+this.impulse3.z),p.x+=m*this.impulse3.x,p.y+=m*this.impulse3.y,d+=y*(f*this.impulse3.y-l*this.impulse3.x+this.impulse3.z)}else{r=t.m_xf.R,o=this.m_localAnchor1.x-t.m_sweep.localCenter.x,a=this.m_localAnchor1.y-t.m_sweep.localCenter.y,i=r.col1.x*o+r.col2.x*a,a=r.col1.y*o+r.col2.y*a,o=i,r=n.m_xf.R,f=this.m_localAnchor2.x-n.m_sweep.localCenter.x,l=this.m_localAnchor2.y-n.m_sweep.localCenter.y,i=r.col1.x*f+r.col2.x*l,l=r.col1.y*f+r.col2.y*l,f=i;var k=p.x+ -d*l-c.x- -h*a,L=p.y+d*f-c.y-h*o;this.m_mass.Solve22(this.impulse2,-k,-L),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,c.x-=v*this.impulse2.x,c.y-=v*this.impulse2.y,h-=g*(o*this.impulse2.y-a*this.impulse2.x),p.x+=m*this.impulse2.x,p.y+=m*this.impulse2.y,d+=y*(f*this.impulse2.y-l*this.impulse2.x)}t.m_linearVelocity.SetV(c),t.m_angularVelocity=h,n.m_linearVelocity.SetV(p),n.m_angularVelocity=d},O.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t=0,n=0,r,s=this.m_bodyA,o=this.m_bodyB,a=0,f=0,l=0,c=0,h=0;if(this.m_enableLimit&&this.m_limitState!=b.e_inactiveLimit){var p=o.m_sweep.a-s.m_sweep.a-this.m_referenceAngle,d=0;this.m_limitState==b.e_equalLimits?(n=u.Clamp(p-this.m_lowerAngle,-i.b2_maxAngularCorrection,i.b2_maxAngularCorrection),d=-this.m_motorMass*n,a=u.Abs(n)):this.m_limitState==b.e_atLowerLimit?(n=p-this.m_lowerAngle,a=-n,n=u.Clamp(n+i.b2_angularSlop,-i.b2_maxAngularCorrection,0),d=-this.m_motorMass*n):this.m_limitState==b.e_atUpperLimit&&(n=p-this.m_upperAngle,a=n,n=u.Clamp(n-i.b2_angularSlop,0,i.b2_maxAngularCorrection),d=-this.m_motorMass*n),s.m_sweep.a-=s.m_invI*d,o.m_sweep.a+=o.m_invI*d,s.SynchronizeTransform(),o.SynchronizeTransform()}r=s.m_xf.R;var v=this.m_localAnchor1.x-s.m_sweep.localCenter.x,m=this.m_localAnchor1.y-s.m_sweep.localCenter.y;l=r.col1.x*v+r.col2.x*m,m=r.col1.y*v+r.col2.y*m,v=l,r=o.m_xf.R;var g=this.m_localAnchor2.x-o.m_sweep.localCenter.x,y=this.m_localAnchor2.y-o.m_sweep.localCenter.y;l=r.col1.x*g+r.col2.x*y,y=r.col1.y*g+r.col2.y*y,g=l;var w=o.m_sweep.c.x+g-s.m_sweep.c.x-v,E=o.m_sweep.c.y+y-s.m_sweep.c.y-m,S=w*w+E*E,x=Math.sqrt(S);f=x;var T=s.m_invMass,N=o.m_invMass,C=s.m_invI,k=o.m_invI,L=10*i.b2_linearSlop;if(S>L*L){var A=w/x,M=E/x,_=T+N,D=1/_;c=D*-w,h=D*-E;var P=.5;s.m_sweep.c.x-=P*T*c,s.m_sweep.c.y-=P*T*h,o.m_sweep.c.x+=P*N*c,o.m_sweep.c.y+=P*N*h,w=o.m_sweep.c.x+g-s.m_sweep.c.x-v,E=o.m_sweep.c.y+y-s.m_sweep.c.y-m}return this.K1.col1.x=T+N,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=T+N,this.K2.col1.x=C*m*m,this.K2.col2.x=-C*v*m,this.K2.col1.y=-C*v*m,this.K2.col2.y=C*v*v,this.K3.col1.x=k*y*y,this.K3.col2.x=-k*g*y,this.K3.col1.y=-k*g*y,this.K3.col2.y=k*g*g,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(O.tImpulse,-w,-E),c=O.tImpulse.x,h=O.tImpulse.y,s.m_sweep.c.x-=s.m_invMass*c,s.m_sweep.c.y-=s.m_invMass*h,s.m_sweep.a-=s.m_invI*(v*h-m*c),o.m_sweep.c.x+=o.m_invMass*c,o.m_sweep.c.y+=o.m_invMass*h,o.m_sweep.a+=o.m_invI*(g*h-y*c),s.SynchronizeTransform(),o.SynchronizeTransform(),f<=i.b2_linearSlop&&a<=i.b2_angularSlop},t.postDefs.push(function(){t.Dynamics.Joints.b2RevoluteJoint.tImpulse=new l}),t.inherit(M,t.Dynamics.Joints.b2JointDef),M.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,M.b2RevoluteJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new l,this.localAnchorB=new l},M.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.referenceAngle=0,this.lowerAngle=0,this.upperAngle=0,this.maxMotorTorque=0,this.motorSpeed=0,this.enableLimit=!1,this.enableMotor=!1},M.prototype.Initialize=function(e,t,n){this.bodyA=e,this.bodyB=t,this.localAnchorA=this.bodyA.GetLocalPoint(n),this.localAnchorB=this.bodyB.GetLocalPoint(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},t.inherit(_,t.Dynamics.Joints.b2Joint),_.prototype.__super=t.Dynamics.Joints.b2Joint.prototype,_.b2WeldJoint=function(){t.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new l,this.m_localAnchorB=new l,this.m_impulse=new c,this.m_mass=new o},_.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},_.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},_.prototype.GetReactionForce=function(e){return e===undefined&&(e=0),new l(e*this.m_impulse.x,e*this.m_impulse.y)},_.prototype.GetReactionTorque=function(e){return e===undefined&&(e=0),e*this.m_impulse.z},_.prototype.b2WeldJoint=function(e){this.__super.b2Joint.call(this,e),this.m_localAnchorA.SetV(e.localAnchorA),this.m_localAnchorB.SetV(e.localAnchorB),this.m_referenceAngle=e.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new o},_.prototype.InitVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB;t=r.m_xf.R;var s=this.m_localAnchorA.x-r.m_sweep.localCenter.x,o=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*s+t.col2.x*o,o=t.col1.y*s+t.col2.y*o,s=n,t=i.m_xf.R;var u=this.m_localAnchorB.x-i.m_sweep.localCenter.x,a=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*u+t.col2.x*a,a=t.col1.y*u+t.col2.y*a,u=n;var f=r.m_invMass,l=i.m_invMass,c=r.m_invI,h=i.m_invI;this.m_mass.col1.x=f+l+o*o*c+a*a*h,this.m_mass.col2.x=-o*s*c-a*u*h,this.m_mass.col3.x=-o*c-a*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=f+l+s*s*c+u*u*h,this.m_mass.col3.y=s*c+u*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=c+h,e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_impulse.z*=e.dtRatio,r.m_linearVelocity.x-=f*this.m_impulse.x,r.m_linearVelocity.y-=f*this.m_impulse.y,r.m_angularVelocity-=c*(s*this.m_impulse.y-o*this.m_impulse.x+this.m_impulse.z),i.m_linearVelocity.x+=l*this.m_impulse.x,i.m_linearVelocity.y+=l*this.m_impulse.y,i.m_angularVelocity+=h*(u*this.m_impulse.y-a*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},_.prototype.SolveVelocityConstraints=function(e){var t,n=0,r=this.m_bodyA,i=this.m_bodyB,s=r.m_linearVelocity,o=r.m_angularVelocity,u=i.m_linearVelocity,a=i.m_angularVelocity,f=r.m_invMass,l=i.m_invMass,h=r.m_invI,p=i.m_invI;t=r.m_xf.R;var d=this.m_localAnchorA.x-r.m_sweep.localCenter.x,v=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*d+t.col2.x*v,v=t.col1.y*d+t.col2.y*v,d=n,t=i.m_xf.R;var m=this.m_localAnchorB.x-i.m_sweep.localCenter.x,g=this.m_localAnchorB.y-i.m_sweep.localCenter.y;n=t.col1.x*m+t.col2.x*g,g=t.col1.y*m+t.col2.y*g,m=n;var y=u.x-a*g-s.x+o*v,b=u.y+a*m-s.y-o*d,w=a-o,E=new c;this.m_mass.Solve33(E,-y,-b,-w),this.m_impulse.Add(E),s.x-=f*E.x,s.y-=f*E.y,o-=h*(d*E.y-v*E.x+E.z),u.x+=l*E.x,u.y+=l*E.y,a+=p*(m*E.y-g*E.x+E.z),r.m_angularVelocity=o,i.m_angularVelocity=a},_.prototype.SolvePositionConstraints=function(e){e===undefined&&(e=0);var t,n=0,r=this.m_bodyA,s=this.m_bodyB;t=r.m_xf.R;var o=this.m_localAnchorA.x-r.m_sweep.localCenter.x,a=this.m_localAnchorA.y-r.m_sweep.localCenter.y;n=t.col1.x*o+t.col2.x*a,a=t.col1.y*o+t.col2.y*a,o=n,t=s.m_xf.R;var f=this.m_localAnchorB.x-s.m_sweep.localCenter.x,l=this.m_localAnchorB.y-s.m_sweep.localCenter.y;n=t.col1.x*f+t.col2.x*l,l=t.col1.y*f+t.col2.y*l,f=n;var h=r.m_invMass,p=s.m_invMass,d=r.m_invI,v=s.m_invI,m=s.m_sweep.c.x+f-r.m_sweep.c.x-o,g=s.m_sweep.c.y+l-r.m_sweep.c.y-a,y=s.m_sweep.a-r.m_sweep.a-this.m_referenceAngle,b=10*i.b2_linearSlop,w=Math.sqrt(m*m+g*g),E=u.Abs(y);w>b&&(d*=1,v*=1),this.m_mass.col1.x=h+p+a*a*d+l*l*v,this.m_mass.col2.x=-a*o*d-l*f*v,this.m_mass.col3.x=-a*d-l*v,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=h+p+o*o*d+f*f*v,this.m_mass.col3.y=o*d+f*v,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=d+v;var S=new c;return this.m_mass.Solve33(S,-m,-g,-y),r.m_sweep.c.x-=h*S.x,r.m_sweep.c.y-=h*S.y,r.m_sweep.a-=d*(o*S.y-a*S.x+S.z),s.m_sweep.c.x+=p*S.x,s.m_sweep.c.y+=p*S.y,s.m_sweep.a+=v*(f*S.y-l*S.x+S.z),r.SynchronizeTransform(),s.SynchronizeTransform(),w<=i.b2_linearSlop&&E<=i.b2_angularSlop},t.inherit(D,t.Dynamics.Joints.b2JointDef),D.prototype.__super=t.Dynamics.Joints.b2JointDef.prototype,D.b2WeldJointDef=function(){t.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new l,this.localAnchorB=new l},D.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=b.e_weldJoint,this.referenceAngle=0},D.prototype.Initialize=function(e,t,n){this.bodyA=e,this.bodyB=t,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(n)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var e=t.Dynamics.b2DebugDraw;e.b2DebugDraw=function(){this.m_drawScale=1,this.m_lineThickness=1,this.m_alpha=1,this.m_fillAlpha=1,this.m_xformScale=1;var e=this;this.m_sprite={graphics:{clear:function(){e.m_ctx.clearRect(0,0,e.m_ctx.canvas.width,e.m_ctx.canvas.height)}}}},e.prototype._color=function(e,t){return"rgba("+((e&16711680)>>16)+","+((e&65280)>>8)+","+(e&255)+","+t+")"},e.prototype.b2DebugDraw=function(){this.m_drawFlags=0},e.prototype.SetFlags=function(e){e===undefined&&(e=0),this.m_drawFlags=e},e.prototype.GetFlags=function(){return this.m_drawFlags},e.prototype.AppendFlags=function(e){e===undefined&&(e=0),this.m_drawFlags|=e},e.prototype.ClearFlags=function(e){e===undefined&&(e=0),this.m_drawFlags&=~e},e.prototype.SetSprite=function(e){this.m_ctx=e},e.prototype.GetSprite=function(){return this.m_ctx},e.prototype.SetDrawScale=function(e){e===undefined&&(e=0),this.m_drawScale=e},e.prototype.GetDrawScale=function(){return this.m_drawScale},e.prototype.SetLineThickness=function(e){e===undefined&&(e=0),this.m_lineThickness=e,this.m_ctx.strokeWidth=e},e.prototype.GetLineThickness=function(){return this.m_lineThickness},e.prototype.SetAlpha=function(e){e===undefined&&(e=0),this.m_alpha=e},e.prototype.GetAlpha=function(){return this.m_alpha},e.prototype.SetFillAlpha=function(e){e===undefined&&(e=0),this.m_fillAlpha=e},e.prototype.GetFillAlpha=function(){return this.m_fillAlpha},e.prototype.SetXFormScale=function(e){e===undefined&&(e=0),this.m_xformScale=e},e.prototype.GetXFormScale=function(){return this.m_xformScale},e.prototype.DrawPolygon=function(e,t,n){if(!t)return;var r=this.m_ctx,i=this.m_drawScale;r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.moveTo(e[0].x*i,e[0].y*i);for(var s=1;s<t;s++)r.lineTo(e[s].x*i,e[s].y*i);r.lineTo(e[0].x*i,e[0].y*i),r.closePath(),r.stroke()},e.prototype.DrawSolidPolygon=function(e,t,n){if(!t)return;var r=this.m_ctx,i=this.m_drawScale;r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.fillStyle=this._color(n.color,this.m_fillAlpha),r.moveTo(e[0].x*i,e[0].y*i);for(var s=1;s<t;s++)r.lineTo(e[s].x*i,e[s].y*i);r.lineTo(e[0].x*i,e[0].y*i),r.closePath(),r.fill(),r.stroke()},e.prototype.DrawCircle=function(e,t,n){if(!t)return;var r=this.m_ctx,i=this.m_drawScale;r.beginPath(),r.strokeStyle=this._color(n.color,this.m_alpha),r.arc(e.x*i,e.y*i,t*i,0,Math.PI*2,!0),r.closePath(),r.stroke()},e.prototype.DrawSolidCircle=function(e,t,n,r){if(!t)return;var i=this.m_ctx,s=this.m_drawScale,o=e.x*s,u=e.y*s;i.moveTo(0,0),i.beginPath(),i.strokeStyle=this._color(r.color,this.m_alpha),i.fillStyle=this._color(r.color,this.m_fillAlpha),i.arc(o,u,t*s,0,Math.PI*2,!0),i.moveTo(o,u),i.lineTo((e.x+n.x*t)*s,(e.y+n.y*t)*s),i.closePath(),i.fill(),i.stroke()},e.prototype.DrawSegment=function(e,t,n){var r=this.m_ctx,i=this.m_drawScale;r.strokeStyle=this._color(n.color,this.m_alpha),r.beginPath(),r.moveTo(e.x*i,e.y*i),r.lineTo(t.x*i,t.y*i),r.closePath(),r.stroke()},e.prototype.DrawTransform=function(e){var t=this.m_ctx,n=this.m_drawScale;t.beginPath(),t.strokeStyle=this._color(16711680,this.m_alpha),t.moveTo(e.position.x*n,e.position.y*n),t.lineTo((e.position.x+this.m_xformScale*e.R.col1.x)*n,(e.position.y+this.m_xformScale*e.R.col1.y)*n),t.strokeStyle=this._color(65280,this.m_alpha),t.moveTo(e.position.x*n,e.position.y*n),t.lineTo((e.position.x+this.m_xformScale*e.R.col2.x)*n,(e.position.y+this.m_xformScale*e.R.col2.y)*n),t.closePath(),t.stroke()}}();var i;for(i=0;i<t.postDefs.length;++i)t.postDefs[i]();return delete t.postDefs,{Common:{Math:{b2Vec2:t.Common.Math.b2Vec2,createB2Vec2:function(e,n){return new t.Common.Math.b2Vec2(e,n)}}},Dynamics:{b2Body:t.Dynamics.b2Body,createB2Body:function(){return new t.Dynamics.b2Body},b2BodyDef:t.Dynamics.b2BodyDef,createB2BodyDef:function(){return new t.Dynamics.b2BodyDef},b2FilterData:t.Dynamics.b2FilterData,createB2FilterData:function(){return new t.Dynamics.b2FilterData},b2ContactListener:t.Dynamics.b2ContactListener,createB2ContactListener:function(e,n,r,i){var s=new t.Dynamics.b2ContactListener;return e&&(s.BeginContact=e),n&&(s.EndContact=n),r&&(s.PreSolve=r),i&&(s.PostSolve=i),s},b2DebugDraw:t.Dynamics.b2DebugDraw,createB2DebugDraw:function(){return new t.Dynamics.b2DebugDraw},b2FixtureDef:t.Dynamics.b2FixtureDef,createB2FixtureDef:function(){return new t.Dynamics.b2FixtureDef},b2World:t.Dynamics.b2World,createB2World:function(e,n){return new t.Dynamics.b2World(e,n)}},Collision:{Shapes:{b2PolygonShape:t.Collision.Shapes.b2PolygonShape,createB2PolygonShape:function(){return new t.Collision.Shapes.b2PolygonShape},b2CircleShape:t.Collision.Shapes.b2CircleShape,createB2CircleShape:function(e){return new t.Collision.Shapes.b2CircleShape(e)}}}}}),define("dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU=",function(){"use strict";return typeof NATIVE!="undefined"}),define("gJW/lLYgY7GQD3jSIw3KqCfqP7QOzxtAqQKeGMkRgsk=",["dnHHJc3xgY3F3xUZ3aiU0rcFpq2EsO8HSuPtvNCw9mU="],function(e){"use strict";return{close:function(){e&&NATIVE.sendActivityToBack()}}})
